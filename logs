Grafana server is running with elevated privileges. This is not recommended
logger=settings t=2024-08-29T15:36:40.786898983Z level=info msg="Starting Grafana" version=11.2.0 commit=c57667e4481563f5e6cf945b03bc0626caa4dbeb branch=HEAD compiled=2024-08-29T15:36:40Z
logger=settings t=2024-08-29T15:36:40.802802809Z level=info msg="Config loaded from" file=/usr/share/grafana/conf/defaults.ini
logger=settings t=2024-08-29T15:36:40.812864591Z level=info msg="Config loaded from" file=/etc/grafana/grafana.ini
logger=settings t=2024-08-29T15:36:40.909430182Z level=info msg=Target target=[all]
logger=settings t=2024-08-29T15:36:40.909485252Z level=info msg="Path Home" path=/usr/share/grafana
logger=settings t=2024-08-29T15:36:40.909493223Z level=info msg="Path Data" path=/usr/share/grafana/data
logger=settings t=2024-08-29T15:36:40.909500369Z level=info msg="Path Logs" path=/usr/share/grafana/data/log
logger=settings t=2024-08-29T15:36:40.909507105Z level=info msg="Path Plugins" path=/usr/share/grafana/data/plugins
logger=settings t=2024-08-29T15:36:40.909513861Z level=info msg="Path Provisioning" path=/etc/grafana/provisioning
logger=settings t=2024-08-29T15:36:40.909535056Z level=info msg="App mode production"
logger=featuremgmt t=2024-08-29T15:36:40.921359577Z level=info msg=FeatureToggles alertingNoDataErrorExecution=true cloudWatchCrossAccountQuerying=true kubernetesPlaylists=true cloudWatchNewLabelParsing=true panelMonitoring=true correlations=true logsExploreTableVisualisation=true nestedFolders=true logRowsPopoverMenu=true awsAsyncQueryCaching=true publicDashboards=true alertingInsights=true prometheusAzureOverrideAudience=true annotationPermissionUpdate=true exploreMetrics=true recordedQueriesMulti=true transformationsVariableSupport=true alertingSimplifiedRouting=true dataplaneFrontendFallback=true prometheusDataplane=true angularDeprecationUI=true cloudWatchRoundUpEndTime=true prometheusConfigOverhaulAuth=true prometheusMetricEncyclopedia=true managedPluginsInstall=true lokiQueryHints=true topnav=true influxdbBackendMigration=true groupToNestedTableTransformation=true formatString=true logsInfiniteScrolling=true dashgpt=true lokiStructuredMetadata=true addFieldFromCalculationStatFunctions=true lokiQuerySplitting=true recoveryThreshold=true logsContextDatasourceUi=true lokiMetricDataplane=true transformationsRedesign=true autoMigrateXYChartPanel=true ssoSettingsApi=true tlsMemcached=true
logger=sqlstore t=2024-08-29T15:36:40.921540542Z level=info msg="Connecting to DB" dbtype=sqlite3
logger=sqlstore t=2024-08-29T15:36:40.921570836Z level=info msg="Creating SQLite database file" path=/usr/share/grafana/data/grafana.db
logger=migrator t=2024-08-29T15:36:40.92366545Z level=info msg="Locking database"
logger=migrator t=2024-08-29T15:36:40.92369727Z level=info msg="Starting DB migrations"
logger=migrator t=2024-08-29T15:36:40.924412896Z level=info msg="Executing migration" id="create migration_log table"
logger=migrator t=2024-08-29T15:36:40.924444437Z level=debug msg="Executing sql migration" id="create migration_log table" sql="CREATE TABLE IF NOT EXISTS `migration_log` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `migration_id` TEXT NOT NULL\n, `sql` TEXT NOT NULL\n, `success` INTEGER NOT NULL\n, `error` TEXT NOT NULL\n, `timestamp` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:40.925515441Z level=info msg="Migration successfully executed" id="create migration_log table" duration=1.101642ms
logger=migrator t=2024-08-29T15:36:40.975486401Z level=info msg="Executing migration" id="create user table"
logger=migrator t=2024-08-29T15:36:40.975554146Z level=debug msg="Executing sql migration" id="create user table" sql="CREATE TABLE IF NOT EXISTS `user` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `version` INTEGER NOT NULL\n, `login` TEXT NOT NULL\n, `email` TEXT NOT NULL\n, `name` TEXT NULL\n, `password` TEXT NULL\n, `salt` TEXT NULL\n, `rands` TEXT NULL\n, `company` TEXT NULL\n, `account_id` INTEGER NOT NULL\n, `is_admin` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:40.976477496Z level=info msg="Migration successfully executed" id="create user table" duration=1.008788ms
logger=migrator t=2024-08-29T15:36:41.012401795Z level=info msg="Executing migration" id="add unique index user.login"
logger=migrator t=2024-08-29T15:36:41.012458161Z level=debug msg="Executing migration condition SQL" id="add unique index user.login" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user UQE_user_login]"
logger=migrator t=2024-08-29T15:36:41.012738513Z level=debug msg="Executing sql migration" id="add unique index user.login" sql="CREATE UNIQUE INDEX `UQE_user_login` ON `user` (`login`);"
logger=migrator t=2024-08-29T15:36:41.013648585Z level=info msg="Migration successfully executed" id="add unique index user.login" duration=1.248357ms
logger=migrator t=2024-08-29T15:36:41.047783201Z level=info msg="Executing migration" id="add unique index user.email"
logger=migrator t=2024-08-29T15:36:41.04786715Z level=debug msg="Executing migration condition SQL" id="add unique index user.email" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user UQE_user_email]"
logger=migrator t=2024-08-29T15:36:41.050524304Z level=debug msg="Executing sql migration" id="add unique index user.email" sql="CREATE UNIQUE INDEX `UQE_user_email` ON `user` (`email`);"
logger=migrator t=2024-08-29T15:36:41.055735985Z level=info msg="Migration successfully executed" id="add unique index user.email" duration=7.950963ms
logger=migrator t=2024-08-29T15:36:41.096815699Z level=info msg="Executing migration" id="drop index UQE_user_login - v1"
logger=migrator t=2024-08-29T15:36:41.096881579Z level=debug msg="Executing migration condition SQL" id="drop index UQE_user_login - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user UQE_user_login]"
logger=migrator t=2024-08-29T15:36:41.097390918Z level=debug msg="Executing sql migration" id="drop index UQE_user_login - v1" sql="DROP INDEX `UQE_user_login`"
logger=migrator t=2024-08-29T15:36:41.115812635Z level=info msg="Migration successfully executed" id="drop index UQE_user_login - v1" duration=18.993472ms
logger=migrator t=2024-08-29T15:36:41.14732272Z level=info msg="Executing migration" id="drop index UQE_user_email - v1"
logger=migrator t=2024-08-29T15:36:41.147768223Z level=debug msg="Executing migration condition SQL" id="drop index UQE_user_email - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user UQE_user_email]"
logger=migrator t=2024-08-29T15:36:41.150434164Z level=debug msg="Executing sql migration" id="drop index UQE_user_email - v1" sql="DROP INDEX `UQE_user_email`"
logger=migrator t=2024-08-29T15:36:41.163958729Z level=info msg="Migration successfully executed" id="drop index UQE_user_email - v1" duration=16.632922ms
logger=migrator t=2024-08-29T15:36:41.187754778Z level=info msg="Executing migration" id="Rename table user to user_v1 - v1"
logger=migrator t=2024-08-29T15:36:41.197935508Z level=debug msg="Executing sql migration" id="Rename table user to user_v1 - v1" sql="ALTER TABLE `user` RENAME TO `user_v1`"
logger=migrator t=2024-08-29T15:36:41.213933693Z level=info msg="Migration successfully executed" id="Rename table user to user_v1 - v1" duration=26.175433ms
logger=migrator t=2024-08-29T15:36:41.25065537Z level=info msg="Executing migration" id="create user table v2"
logger=migrator t=2024-08-29T15:36:41.250834398Z level=debug msg="Executing sql migration" id="create user table v2" sql="CREATE TABLE IF NOT EXISTS `user` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `version` INTEGER NOT NULL\n, `login` TEXT NOT NULL\n, `email` TEXT NOT NULL\n, `name` TEXT NULL\n, `password` TEXT NULL\n, `salt` TEXT NULL\n, `rands` TEXT NULL\n, `company` TEXT NULL\n, `org_id` INTEGER NOT NULL\n, `is_admin` INTEGER NOT NULL\n, `email_verified` INTEGER NULL\n, `theme` TEXT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:41.264674519Z level=info msg="Migration successfully executed" id="create user table v2" duration=14.018899ms
logger=migrator t=2024-08-29T15:36:41.296793179Z level=info msg="Executing migration" id="create index UQE_user_login - v2"
logger=migrator t=2024-08-29T15:36:41.298446246Z level=debug msg="Executing migration condition SQL" id="create index UQE_user_login - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user UQE_user_login]"
logger=migrator t=2024-08-29T15:36:41.302163678Z level=debug msg="Executing sql migration" id="create index UQE_user_login - v2" sql="CREATE UNIQUE INDEX `UQE_user_login` ON `user` (`login`);"
logger=migrator t=2024-08-29T15:36:41.302783535Z level=info msg="Migration successfully executed" id="create index UQE_user_login - v2" duration=5.996424ms
logger=migrator t=2024-08-29T15:36:41.317508686Z level=info msg="Executing migration" id="create index UQE_user_email - v2"
logger=migrator t=2024-08-29T15:36:41.319926325Z level=debug msg="Executing migration condition SQL" id="create index UQE_user_email - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user UQE_user_email]"
logger=migrator t=2024-08-29T15:36:41.327593628Z level=debug msg="Executing sql migration" id="create index UQE_user_email - v2" sql="CREATE UNIQUE INDEX `UQE_user_email` ON `user` (`email`);"
logger=migrator t=2024-08-29T15:36:41.329531126Z level=info msg="Migration successfully executed" id="create index UQE_user_email - v2" duration=12.007183ms
logger=migrator t=2024-08-29T15:36:41.348033008Z level=info msg="Executing migration" id="copy data_source v1 to v2"
logger=migrator t=2024-08-29T15:36:41.350418046Z level=debug msg="Executing sql migration" id="copy data_source v1 to v2" sql="INSERT INTO `user` (`id`\n, `version`\n, `email`\n, `name`\n, `password`\n, `rands`\n, `company`\n, `login`\n, `salt`\n, `org_id`\n, `is_admin`\n, `created`\n, `updated`) SELECT `id`\n, `version`\n, `email`\n, `name`\n, `password`\n, `rands`\n, `company`\n, `login`\n, `salt`\n, `account_id`\n, `is_admin`\n, `created`\n, `updated` FROM `user_v1`"
logger=migrator t=2024-08-29T15:36:41.35088487Z level=info msg="Migration successfully executed" id="copy data_source v1 to v2" duration=2.854626ms
logger=migrator t=2024-08-29T15:36:41.36404903Z level=info msg="Executing migration" id="Drop old table user_v1"
logger=migrator t=2024-08-29T15:36:41.364794251Z level=debug msg="Executing sql migration" id="Drop old table user_v1" sql="DROP TABLE IF EXISTS `user_v1`"
logger=migrator t=2024-08-29T15:36:41.365405026Z level=info msg="Migration successfully executed" id="Drop old table user_v1" duration=1.357357ms
logger=migrator t=2024-08-29T15:36:41.378537845Z level=info msg="Executing migration" id="Add column help_flags1 to user table"
logger=migrator t=2024-08-29T15:36:41.379783003Z level=debug msg="Executing sql migration" id="Add column help_flags1 to user table" sql="alter table `user` ADD COLUMN `help_flags1` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:41.38239474Z level=info msg="Migration successfully executed" id="Add column help_flags1 to user table" duration=3.84279ms
logger=migrator t=2024-08-29T15:36:41.405020942Z level=info msg="Executing migration" id="Update user table charset"
logger=migrator t=2024-08-29T15:36:41.405646139Z level=debug msg="Executing sql migration" id="Update user table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:41.405688833Z level=info msg="Migration successfully executed" id="Update user table charset" duration=673.997µs
logger=migrator t=2024-08-29T15:36:41.430705686Z level=info msg="Executing migration" id="Add last_seen_at column to user"
logger=migrator t=2024-08-29T15:36:41.430761973Z level=debug msg="Executing sql migration" id="Add last_seen_at column to user" sql="alter table `user` ADD COLUMN `last_seen_at` DATETIME NULL "
logger=migrator t=2024-08-29T15:36:41.433321841Z level=info msg="Migration successfully executed" id="Add last_seen_at column to user" duration=2.616638ms
logger=migrator t=2024-08-29T15:36:41.486700953Z level=info msg="Executing migration" id="Add missing user data"
logger=migrator t=2024-08-29T15:36:41.486781501Z level=debug msg="Executing code migration" id="Add missing user data"
logger=migrator t=2024-08-29T15:36:41.487109127Z level=info msg="Migration successfully executed" id="Add missing user data" duration=411.607µs
logger=migrator t=2024-08-29T15:36:41.531782784Z level=info msg="Executing migration" id="Add is_disabled column to user"
logger=migrator t=2024-08-29T15:36:41.531839872Z level=debug msg="Executing sql migration" id="Add is_disabled column to user" sql="alter table `user` ADD COLUMN `is_disabled` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:41.533053467Z level=info msg="Migration successfully executed" id="Add is_disabled column to user" duration=1.272118ms
logger=migrator t=2024-08-29T15:36:41.565803304Z level=info msg="Executing migration" id="Add index user.login/user.email"
logger=migrator t=2024-08-29T15:36:41.565856568Z level=debug msg="Executing migration condition SQL" id="Add index user.login/user.email" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user IDX_user_login_email]"
logger=migrator t=2024-08-29T15:36:41.566156333Z level=debug msg="Executing sql migration" id="Add index user.login/user.email" sql="CREATE INDEX `IDX_user_login_email` ON `user` (`login`,`email`);"
logger=migrator t=2024-08-29T15:36:41.566642328Z level=info msg="Migration successfully executed" id="Add index user.login/user.email" duration=840.397µs
logger=migrator t=2024-08-29T15:36:41.607080247Z level=info msg="Executing migration" id="Add is_service_account column to user"
logger=migrator t=2024-08-29T15:36:41.607129891Z level=debug msg="Executing sql migration" id="Add is_service_account column to user" sql="alter table `user` ADD COLUMN `is_service_account` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:41.608353135Z level=info msg="Migration successfully executed" id="Add is_service_account column to user" duration=1.270169ms
logger=migrator t=2024-08-29T15:36:41.639031159Z level=info msg="Executing migration" id="Update is_service_account column to nullable"
logger=migrator t=2024-08-29T15:36:41.639091586Z level=debug msg="Executing sql migration" id="Update is_service_account column to nullable" sql="ALTER TABLE user ADD COLUMN tmp_service_account BOOLEAN DEFAULT 0;\nUPDATE user SET tmp_service_account = is_service_account;\nALTER TABLE user DROP COLUMN is_service_account;\nALTER TABLE user RENAME COLUMN tmp_service_account TO is_service_account;"
logger=migrator t=2024-08-29T15:36:41.67688673Z level=info msg="Migration successfully executed" id="Update is_service_account column to nullable" duration=37.852893ms
logger=migrator t=2024-08-29T15:36:41.69281175Z level=info msg="Executing migration" id="Add uid column to user"
logger=migrator t=2024-08-29T15:36:41.692858325Z level=debug msg="Executing sql migration" id="Add uid column to user" sql="alter table `user` ADD COLUMN `uid` TEXT NULL "
logger=migrator t=2024-08-29T15:36:41.698450696Z level=info msg="Migration successfully executed" id="Add uid column to user" duration=5.635972ms
logger=migrator t=2024-08-29T15:36:41.712161626Z level=info msg="Executing migration" id="Update uid column values for users"
logger=migrator t=2024-08-29T15:36:41.712454086Z level=debug msg="Executing sql migration" id="Update uid column values for users" sql="UPDATE user SET uid=printf('u%09d',id) WHERE uid IS NULL;"
logger=migrator t=2024-08-29T15:36:41.71328456Z level=info msg="Migration successfully executed" id="Update uid column values for users" duration=1.124951ms
logger=migrator t=2024-08-29T15:36:41.72861919Z level=info msg="Executing migration" id="Add unique index user_uid"
logger=migrator t=2024-08-29T15:36:41.728674471Z level=debug msg="Executing migration condition SQL" id="Add unique index user_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user UQE_user_uid]"
logger=migrator t=2024-08-29T15:36:41.731114496Z level=debug msg="Executing sql migration" id="Add unique index user_uid" sql="CREATE UNIQUE INDEX `UQE_user_uid` ON `user` (`uid`);"
logger=migrator t=2024-08-29T15:36:41.731748513Z level=info msg="Migration successfully executed" id="Add unique index user_uid" duration=3.127493ms
logger=migrator t=2024-08-29T15:36:41.760502081Z level=info msg="Executing migration" id="update login field with orgid to allow for multiple service accounts with same name across orgs"
logger=migrator t=2024-08-29T15:36:41.760604984Z level=debug msg="Executing code migration" id="update login field with orgid to allow for multiple service accounts with same name across orgs"
logger=migrator t=2024-08-29T15:36:41.762371521Z level=info msg="Migration successfully executed" id="update login field with orgid to allow for multiple service accounts with same name across orgs" duration=1.896314ms
logger=migrator t=2024-08-29T15:36:41.786699247Z level=info msg="Executing migration" id="update login and email fields to lowercase"
logger=migrator t=2024-08-29T15:36:41.786755675Z level=debug msg="Executing code migration" id="update login and email fields to lowercase"
logger=migrator t=2024-08-29T15:36:41.787138382Z level=info msg="Migration successfully executed" id="update login and email fields to lowercase" duration=442.42µs
logger=migrator t=2024-08-29T15:36:41.8090478Z level=info msg="Executing migration" id="update login and email fields to lowercase2"
logger=migrator t=2024-08-29T15:36:41.809096648Z level=debug msg="Executing code migration" id="update login and email fields to lowercase2"
logger=migrator t=2024-08-29T15:36:41.809427037Z level=info msg="Migration successfully executed" id="update login and email fields to lowercase2" duration=383.194µs
logger=migrator t=2024-08-29T15:36:41.84570205Z level=info msg="Executing migration" id="create temp user table v1-7"
logger=migrator t=2024-08-29T15:36:41.845764424Z level=debug msg="Executing sql migration" id="create temp user table v1-7" sql="CREATE TABLE IF NOT EXISTS `temp_user` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `version` INTEGER NOT NULL\n, `email` TEXT NOT NULL\n, `name` TEXT NULL\n, `role` TEXT NULL\n, `code` TEXT NOT NULL\n, `status` TEXT NOT NULL\n, `invited_by_user_id` INTEGER NULL\n, `email_sent` INTEGER NOT NULL\n, `email_sent_on` DATETIME NULL\n, `remote_addr` TEXT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:41.846596449Z level=info msg="Migration successfully executed" id="create temp user table v1-7" duration=895.333µs
logger=migrator t=2024-08-29T15:36:41.863421683Z level=info msg="Executing migration" id="create index IDX_temp_user_email - v1-7"
logger=migrator t=2024-08-29T15:36:41.863829828Z level=debug msg="Executing migration condition SQL" id="create index IDX_temp_user_email - v1-7" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_email]"
logger=migrator t=2024-08-29T15:36:41.864228944Z level=debug msg="Executing sql migration" id="create index IDX_temp_user_email - v1-7" sql="CREATE INDEX `IDX_temp_user_email` ON `temp_user` (`email`);"
logger=migrator t=2024-08-29T15:36:41.864755635Z level=info msg="Migration successfully executed" id="create index IDX_temp_user_email - v1-7" duration=1.337985ms
logger=migrator t=2024-08-29T15:36:41.881358609Z level=info msg="Executing migration" id="create index IDX_temp_user_org_id - v1-7"
logger=migrator t=2024-08-29T15:36:41.881410654Z level=debug msg="Executing migration condition SQL" id="create index IDX_temp_user_org_id - v1-7" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_org_id]"
logger=migrator t=2024-08-29T15:36:41.888352209Z level=debug msg="Executing sql migration" id="create index IDX_temp_user_org_id - v1-7" sql="CREATE INDEX `IDX_temp_user_org_id` ON `temp_user` (`org_id`);"
logger=migrator t=2024-08-29T15:36:41.890332869Z level=info msg="Migration successfully executed" id="create index IDX_temp_user_org_id - v1-7" duration=8.973574ms
logger=migrator t=2024-08-29T15:36:41.92608196Z level=info msg="Executing migration" id="create index IDX_temp_user_code - v1-7"
logger=migrator t=2024-08-29T15:36:41.926137366Z level=debug msg="Executing migration condition SQL" id="create index IDX_temp_user_code - v1-7" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_code]"
logger=migrator t=2024-08-29T15:36:41.928768984Z level=debug msg="Executing sql migration" id="create index IDX_temp_user_code - v1-7" sql="CREATE INDEX `IDX_temp_user_code` ON `temp_user` (`code`);"
logger=migrator t=2024-08-29T15:36:41.929316206Z level=info msg="Migration successfully executed" id="create index IDX_temp_user_code - v1-7" duration=3.235966ms
logger=migrator t=2024-08-29T15:36:41.953769057Z level=info msg="Executing migration" id="create index IDX_temp_user_status - v1-7"
logger=migrator t=2024-08-29T15:36:41.954180582Z level=debug msg="Executing migration condition SQL" id="create index IDX_temp_user_status - v1-7" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_status]"
logger=migrator t=2024-08-29T15:36:41.956160376Z level=debug msg="Executing sql migration" id="create index IDX_temp_user_status - v1-7" sql="CREATE INDEX `IDX_temp_user_status` ON `temp_user` (`status`);"
logger=migrator t=2024-08-29T15:36:41.958702985Z level=info msg="Migration successfully executed" id="create index IDX_temp_user_status - v1-7" duration=4.933499ms
logger=migrator t=2024-08-29T15:36:41.981159676Z level=info msg="Executing migration" id="Update temp_user table charset"
logger=migrator t=2024-08-29T15:36:41.983940637Z level=debug msg="Executing sql migration" id="Update temp_user table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:41.983995099Z level=info msg="Migration successfully executed" id="Update temp_user table charset" duration=2.838283ms
logger=migrator t=2024-08-29T15:36:42.00691737Z level=info msg="Executing migration" id="drop index IDX_temp_user_email - v1"
logger=migrator t=2024-08-29T15:36:42.006981294Z level=debug msg="Executing migration condition SQL" id="drop index IDX_temp_user_email - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_email]"
logger=migrator t=2024-08-29T15:36:42.007294254Z level=debug msg="Executing sql migration" id="drop index IDX_temp_user_email - v1" sql="DROP INDEX `IDX_temp_user_email`"
logger=migrator t=2024-08-29T15:36:42.01258598Z level=info msg="Migration successfully executed" id="drop index IDX_temp_user_email - v1" duration=5.666638ms
logger=migrator t=2024-08-29T15:36:42.054929344Z level=info msg="Executing migration" id="drop index IDX_temp_user_org_id - v1"
logger=migrator t=2024-08-29T15:36:42.054985025Z level=debug msg="Executing migration condition SQL" id="drop index IDX_temp_user_org_id - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_org_id]"
logger=migrator t=2024-08-29T15:36:42.057139316Z level=debug msg="Executing sql migration" id="drop index IDX_temp_user_org_id - v1" sql="DROP INDEX `IDX_temp_user_org_id`"
logger=migrator t=2024-08-29T15:36:42.057639776Z level=info msg="Migration successfully executed" id="drop index IDX_temp_user_org_id - v1" duration=2.71354ms
logger=migrator t=2024-08-29T15:36:42.082306816Z level=info msg="Executing migration" id="drop index IDX_temp_user_code - v1"
logger=migrator t=2024-08-29T15:36:42.082361103Z level=debug msg="Executing migration condition SQL" id="drop index IDX_temp_user_code - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_code]"
logger=migrator t=2024-08-29T15:36:42.08278887Z level=debug msg="Executing sql migration" id="drop index IDX_temp_user_code - v1" sql="DROP INDEX `IDX_temp_user_code`"
logger=migrator t=2024-08-29T15:36:42.083249905Z level=info msg="Migration successfully executed" id="drop index IDX_temp_user_code - v1" duration=945.528µs
logger=migrator t=2024-08-29T15:36:42.110667745Z level=info msg="Executing migration" id="drop index IDX_temp_user_status - v1"
logger=migrator t=2024-08-29T15:36:42.110720636Z level=debug msg="Executing migration condition SQL" id="drop index IDX_temp_user_status - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_status]"
logger=migrator t=2024-08-29T15:36:42.110989346Z level=debug msg="Executing sql migration" id="drop index IDX_temp_user_status - v1" sql="DROP INDEX `IDX_temp_user_status`"
logger=migrator t=2024-08-29T15:36:42.111424476Z level=info msg="Migration successfully executed" id="drop index IDX_temp_user_status - v1" duration=759.063µs
logger=migrator t=2024-08-29T15:36:42.130033586Z level=info msg="Executing migration" id="Rename table temp_user to temp_user_tmp_qwerty - v1"
logger=migrator t=2024-08-29T15:36:42.130080963Z level=debug msg="Executing sql migration" id="Rename table temp_user to temp_user_tmp_qwerty - v1" sql="ALTER TABLE `temp_user` RENAME TO `temp_user_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:42.178943293Z level=info msg="Migration successfully executed" id="Rename table temp_user to temp_user_tmp_qwerty - v1" duration=48.905131ms
logger=migrator t=2024-08-29T15:36:42.211505632Z level=info msg="Executing migration" id="create temp_user v2"
logger=migrator t=2024-08-29T15:36:42.211591616Z level=debug msg="Executing sql migration" id="create temp_user v2" sql="CREATE TABLE IF NOT EXISTS `temp_user` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `version` INTEGER NOT NULL\n, `email` TEXT NOT NULL\n, `name` TEXT NULL\n, `role` TEXT NULL\n, `code` TEXT NOT NULL\n, `status` TEXT NOT NULL\n, `invited_by_user_id` INTEGER NULL\n, `email_sent` INTEGER NOT NULL\n, `email_sent_on` DATETIME NULL\n, `remote_addr` TEXT NULL\n, `created` INTEGER NOT NULL DEFAULT 0\n, `updated` INTEGER NOT NULL DEFAULT 0\n);"
logger=migrator t=2024-08-29T15:36:42.229976194Z level=info msg="Migration successfully executed" id="create temp_user v2" duration=18.469021ms
logger=migrator t=2024-08-29T15:36:42.262819433Z level=info msg="Executing migration" id="create index IDX_temp_user_email - v2"
logger=migrator t=2024-08-29T15:36:42.262869663Z level=debug msg="Executing migration condition SQL" id="create index IDX_temp_user_email - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_email]"
logger=migrator t=2024-08-29T15:36:42.26367918Z level=debug msg="Executing sql migration" id="create index IDX_temp_user_email - v2" sql="CREATE INDEX `IDX_temp_user_email` ON `temp_user` (`email`);"
logger=migrator t=2024-08-29T15:36:42.266020451Z level=info msg="Migration successfully executed" id="create index IDX_temp_user_email - v2" duration=3.20089ms
logger=migrator t=2024-08-29T15:36:42.311046164Z level=info msg="Executing migration" id="create index IDX_temp_user_org_id - v2"
logger=migrator t=2024-08-29T15:36:42.311536451Z level=debug msg="Executing migration condition SQL" id="create index IDX_temp_user_org_id - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_org_id]"
logger=migrator t=2024-08-29T15:36:42.313058661Z level=debug msg="Executing sql migration" id="create index IDX_temp_user_org_id - v2" sql="CREATE INDEX `IDX_temp_user_org_id` ON `temp_user` (`org_id`);"
logger=migrator t=2024-08-29T15:36:42.314413327Z level=info msg="Migration successfully executed" id="create index IDX_temp_user_org_id - v2" duration=3.368591ms
logger=migrator t=2024-08-29T15:36:42.341023627Z level=info msg="Executing migration" id="create index IDX_temp_user_code - v2"
logger=migrator t=2024-08-29T15:36:42.344439131Z level=debug msg="Executing migration condition SQL" id="create index IDX_temp_user_code - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_code]"
logger=migrator t=2024-08-29T15:36:42.354688714Z level=debug msg="Executing sql migration" id="create index IDX_temp_user_code - v2" sql="CREATE INDEX `IDX_temp_user_code` ON `temp_user` (`code`);"
logger=migrator t=2024-08-29T15:36:42.361478891Z level=info msg="Migration successfully executed" id="create index IDX_temp_user_code - v2" duration=20.452227ms
logger=migrator t=2024-08-29T15:36:42.402338276Z level=info msg="Executing migration" id="create index IDX_temp_user_status - v2"
logger=migrator t=2024-08-29T15:36:42.402396383Z level=debug msg="Executing migration condition SQL" id="create index IDX_temp_user_status - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[temp_user IDX_temp_user_status]"
logger=migrator t=2024-08-29T15:36:42.402722349Z level=debug msg="Executing sql migration" id="create index IDX_temp_user_status - v2" sql="CREATE INDEX `IDX_temp_user_status` ON `temp_user` (`status`);"
logger=migrator t=2024-08-29T15:36:42.403199803Z level=info msg="Migration successfully executed" id="create index IDX_temp_user_status - v2" duration=865.722µs
logger=migrator t=2024-08-29T15:36:42.427031756Z level=info msg="Executing migration" id="copy temp_user v1 to v2"
logger=migrator t=2024-08-29T15:36:42.427084189Z level=debug msg="Executing sql migration" id="copy temp_user v1 to v2" sql="INSERT INTO `temp_user` (`id`\n, `org_id`\n, `version`\n, `email`\n, `role`\n, `code`\n, `status`\n, `invited_by_user_id`\n, `remote_addr`\n, `name`\n, `email_sent`\n, `email_sent_on`) SELECT `id`\n, `org_id`\n, `version`\n, `email`\n, `role`\n, `code`\n, `status`\n, `invited_by_user_id`\n, `remote_addr`\n, `name`\n, `email_sent`\n, `email_sent_on` FROM `temp_user_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:42.427570224Z level=info msg="Migration successfully executed" id="copy temp_user v1 to v2" duration=540.079µs
logger=migrator t=2024-08-29T15:36:42.455119462Z level=info msg="Executing migration" id="drop temp_user_tmp_qwerty"
logger=migrator t=2024-08-29T15:36:42.455175817Z level=debug msg="Executing sql migration" id="drop temp_user_tmp_qwerty" sql="DROP TABLE IF EXISTS `temp_user_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:42.476153836Z level=info msg="Migration successfully executed" id="drop temp_user_tmp_qwerty" duration=21.031368ms
logger=migrator t=2024-08-29T15:36:42.506141954Z level=info msg="Executing migration" id="Set created for temp users that will otherwise prematurely expire"
logger=migrator t=2024-08-29T15:36:42.506523722Z level=debug msg="Executing code migration" id="Set created for temp users that will otherwise prematurely expire"
logger=migrator t=2024-08-29T15:36:42.507037399Z level=info msg="Migration successfully executed" id="Set created for temp users that will otherwise prematurely expire" duration=896.758µs
logger=migrator t=2024-08-29T15:36:42.52714542Z level=info msg="Executing migration" id="create star table"
logger=migrator t=2024-08-29T15:36:42.527217665Z level=debug msg="Executing sql migration" id="create star table" sql="CREATE TABLE IF NOT EXISTS `star` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `user_id` INTEGER NOT NULL\n, `dashboard_id` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:42.52787276Z level=info msg="Migration successfully executed" id="create star table" duration=728.747µs
logger=migrator t=2024-08-29T15:36:42.584007234Z level=info msg="Executing migration" id="add unique index star.user_id_dashboard_id"
logger=migrator t=2024-08-29T15:36:42.584335796Z level=debug msg="Executing migration condition SQL" id="add unique index star.user_id_dashboard_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[star UQE_star_user_id_dashboard_id]"
logger=migrator t=2024-08-29T15:36:42.59055042Z level=debug msg="Executing sql migration" id="add unique index star.user_id_dashboard_id" sql="CREATE UNIQUE INDEX `UQE_star_user_id_dashboard_id` ON `star` (`user_id`,`dashboard_id`);"
logger=migrator t=2024-08-29T15:36:42.599536523Z level=info msg="Migration successfully executed" id="add unique index star.user_id_dashboard_id" duration=15.531228ms
logger=migrator t=2024-08-29T15:36:42.620239133Z level=info msg="Executing migration" id="create org table v1"
logger=migrator t=2024-08-29T15:36:42.654064655Z level=debug msg="Executing sql migration" id="create org table v1" sql="CREATE TABLE IF NOT EXISTS `org` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `version` INTEGER NOT NULL\n, `name` TEXT NOT NULL\n, `address1` TEXT NULL\n, `address2` TEXT NULL\n, `city` TEXT NULL\n, `state` TEXT NULL\n, `zip_code` TEXT NULL\n, `country` TEXT NULL\n, `billing_email` TEXT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:42.686968571Z level=info msg="Migration successfully executed" id="create org table v1" duration=66.727033ms
logger=migrator t=2024-08-29T15:36:42.725860741Z level=info msg="Executing migration" id="create index UQE_org_name - v1"
logger=migrator t=2024-08-29T15:36:42.726731743Z level=debug msg="Executing migration condition SQL" id="create index UQE_org_name - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[org UQE_org_name]"
logger=migrator t=2024-08-29T15:36:42.729654862Z level=debug msg="Executing sql migration" id="create index UQE_org_name - v1" sql="CREATE UNIQUE INDEX `UQE_org_name` ON `org` (`name`);"
logger=migrator t=2024-08-29T15:36:42.730165609Z level=info msg="Migration successfully executed" id="create index UQE_org_name - v1" duration=4.306933ms
logger=migrator t=2024-08-29T15:36:42.762350489Z level=info msg="Executing migration" id="create org_user table v1"
logger=migrator t=2024-08-29T15:36:42.762524457Z level=debug msg="Executing sql migration" id="create org_user table v1" sql="CREATE TABLE IF NOT EXISTS `org_user` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `user_id` INTEGER NOT NULL\n, `role` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:42.771546516Z level=info msg="Migration successfully executed" id="create org_user table v1" duration=9.197379ms
logger=migrator t=2024-08-29T15:36:42.824796387Z level=info msg="Executing migration" id="create index IDX_org_user_org_id - v1"
logger=migrator t=2024-08-29T15:36:42.82484698Z level=debug msg="Executing migration condition SQL" id="create index IDX_org_user_org_id - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[org_user IDX_org_user_org_id]"
logger=migrator t=2024-08-29T15:36:42.82532769Z level=debug msg="Executing sql migration" id="create index IDX_org_user_org_id - v1" sql="CREATE INDEX `IDX_org_user_org_id` ON `org_user` (`org_id`);"
logger=migrator t=2024-08-29T15:36:42.825835187Z level=info msg="Migration successfully executed" id="create index IDX_org_user_org_id - v1" duration=1.040462ms
logger=migrator t=2024-08-29T15:36:42.869974446Z level=info msg="Executing migration" id="create index UQE_org_user_org_id_user_id - v1"
logger=migrator t=2024-08-29T15:36:42.870342585Z level=debug msg="Executing migration condition SQL" id="create index UQE_org_user_org_id_user_id - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[org_user UQE_org_user_org_id_user_id]"
logger=migrator t=2024-08-29T15:36:42.87064327Z level=debug msg="Executing sql migration" id="create index UQE_org_user_org_id_user_id - v1" sql="CREATE UNIQUE INDEX `UQE_org_user_org_id_user_id` ON `org_user` (`org_id`,`user_id`);"
logger=migrator t=2024-08-29T15:36:42.88205886Z level=info msg="Migration successfully executed" id="create index UQE_org_user_org_id_user_id - v1" duration=12.081402ms
logger=migrator t=2024-08-29T15:36:42.934373926Z level=info msg="Executing migration" id="create index IDX_org_user_user_id - v1"
logger=migrator t=2024-08-29T15:36:42.934500753Z level=debug msg="Executing migration condition SQL" id="create index IDX_org_user_user_id - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[org_user IDX_org_user_user_id]"
logger=migrator t=2024-08-29T15:36:42.944835478Z level=debug msg="Executing sql migration" id="create index IDX_org_user_user_id - v1" sql="CREATE INDEX `IDX_org_user_user_id` ON `org_user` (`user_id`);"
logger=migrator t=2024-08-29T15:36:42.958540619Z level=info msg="Migration successfully executed" id="create index IDX_org_user_user_id - v1" duration=24.163427ms
logger=migrator t=2024-08-29T15:36:42.979726345Z level=info msg="Executing migration" id="Update org table charset"
logger=migrator t=2024-08-29T15:36:42.980242239Z level=debug msg="Executing sql migration" id="Update org table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:42.980282004Z level=info msg="Migration successfully executed" id="Update org table charset" duration=559.235µs
logger=migrator t=2024-08-29T15:36:43.024440288Z level=info msg="Executing migration" id="Update org_user table charset"
logger=migrator t=2024-08-29T15:36:43.024561232Z level=debug msg="Executing sql migration" id="Update org_user table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:43.024590361Z level=info msg="Migration successfully executed" id="Update org_user table charset" duration=168.285µs
logger=migrator t=2024-08-29T15:36:43.069303096Z level=info msg="Executing migration" id="Migrate all Read Only Viewers to Viewers"
logger=migrator t=2024-08-29T15:36:43.069349396Z level=debug msg="Executing sql migration" id="Migrate all Read Only Viewers to Viewers" sql="UPDATE org_user SET role = 'Viewer' WHERE role = 'Read Only Editor'"
logger=migrator t=2024-08-29T15:36:43.07039837Z level=info msg="Migration successfully executed" id="Migrate all Read Only Viewers to Viewers" duration=1.098101ms
logger=migrator t=2024-08-29T15:36:43.116462968Z level=info msg="Executing migration" id="create dashboard table"
logger=migrator t=2024-08-29T15:36:43.117757225Z level=debug msg="Executing sql migration" id="create dashboard table" sql="CREATE TABLE IF NOT EXISTS `dashboard` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `version` INTEGER NOT NULL\n, `slug` TEXT NOT NULL\n, `title` TEXT NOT NULL\n, `data` TEXT NOT NULL\n, `account_id` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:43.129972556Z level=info msg="Migration successfully executed" id="create dashboard table" duration=13.510683ms
logger=migrator t=2024-08-29T15:36:43.170660256Z level=info msg="Executing migration" id="add index dashboard.account_id"
logger=migrator t=2024-08-29T15:36:43.170710918Z level=debug msg="Executing migration condition SQL" id="add index dashboard.account_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard IDX_dashboard_account_id]"
logger=migrator t=2024-08-29T15:36:43.170988874Z level=debug msg="Executing sql migration" id="add index dashboard.account_id" sql="CREATE INDEX `IDX_dashboard_account_id` ON `dashboard` (`account_id`);"
logger=migrator t=2024-08-29T15:36:43.171531157Z level=info msg="Migration successfully executed" id="add index dashboard.account_id" duration=872.865µs
logger=migrator t=2024-08-29T15:36:43.1942314Z level=info msg="Executing migration" id="add unique index dashboard_account_id_slug"
logger=migrator t=2024-08-29T15:36:43.194490276Z level=debug msg="Executing migration condition SQL" id="add unique index dashboard_account_id_slug" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard UQE_dashboard_account_id_slug]"
logger=migrator t=2024-08-29T15:36:43.197139623Z level=debug msg="Executing sql migration" id="add unique index dashboard_account_id_slug" sql="CREATE UNIQUE INDEX `UQE_dashboard_account_id_slug` ON `dashboard` (`account_id`,`slug`);"
logger=migrator t=2024-08-29T15:36:43.200547485Z level=info msg="Migration successfully executed" id="add unique index dashboard_account_id_slug" duration=6.303711ms
logger=migrator t=2024-08-29T15:36:43.235250721Z level=info msg="Executing migration" id="create dashboard_tag table"
logger=migrator t=2024-08-29T15:36:43.235308445Z level=debug msg="Executing sql migration" id="create dashboard_tag table" sql="CREATE TABLE IF NOT EXISTS `dashboard_tag` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `dashboard_id` INTEGER NOT NULL\n, `term` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:43.236007536Z level=info msg="Migration successfully executed" id="create dashboard_tag table" duration=758.239µs
logger=migrator t=2024-08-29T15:36:43.264623631Z level=info msg="Executing migration" id="add unique index dashboard_tag.dasboard_id_term"
logger=migrator t=2024-08-29T15:36:43.264976564Z level=debug msg="Executing migration condition SQL" id="add unique index dashboard_tag.dasboard_id_term" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_tag UQE_dashboard_tag_dashboard_id_term]"
logger=migrator t=2024-08-29T15:36:43.267609829Z level=debug msg="Executing sql migration" id="add unique index dashboard_tag.dasboard_id_term" sql="CREATE UNIQUE INDEX `UQE_dashboard_tag_dashboard_id_term` ON `dashboard_tag` (`dashboard_id`,`term`);"
logger=migrator t=2024-08-29T15:36:43.277191881Z level=info msg="Migration successfully executed" id="add unique index dashboard_tag.dasboard_id_term" duration=12.580813ms
logger=migrator t=2024-08-29T15:36:43.306867369Z level=info msg="Executing migration" id="drop index UQE_dashboard_tag_dashboard_id_term - v1"
logger=migrator t=2024-08-29T15:36:43.311038536Z level=debug msg="Executing migration condition SQL" id="drop index UQE_dashboard_tag_dashboard_id_term - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_tag UQE_dashboard_tag_dashboard_id_term]"
logger=migrator t=2024-08-29T15:36:43.311881532Z level=debug msg="Executing sql migration" id="drop index UQE_dashboard_tag_dashboard_id_term - v1" sql="DROP INDEX `UQE_dashboard_tag_dashboard_id_term`"
logger=migrator t=2024-08-29T15:36:43.312417872Z level=info msg="Migration successfully executed" id="drop index UQE_dashboard_tag_dashboard_id_term - v1" duration=5.552587ms
logger=migrator t=2024-08-29T15:36:43.326266645Z level=info msg="Executing migration" id="Rename table dashboard to dashboard_v1 - v1"
logger=migrator t=2024-08-29T15:36:43.327068115Z level=debug msg="Executing sql migration" id="Rename table dashboard to dashboard_v1 - v1" sql="ALTER TABLE `dashboard` RENAME TO `dashboard_v1`"
logger=migrator t=2024-08-29T15:36:43.341279131Z level=info msg="Migration successfully executed" id="Rename table dashboard to dashboard_v1 - v1" duration=15.009964ms
logger=migrator t=2024-08-29T15:36:43.364936292Z level=info msg="Executing migration" id="create dashboard v2"
logger=migrator t=2024-08-29T15:36:43.365336506Z level=debug msg="Executing sql migration" id="create dashboard v2" sql="CREATE TABLE IF NOT EXISTS `dashboard` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `version` INTEGER NOT NULL\n, `slug` TEXT NOT NULL\n, `title` TEXT NOT NULL\n, `data` TEXT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:43.368145157Z level=info msg="Migration successfully executed" id="create dashboard v2" duration=3.207044ms
logger=migrator t=2024-08-29T15:36:43.393997042Z level=info msg="Executing migration" id="create index IDX_dashboard_org_id - v2"
logger=migrator t=2024-08-29T15:36:43.394047968Z level=debug msg="Executing migration condition SQL" id="create index IDX_dashboard_org_id - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard IDX_dashboard_org_id]"
logger=migrator t=2024-08-29T15:36:43.394345787Z level=debug msg="Executing sql migration" id="create index IDX_dashboard_org_id - v2" sql="CREATE INDEX `IDX_dashboard_org_id` ON `dashboard` (`org_id`);"
logger=migrator t=2024-08-29T15:36:43.394855794Z level=info msg="Migration successfully executed" id="create index IDX_dashboard_org_id - v2" duration=859.781µs
logger=migrator t=2024-08-29T15:36:43.415311633Z level=info msg="Executing migration" id="create index UQE_dashboard_org_id_slug - v2"
logger=migrator t=2024-08-29T15:36:43.417240184Z level=debug msg="Executing migration condition SQL" id="create index UQE_dashboard_org_id_slug - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard UQE_dashboard_org_id_slug]"
logger=migrator t=2024-08-29T15:36:43.420945938Z level=debug msg="Executing sql migration" id="create index UQE_dashboard_org_id_slug - v2" sql="CREATE UNIQUE INDEX `UQE_dashboard_org_id_slug` ON `dashboard` (`org_id`,`slug`);"
logger=migrator t=2024-08-29T15:36:43.426395709Z level=info msg="Migration successfully executed" id="create index UQE_dashboard_org_id_slug - v2" duration=11.08152ms
logger=migrator t=2024-08-29T15:36:43.489432014Z level=info msg="Executing migration" id="copy dashboard v1 to v2"
logger=migrator t=2024-08-29T15:36:43.489587867Z level=debug msg="Executing sql migration" id="copy dashboard v1 to v2" sql="INSERT INTO `dashboard` (`title`\n, `data`\n, `org_id`\n, `created`\n, `updated`\n, `id`\n, `version`\n, `slug`) SELECT `title`\n, `data`\n, `account_id`\n, `created`\n, `updated`\n, `id`\n, `version`\n, `slug` FROM `dashboard_v1`"
logger=migrator t=2024-08-29T15:36:43.491304151Z level=info msg="Migration successfully executed" id="copy dashboard v1 to v2" duration=1.873377ms
logger=migrator t=2024-08-29T15:36:43.510963528Z level=info msg="Executing migration" id="drop table dashboard_v1"
logger=migrator t=2024-08-29T15:36:43.513259642Z level=debug msg="Executing sql migration" id="drop table dashboard_v1" sql="DROP TABLE IF EXISTS `dashboard_v1`"
logger=migrator t=2024-08-29T15:36:43.52033462Z level=info msg="Migration successfully executed" id="drop table dashboard_v1" duration=9.369766ms
logger=migrator t=2024-08-29T15:36:43.549689074Z level=info msg="Executing migration" id="alter dashboard.data to mediumtext v1"
logger=migrator t=2024-08-29T15:36:43.549734267Z level=debug msg="Executing sql migration" id="alter dashboard.data to mediumtext v1" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:43.549822823Z level=info msg="Migration successfully executed" id="alter dashboard.data to mediumtext v1" duration=137.839µs
logger=migrator t=2024-08-29T15:36:43.564303242Z level=info msg="Executing migration" id="Add column updated_by in dashboard - v2"
logger=migrator t=2024-08-29T15:36:43.564355472Z level=debug msg="Executing sql migration" id="Add column updated_by in dashboard - v2" sql="alter table `dashboard` ADD COLUMN `updated_by` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:43.570656066Z level=info msg="Migration successfully executed" id="Add column updated_by in dashboard - v2" duration=6.350906ms
logger=migrator t=2024-08-29T15:36:43.60649666Z level=info msg="Executing migration" id="Add column created_by in dashboard - v2"
logger=migrator t=2024-08-29T15:36:43.606541512Z level=debug msg="Executing sql migration" id="Add column created_by in dashboard - v2" sql="alter table `dashboard` ADD COLUMN `created_by` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:43.623766683Z level=info msg="Migration successfully executed" id="Add column created_by in dashboard - v2" duration=17.266732ms
logger=migrator t=2024-08-29T15:36:43.654648369Z level=info msg="Executing migration" id="Add column gnetId in dashboard"
logger=migrator t=2024-08-29T15:36:43.654930162Z level=debug msg="Executing sql migration" id="Add column gnetId in dashboard" sql="alter table `dashboard` ADD COLUMN `gnet_id` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:43.67152134Z level=info msg="Migration successfully executed" id="Add column gnetId in dashboard" duration=16.869852ms
logger=migrator t=2024-08-29T15:36:43.698696017Z level=info msg="Executing migration" id="Add index for gnetId in dashboard"
logger=migrator t=2024-08-29T15:36:43.698741303Z level=debug msg="Executing migration condition SQL" id="Add index for gnetId in dashboard" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard IDX_dashboard_gnet_id]"
logger=migrator t=2024-08-29T15:36:43.706475526Z level=debug msg="Executing sql migration" id="Add index for gnetId in dashboard" sql="CREATE INDEX `IDX_dashboard_gnet_id` ON `dashboard` (`gnet_id`);"
logger=migrator t=2024-08-29T15:36:43.718446063Z level=info msg="Migration successfully executed" id="Add index for gnetId in dashboard" duration=19.746628ms
logger=migrator t=2024-08-29T15:36:43.745625465Z level=info msg="Executing migration" id="Add column plugin_id in dashboard"
logger=migrator t=2024-08-29T15:36:43.748444509Z level=debug msg="Executing sql migration" id="Add column plugin_id in dashboard" sql="alter table `dashboard` ADD COLUMN `plugin_id` TEXT NULL "
logger=migrator t=2024-08-29T15:36:43.750372725Z level=info msg="Migration successfully executed" id="Add column plugin_id in dashboard" duration=4.748314ms
logger=migrator t=2024-08-29T15:36:43.780313466Z level=info msg="Executing migration" id="Add index for plugin_id in dashboard"
logger=migrator t=2024-08-29T15:36:43.780440868Z level=debug msg="Executing migration condition SQL" id="Add index for plugin_id in dashboard" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard IDX_dashboard_org_id_plugin_id]"
logger=migrator t=2024-08-29T15:36:43.780932683Z level=debug msg="Executing sql migration" id="Add index for plugin_id in dashboard" sql="CREATE INDEX `IDX_dashboard_org_id_plugin_id` ON `dashboard` (`org_id`,`plugin_id`);"
logger=migrator t=2024-08-29T15:36:43.78491422Z level=info msg="Migration successfully executed" id="Add index for plugin_id in dashboard" duration=4.598627ms
logger=migrator t=2024-08-29T15:36:43.808228386Z level=info msg="Executing migration" id="Add index for dashboard_id in dashboard_tag"
logger=migrator t=2024-08-29T15:36:43.808340138Z level=debug msg="Executing migration condition SQL" id="Add index for dashboard_id in dashboard_tag" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_tag IDX_dashboard_tag_dashboard_id]"
logger=migrator t=2024-08-29T15:36:43.809332225Z level=debug msg="Executing sql migration" id="Add index for dashboard_id in dashboard_tag" sql="CREATE INDEX `IDX_dashboard_tag_dashboard_id` ON `dashboard_tag` (`dashboard_id`);"
logger=migrator t=2024-08-29T15:36:43.812428869Z level=info msg="Migration successfully executed" id="Add index for dashboard_id in dashboard_tag" duration=4.201536ms
logger=migrator t=2024-08-29T15:36:43.830552802Z level=info msg="Executing migration" id="Update dashboard table charset"
logger=migrator t=2024-08-29T15:36:43.83068373Z level=debug msg="Executing sql migration" id="Update dashboard table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:43.83088095Z level=info msg="Migration successfully executed" id="Update dashboard table charset" duration=330.859µs
logger=migrator t=2024-08-29T15:36:43.85108593Z level=info msg="Executing migration" id="Update dashboard_tag table charset"
logger=migrator t=2024-08-29T15:36:43.851366184Z level=debug msg="Executing sql migration" id="Update dashboard_tag table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:43.851395258Z level=info msg="Migration successfully executed" id="Update dashboard_tag table charset" duration=312.836µs
logger=migrator t=2024-08-29T15:36:43.879804269Z level=info msg="Executing migration" id="Add column folder_id in dashboard"
logger=migrator t=2024-08-29T15:36:43.87994952Z level=debug msg="Executing sql migration" id="Add column folder_id in dashboard" sql="alter table `dashboard` ADD COLUMN `folder_id` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:43.883683774Z level=info msg="Migration successfully executed" id="Add column folder_id in dashboard" duration=3.878008ms
logger=migrator t=2024-08-29T15:36:43.962711411Z level=info msg="Executing migration" id="Add column isFolder in dashboard"
logger=migrator t=2024-08-29T15:36:43.968576224Z level=debug msg="Executing sql migration" id="Add column isFolder in dashboard" sql="alter table `dashboard` ADD COLUMN `is_folder` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:43.98345748Z level=info msg="Migration successfully executed" id="Add column isFolder in dashboard" duration=20.743386ms
logger=migrator t=2024-08-29T15:36:44.018139174Z level=info msg="Executing migration" id="Add column has_acl in dashboard"
logger=migrator t=2024-08-29T15:36:44.018189866Z level=debug msg="Executing sql migration" id="Add column has_acl in dashboard" sql="alter table `dashboard` ADD COLUMN `has_acl` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:44.054765766Z level=info msg="Migration successfully executed" id="Add column has_acl in dashboard" duration=36.624227ms
logger=migrator t=2024-08-29T15:36:44.089627641Z level=info msg="Executing migration" id="Add column uid in dashboard"
logger=migrator t=2024-08-29T15:36:44.089774761Z level=debug msg="Executing sql migration" id="Add column uid in dashboard" sql="alter table `dashboard` ADD COLUMN `uid` TEXT NULL "
logger=migrator t=2024-08-29T15:36:44.091909931Z level=info msg="Migration successfully executed" id="Add column uid in dashboard" duration=2.283675ms
logger=migrator t=2024-08-29T15:36:44.117236575Z level=info msg="Executing migration" id="Update uid column values in dashboard"
logger=migrator t=2024-08-29T15:36:44.117281782Z level=debug msg="Executing sql migration" id="Update uid column values in dashboard" sql="UPDATE dashboard SET uid=printf('%09d',id) WHERE uid IS NULL;"
logger=migrator t=2024-08-29T15:36:44.117987821Z level=info msg="Migration successfully executed" id="Update uid column values in dashboard" duration=752.648µs
logger=migrator t=2024-08-29T15:36:44.135442425Z level=info msg="Executing migration" id="Add unique index dashboard_org_id_uid"
logger=migrator t=2024-08-29T15:36:44.135801836Z level=debug msg="Executing migration condition SQL" id="Add unique index dashboard_org_id_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard UQE_dashboard_org_id_uid]"
logger=migrator t=2024-08-29T15:36:44.136415968Z level=debug msg="Executing sql migration" id="Add unique index dashboard_org_id_uid" sql="CREATE UNIQUE INDEX `UQE_dashboard_org_id_uid` ON `dashboard` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:44.136971664Z level=info msg="Migration successfully executed" id="Add unique index dashboard_org_id_uid" duration=1.524188ms
logger=migrator t=2024-08-29T15:36:44.148628015Z level=info msg="Executing migration" id="Remove unique index org_id_slug"
logger=migrator t=2024-08-29T15:36:44.148679158Z level=debug msg="Executing migration condition SQL" id="Remove unique index org_id_slug" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard UQE_dashboard_org_id_slug]"
logger=migrator t=2024-08-29T15:36:44.150855144Z level=debug msg="Executing sql migration" id="Remove unique index org_id_slug" sql="DROP INDEX `UQE_dashboard_org_id_slug`"
logger=migrator t=2024-08-29T15:36:44.152646317Z level=info msg="Migration successfully executed" id="Remove unique index org_id_slug" duration=4.019189ms
logger=migrator t=2024-08-29T15:36:44.166510443Z level=info msg="Executing migration" id="Update dashboard title length"
logger=migrator t=2024-08-29T15:36:44.166555673Z level=debug msg="Executing sql migration" id="Update dashboard title length" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:44.16658581Z level=info msg="Migration successfully executed" id="Update dashboard title length" duration=77.13µs
logger=migrator t=2024-08-29T15:36:44.195363338Z level=info msg="Executing migration" id="Add unique index for dashboard_org_id_title_folder_id"
logger=migrator t=2024-08-29T15:36:44.195740566Z level=debug msg="Executing migration condition SQL" id="Add unique index for dashboard_org_id_title_folder_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard UQE_dashboard_org_id_folder_id_title]"
logger=migrator t=2024-08-29T15:36:44.196067767Z level=debug msg="Executing sql migration" id="Add unique index for dashboard_org_id_title_folder_id" sql="CREATE UNIQUE INDEX `UQE_dashboard_org_id_folder_id_title` ON `dashboard` (`org_id`,`folder_id`,`title`);"
logger=migrator t=2024-08-29T15:36:44.196603143Z level=info msg="Migration successfully executed" id="Add unique index for dashboard_org_id_title_folder_id" duration=1.241761ms
logger=migrator t=2024-08-29T15:36:44.213534203Z level=info msg="Executing migration" id="create dashboard_provisioning"
logger=migrator t=2024-08-29T15:36:44.216584838Z level=debug msg="Executing sql migration" id="create dashboard_provisioning" sql="CREATE TABLE IF NOT EXISTS `dashboard_provisioning` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `dashboard_id` INTEGER NULL\n, `name` TEXT NOT NULL\n, `external_id` TEXT NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:44.218335268Z level=info msg="Migration successfully executed" id="create dashboard_provisioning" duration=4.800742ms
logger=migrator t=2024-08-29T15:36:44.246716685Z level=info msg="Executing migration" id="Rename table dashboard_provisioning to dashboard_provisioning_tmp_qwerty - v1"
logger=migrator t=2024-08-29T15:36:44.247906925Z level=debug msg="Executing sql migration" id="Rename table dashboard_provisioning to dashboard_provisioning_tmp_qwerty - v1" sql="ALTER TABLE `dashboard_provisioning` RENAME TO `dashboard_provisioning_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:44.274051585Z level=info msg="Migration successfully executed" id="Rename table dashboard_provisioning to dashboard_provisioning_tmp_qwerty - v1" duration=27.333977ms
logger=migrator t=2024-08-29T15:36:44.322708779Z level=info msg="Executing migration" id="create dashboard_provisioning v2"
logger=migrator t=2024-08-29T15:36:44.329042186Z level=debug msg="Executing sql migration" id="create dashboard_provisioning v2" sql="CREATE TABLE IF NOT EXISTS `dashboard_provisioning` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `dashboard_id` INTEGER NULL\n, `name` TEXT NOT NULL\n, `external_id` TEXT NOT NULL\n, `updated` INTEGER NOT NULL DEFAULT 0\n);"
logger=migrator t=2024-08-29T15:36:44.330801887Z level=info msg="Migration successfully executed" id="create dashboard_provisioning v2" duration=8.085859ms
logger=migrator t=2024-08-29T15:36:44.3469959Z level=info msg="Executing migration" id="create index IDX_dashboard_provisioning_dashboard_id - v2"
logger=migrator t=2024-08-29T15:36:44.347115896Z level=debug msg="Executing migration condition SQL" id="create index IDX_dashboard_provisioning_dashboard_id - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_provisioning IDX_dashboard_provisioning_dashboard_id]"
logger=migrator t=2024-08-29T15:36:44.347734601Z level=debug msg="Executing sql migration" id="create index IDX_dashboard_provisioning_dashboard_id - v2" sql="CREATE INDEX `IDX_dashboard_provisioning_dashboard_id` ON `dashboard_provisioning` (`dashboard_id`);"
logger=migrator t=2024-08-29T15:36:44.348289462Z level=info msg="Migration successfully executed" id="create index IDX_dashboard_provisioning_dashboard_id - v2" duration=1.301127ms
logger=migrator t=2024-08-29T15:36:44.397836896Z level=info msg="Executing migration" id="create index IDX_dashboard_provisioning_dashboard_id_name - v2"
logger=migrator t=2024-08-29T15:36:44.399344521Z level=debug msg="Executing migration condition SQL" id="create index IDX_dashboard_provisioning_dashboard_id_name - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_provisioning IDX_dashboard_provisioning_dashboard_id_name]"
logger=migrator t=2024-08-29T15:36:44.40067945Z level=debug msg="Executing sql migration" id="create index IDX_dashboard_provisioning_dashboard_id_name - v2" sql="CREATE INDEX `IDX_dashboard_provisioning_dashboard_id_name` ON `dashboard_provisioning` (`dashboard_id`,`name`);"
logger=migrator t=2024-08-29T15:36:44.403866694Z level=info msg="Migration successfully executed" id="create index IDX_dashboard_provisioning_dashboard_id_name - v2" duration=6.040732ms
logger=migrator t=2024-08-29T15:36:44.43065999Z level=info msg="Executing migration" id="copy dashboard_provisioning v1 to v2"
logger=migrator t=2024-08-29T15:36:44.431521943Z level=debug msg="Executing sql migration" id="copy dashboard_provisioning v1 to v2" sql="INSERT INTO `dashboard_provisioning` (`id`\n, `dashboard_id`\n, `name`\n, `external_id`) SELECT `id`\n, `dashboard_id`\n, `name`\n, `external_id` FROM `dashboard_provisioning_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:44.432468959Z level=info msg="Migration successfully executed" id="copy dashboard_provisioning v1 to v2" duration=1.810296ms
logger=migrator t=2024-08-29T15:36:44.458782243Z level=info msg="Executing migration" id="drop dashboard_provisioning_tmp_qwerty"
logger=migrator t=2024-08-29T15:36:44.461799606Z level=debug msg="Executing sql migration" id="drop dashboard_provisioning_tmp_qwerty" sql="DROP TABLE IF EXISTS `dashboard_provisioning_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:44.467364467Z level=info msg="Migration successfully executed" id="drop dashboard_provisioning_tmp_qwerty" duration=8.572492ms
logger=migrator t=2024-08-29T15:36:44.492401896Z level=info msg="Executing migration" id="Add check_sum column"
logger=migrator t=2024-08-29T15:36:44.49245159Z level=debug msg="Executing sql migration" id="Add check_sum column" sql="alter table `dashboard_provisioning` ADD COLUMN `check_sum` TEXT NULL "
logger=migrator t=2024-08-29T15:36:44.507557483Z level=info msg="Migration successfully executed" id="Add check_sum column" duration=15.151818ms
logger=migrator t=2024-08-29T15:36:44.555522353Z level=info msg="Executing migration" id="Add index for dashboard_title"
logger=migrator t=2024-08-29T15:36:44.555574531Z level=debug msg="Executing migration condition SQL" id="Add index for dashboard_title" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard IDX_dashboard_title]"
logger=migrator t=2024-08-29T15:36:44.556038618Z level=debug msg="Executing sql migration" id="Add index for dashboard_title" sql="CREATE INDEX `IDX_dashboard_title` ON `dashboard` (`title`);"
logger=migrator t=2024-08-29T15:36:44.556644197Z level=info msg="Migration successfully executed" id="Add index for dashboard_title" duration=1.123328ms
logger=migrator t=2024-08-29T15:36:44.605403109Z level=info msg="Executing migration" id="delete tags for deleted dashboards"
logger=migrator t=2024-08-29T15:36:44.605450565Z level=debug msg="Executing sql migration" id="delete tags for deleted dashboards" sql="DELETE FROM dashboard_tag WHERE dashboard_id NOT IN (SELECT id FROM dashboard)"
logger=migrator t=2024-08-29T15:36:44.605657749Z level=info msg="Migration successfully executed" id="delete tags for deleted dashboards" duration=256.874µs
logger=migrator t=2024-08-29T15:36:44.631544848Z level=info msg="Executing migration" id="delete stars for deleted dashboards"
logger=migrator t=2024-08-29T15:36:44.631604962Z level=debug msg="Executing sql migration" id="delete stars for deleted dashboards" sql="DELETE FROM star WHERE dashboard_id NOT IN (SELECT id FROM dashboard)"
logger=migrator t=2024-08-29T15:36:44.635322606Z level=info msg="Migration successfully executed" id="delete stars for deleted dashboards" duration=4.562605ms
logger=migrator t=2024-08-29T15:36:44.686304287Z level=info msg="Executing migration" id="Add index for dashboard_is_folder"
logger=migrator t=2024-08-29T15:36:44.686516478Z level=debug msg="Executing migration condition SQL" id="Add index for dashboard_is_folder" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard IDX_dashboard_is_folder]"
logger=migrator t=2024-08-29T15:36:44.689362226Z level=debug msg="Executing sql migration" id="Add index for dashboard_is_folder" sql="CREATE INDEX `IDX_dashboard_is_folder` ON `dashboard` (`is_folder`);"
logger=migrator t=2024-08-29T15:36:44.693946757Z level=info msg="Migration successfully executed" id="Add index for dashboard_is_folder" duration=7.641516ms
logger=migrator t=2024-08-29T15:36:44.736008959Z level=info msg="Executing migration" id="Add isPublic for dashboard"
logger=migrator t=2024-08-29T15:36:44.736058277Z level=debug msg="Executing sql migration" id="Add isPublic for dashboard" sql="alter table `dashboard` ADD COLUMN `is_public` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:44.742719457Z level=info msg="Migration successfully executed" id="Add isPublic for dashboard" duration=6.709414ms
logger=migrator t=2024-08-29T15:36:44.763954693Z level=info msg="Executing migration" id="Add deleted for dashboard"
logger=migrator t=2024-08-29T15:36:44.764325544Z level=debug msg="Executing sql migration" id="Add deleted for dashboard" sql="alter table `dashboard` ADD COLUMN `deleted` DATETIME NULL "
logger=migrator t=2024-08-29T15:36:44.767962702Z level=info msg="Migration successfully executed" id="Add deleted for dashboard" duration=4.00759ms
logger=migrator t=2024-08-29T15:36:44.788742405Z level=info msg="Executing migration" id="Add index for deleted"
logger=migrator t=2024-08-29T15:36:44.78879384Z level=debug msg="Executing migration condition SQL" id="Add index for deleted" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard IDX_dashboard_deleted]"
logger=migrator t=2024-08-29T15:36:44.789495925Z level=debug msg="Executing sql migration" id="Add index for deleted" sql="CREATE INDEX `IDX_dashboard_deleted` ON `dashboard` (`deleted`);"
logger=migrator t=2024-08-29T15:36:44.790220062Z level=info msg="Migration successfully executed" id="Add index for deleted" duration=1.479907ms
logger=migrator t=2024-08-29T15:36:44.822790553Z level=info msg="Executing migration" id="create data_source table"
logger=migrator t=2024-08-29T15:36:44.822944048Z level=debug msg="Executing sql migration" id="create data_source table" sql="CREATE TABLE IF NOT EXISTS `data_source` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `account_id` INTEGER NOT NULL\n, `version` INTEGER NOT NULL\n, `type` TEXT NOT NULL\n, `name` TEXT NOT NULL\n, `access` TEXT NOT NULL\n, `url` TEXT NOT NULL\n, `password` TEXT NULL\n, `user` TEXT NULL\n, `database` TEXT NULL\n, `basic_auth` INTEGER NOT NULL\n, `basic_auth_user` TEXT NULL\n, `basic_auth_password` TEXT NULL\n, `is_default` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:44.827991693Z level=info msg="Migration successfully executed" id="create data_source table" duration=5.199399ms
logger=migrator t=2024-08-29T15:36:44.867538432Z level=info msg="Executing migration" id="add index data_source.account_id"
logger=migrator t=2024-08-29T15:36:44.867653123Z level=debug msg="Executing migration condition SQL" id="add index data_source.account_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[data_source IDX_data_source_account_id]"
logger=migrator t=2024-08-29T15:36:44.867947709Z level=debug msg="Executing sql migration" id="add index data_source.account_id" sql="CREATE INDEX `IDX_data_source_account_id` ON `data_source` (`account_id`);"
logger=migrator t=2024-08-29T15:36:44.868488951Z level=info msg="Migration successfully executed" id="add index data_source.account_id" duration=952.811µs
logger=migrator t=2024-08-29T15:36:44.912661981Z level=info msg="Executing migration" id="add unique index data_source.account_id_name"
logger=migrator t=2024-08-29T15:36:44.912705502Z level=debug msg="Executing migration condition SQL" id="add unique index data_source.account_id_name" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[data_source UQE_data_source_account_id_name]"
logger=migrator t=2024-08-29T15:36:44.913012974Z level=debug msg="Executing sql migration" id="add unique index data_source.account_id_name" sql="CREATE UNIQUE INDEX `UQE_data_source_account_id_name` ON `data_source` (`account_id`,`name`);"
logger=migrator t=2024-08-29T15:36:44.913897765Z level=info msg="Migration successfully executed" id="add unique index data_source.account_id_name" duration=1.236058ms
logger=migrator t=2024-08-29T15:36:44.933146226Z level=info msg="Executing migration" id="drop index IDX_data_source_account_id - v1"
logger=migrator t=2024-08-29T15:36:44.933576308Z level=debug msg="Executing migration condition SQL" id="drop index IDX_data_source_account_id - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[data_source IDX_data_source_account_id]"
logger=migrator t=2024-08-29T15:36:44.93666628Z level=debug msg="Executing sql migration" id="drop index IDX_data_source_account_id - v1" sql="DROP INDEX `IDX_data_source_account_id`"
logger=migrator t=2024-08-29T15:36:44.937742378Z level=info msg="Migration successfully executed" id="drop index IDX_data_source_account_id - v1" duration=4.597055ms
logger=migrator t=2024-08-29T15:36:44.951987407Z level=info msg="Executing migration" id="drop index UQE_data_source_account_id_name - v1"
logger=migrator t=2024-08-29T15:36:44.952480377Z level=debug msg="Executing migration condition SQL" id="drop index UQE_data_source_account_id_name - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[data_source UQE_data_source_account_id_name]"
logger=migrator t=2024-08-29T15:36:44.952823832Z level=debug msg="Executing sql migration" id="drop index UQE_data_source_account_id_name - v1" sql="DROP INDEX `UQE_data_source_account_id_name`"
logger=migrator t=2024-08-29T15:36:44.953759301Z level=info msg="Migration successfully executed" id="drop index UQE_data_source_account_id_name - v1" duration=1.768547ms
logger=migrator t=2024-08-29T15:36:44.973635654Z level=info msg="Executing migration" id="Rename table data_source to data_source_v1 - v1"
logger=migrator t=2024-08-29T15:36:44.973818546Z level=debug msg="Executing sql migration" id="Rename table data_source to data_source_v1 - v1" sql="ALTER TABLE `data_source` RENAME TO `data_source_v1`"
logger=migrator t=2024-08-29T15:36:44.978823331Z level=info msg="Migration successfully executed" id="Rename table data_source to data_source_v1 - v1" duration=5.184719ms
logger=migrator t=2024-08-29T15:36:44.991187359Z level=info msg="Executing migration" id="create data_source table v2"
logger=migrator t=2024-08-29T15:36:44.991406006Z level=debug msg="Executing sql migration" id="create data_source table v2" sql="CREATE TABLE IF NOT EXISTS `data_source` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `version` INTEGER NOT NULL\n, `type` TEXT NOT NULL\n, `name` TEXT NOT NULL\n, `access` TEXT NOT NULL\n, `url` TEXT NOT NULL\n, `password` TEXT NULL\n, `user` TEXT NULL\n, `database` TEXT NULL\n, `basic_auth` INTEGER NOT NULL\n, `basic_auth_user` TEXT NULL\n, `basic_auth_password` TEXT NULL\n, `is_default` INTEGER NOT NULL\n, `json_data` TEXT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:44.992264352Z level=info msg="Migration successfully executed" id="create data_source table v2" duration=1.078905ms
logger=migrator t=2024-08-29T15:36:45.000466654Z level=info msg="Executing migration" id="create index IDX_data_source_org_id - v2"
logger=migrator t=2024-08-29T15:36:45.000557413Z level=debug msg="Executing migration condition SQL" id="create index IDX_data_source_org_id - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[data_source IDX_data_source_org_id]"
logger=migrator t=2024-08-29T15:36:45.000845719Z level=debug msg="Executing sql migration" id="create index IDX_data_source_org_id - v2" sql="CREATE INDEX `IDX_data_source_org_id` ON `data_source` (`org_id`);"
logger=migrator t=2024-08-29T15:36:45.001362458Z level=info msg="Migration successfully executed" id="create index IDX_data_source_org_id - v2" duration=897.083µs
logger=migrator t=2024-08-29T15:36:45.007926535Z level=info msg="Executing migration" id="create index UQE_data_source_org_id_name - v2"
logger=migrator t=2024-08-29T15:36:45.008024717Z level=debug msg="Executing migration condition SQL" id="create index UQE_data_source_org_id_name - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[data_source UQE_data_source_org_id_name]"
logger=migrator t=2024-08-29T15:36:45.008310968Z level=debug msg="Executing sql migration" id="create index UQE_data_source_org_id_name - v2" sql="CREATE UNIQUE INDEX `UQE_data_source_org_id_name` ON `data_source` (`org_id`,`name`);"
logger=migrator t=2024-08-29T15:36:45.008766789Z level=info msg="Migration successfully executed" id="create index UQE_data_source_org_id_name - v2" duration=841.449µs
logger=migrator t=2024-08-29T15:36:45.017375809Z level=info msg="Executing migration" id="Drop old table data_source_v1 #2"
logger=migrator t=2024-08-29T15:36:45.01745384Z level=debug msg="Executing sql migration" id="Drop old table data_source_v1 #2" sql="DROP TABLE IF EXISTS `data_source_v1`"
logger=migrator t=2024-08-29T15:36:45.018084163Z level=info msg="Migration successfully executed" id="Drop old table data_source_v1 #2" duration=709.562µs
logger=migrator t=2024-08-29T15:36:45.031738713Z level=info msg="Executing migration" id="Add column with_credentials"
logger=migrator t=2024-08-29T15:36:45.032040106Z level=debug msg="Executing sql migration" id="Add column with_credentials" sql="alter table `data_source` ADD COLUMN `with_credentials` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:45.036212844Z level=info msg="Migration successfully executed" id="Add column with_credentials" duration=4.467984ms
logger=migrator t=2024-08-29T15:36:45.050136172Z level=info msg="Executing migration" id="Add secure json data column"
logger=migrator t=2024-08-29T15:36:45.050344713Z level=debug msg="Executing sql migration" id="Add secure json data column" sql="alter table `data_source` ADD COLUMN `secure_json_data` TEXT NULL "
logger=migrator t=2024-08-29T15:36:45.053339102Z level=info msg="Migration successfully executed" id="Add secure json data column" duration=3.202999ms
logger=migrator t=2024-08-29T15:36:45.068705789Z level=info msg="Executing migration" id="Update data_source table charset"
logger=migrator t=2024-08-29T15:36:45.068751918Z level=debug msg="Executing sql migration" id="Update data_source table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:45.068781006Z level=info msg="Migration successfully executed" id="Update data_source table charset" duration=80.121µs
logger=migrator t=2024-08-29T15:36:45.082056309Z level=info msg="Executing migration" id="Update initial version to 1"
logger=migrator t=2024-08-29T15:36:45.08249208Z level=debug msg="Executing sql migration" id="Update initial version to 1" sql="UPDATE data_source SET version = 1 WHERE version = 0"
logger=migrator t=2024-08-29T15:36:45.082882645Z level=info msg="Migration successfully executed" id="Update initial version to 1" duration=829.172µs
logger=migrator t=2024-08-29T15:36:45.112591309Z level=info msg="Executing migration" id="Add read_only data column"
logger=migrator t=2024-08-29T15:36:45.112770338Z level=debug msg="Executing sql migration" id="Add read_only data column" sql="alter table `data_source` ADD COLUMN `read_only` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:45.114749376Z level=info msg="Migration successfully executed" id="Add read_only data column" duration=2.15972ms
logger=migrator t=2024-08-29T15:36:45.150077947Z level=info msg="Executing migration" id="Migrate logging ds to loki ds"
logger=migrator t=2024-08-29T15:36:45.151051757Z level=debug msg="Executing sql migration" id="Migrate logging ds to loki ds" sql="UPDATE data_source SET type = 'loki' WHERE type = 'logging'"
logger=migrator t=2024-08-29T15:36:45.151358147Z level=info msg="Migration successfully executed" id="Migrate logging ds to loki ds" duration=1.282905ms
logger=migrator t=2024-08-29T15:36:45.16474804Z level=info msg="Executing migration" id="Update json_data with nulls"
logger=migrator t=2024-08-29T15:36:45.164952568Z level=debug msg="Executing sql migration" id="Update json_data with nulls" sql="UPDATE data_source SET json_data = '{}' WHERE json_data is null"
logger=migrator t=2024-08-29T15:36:45.16524432Z level=info msg="Migration successfully executed" id="Update json_data with nulls" duration=498.721µs
logger=migrator t=2024-08-29T15:36:45.178614408Z level=info msg="Executing migration" id="Add uid column"
logger=migrator t=2024-08-29T15:36:45.179090183Z level=debug msg="Executing sql migration" id="Add uid column" sql="alter table `data_source` ADD COLUMN `uid` TEXT NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:45.181193612Z level=info msg="Migration successfully executed" id="Add uid column" duration=2.578421ms
logger=migrator t=2024-08-29T15:36:45.195138432Z level=info msg="Executing migration" id="Update uid value"
logger=migrator t=2024-08-29T15:36:45.195328655Z level=debug msg="Executing sql migration" id="Update uid value" sql="UPDATE data_source SET uid=printf('%09d',id);"
logger=migrator t=2024-08-29T15:36:45.195975939Z level=info msg="Migration successfully executed" id="Update uid value" duration=840.527µs
logger=migrator t=2024-08-29T15:36:45.238656609Z level=info msg="Executing migration" id="Add unique index datasource_org_id_uid"
logger=migrator t=2024-08-29T15:36:45.24294907Z level=debug msg="Executing migration condition SQL" id="Add unique index datasource_org_id_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[data_source UQE_data_source_org_id_uid]"
logger=migrator t=2024-08-29T15:36:45.294582852Z level=debug msg="Executing sql migration" id="Add unique index datasource_org_id_uid" sql="CREATE UNIQUE INDEX `UQE_data_source_org_id_uid` ON `data_source` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:45.295450105Z level=info msg="Migration successfully executed" id="Add unique index datasource_org_id_uid" duration=56.797394ms
logger=migrator t=2024-08-29T15:36:45.336806004Z level=info msg="Executing migration" id="add unique index datasource_org_id_is_default"
logger=migrator t=2024-08-29T15:36:45.336865739Z level=debug msg="Executing migration condition SQL" id="add unique index datasource_org_id_is_default" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[data_source IDX_data_source_org_id_is_default]"
logger=migrator t=2024-08-29T15:36:45.347006932Z level=debug msg="Executing sql migration" id="add unique index datasource_org_id_is_default" sql="CREATE INDEX `IDX_data_source_org_id_is_default` ON `data_source` (`org_id`,`is_default`);"
logger=migrator t=2024-08-29T15:36:45.354862458Z level=info msg="Migration successfully executed" id="add unique index datasource_org_id_is_default" duration=18.058153ms
logger=migrator t=2024-08-29T15:36:45.390462211Z level=info msg="Executing migration" id="Add is_prunable column"
logger=migrator t=2024-08-29T15:36:45.390510545Z level=debug msg="Executing sql migration" id="Add is_prunable column" sql="alter table `data_source` ADD COLUMN `is_prunable` INTEGER NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:45.405294692Z level=info msg="Migration successfully executed" id="Add is_prunable column" duration=14.831111ms
logger=migrator t=2024-08-29T15:36:45.428295795Z level=info msg="Executing migration" id="Add api_version column"
logger=migrator t=2024-08-29T15:36:45.428551221Z level=debug msg="Executing sql migration" id="Add api_version column" sql="alter table `data_source` ADD COLUMN `api_version` TEXT NULL "
logger=migrator t=2024-08-29T15:36:45.431359538Z level=info msg="Migration successfully executed" id="Add api_version column" duration=3.063577ms
logger=migrator t=2024-08-29T15:36:45.48869951Z level=info msg="Executing migration" id="create api_key table"
logger=migrator t=2024-08-29T15:36:45.496210588Z level=debug msg="Executing sql migration" id="create api_key table" sql="CREATE TABLE IF NOT EXISTS `api_key` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `account_id` INTEGER NOT NULL\n, `name` TEXT NOT NULL\n, `key` TEXT NOT NULL\n, `role` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:45.508507528Z level=info msg="Migration successfully executed" id="create api_key table" duration=17.546996ms
logger=migrator t=2024-08-29T15:36:45.557165458Z level=info msg="Executing migration" id="add index api_key.account_id"
logger=migrator t=2024-08-29T15:36:45.557300031Z level=debug msg="Executing migration condition SQL" id="add index api_key.account_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[api_key IDX_api_key_account_id]"
logger=migrator t=2024-08-29T15:36:45.557934316Z level=debug msg="Executing sql migration" id="add index api_key.account_id" sql="CREATE INDEX `IDX_api_key_account_id` ON `api_key` (`account_id`);"
logger=migrator t=2024-08-29T15:36:45.558719442Z level=info msg="Migration successfully executed" id="add index api_key.account_id" duration=1.559294ms
logger=migrator t=2024-08-29T15:36:45.575089318Z level=info msg="Executing migration" id="add index api_key.key"
logger=migrator t=2024-08-29T15:36:45.575233608Z level=debug msg="Executing migration condition SQL" id="add index api_key.key" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[api_key UQE_api_key_key]"
logger=migrator t=2024-08-29T15:36:45.579012266Z level=debug msg="Executing sql migration" id="add index api_key.key" sql="CREATE UNIQUE INDEX `UQE_api_key_key` ON `api_key` (`key`);"
logger=migrator t=2024-08-29T15:36:45.580221608Z level=info msg="Migration successfully executed" id="add index api_key.key" duration=5.132778ms
logger=migrator t=2024-08-29T15:36:45.604734604Z level=info msg="Executing migration" id="add index api_key.account_id_name"
logger=migrator t=2024-08-29T15:36:45.605234898Z level=debug msg="Executing migration condition SQL" id="add index api_key.account_id_name" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[api_key UQE_api_key_account_id_name]"
logger=migrator t=2024-08-29T15:36:45.605819993Z level=debug msg="Executing sql migration" id="add index api_key.account_id_name" sql="CREATE UNIQUE INDEX `UQE_api_key_account_id_name` ON `api_key` (`account_id`,`name`);"
logger=migrator t=2024-08-29T15:36:45.610140585Z level=info msg="Migration successfully executed" id="add index api_key.account_id_name" duration=5.404761ms
logger=migrator t=2024-08-29T15:36:45.623703713Z level=info msg="Executing migration" id="drop index IDX_api_key_account_id - v1"
logger=migrator t=2024-08-29T15:36:45.62441515Z level=debug msg="Executing migration condition SQL" id="drop index IDX_api_key_account_id - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[api_key IDX_api_key_account_id]"
logger=migrator t=2024-08-29T15:36:45.628222872Z level=debug msg="Executing sql migration" id="drop index IDX_api_key_account_id - v1" sql="DROP INDEX `IDX_api_key_account_id`"
logger=migrator t=2024-08-29T15:36:45.632393905Z level=info msg="Migration successfully executed" id="drop index IDX_api_key_account_id - v1" duration=8.685948ms
logger=migrator t=2024-08-29T15:36:45.650513027Z level=info msg="Executing migration" id="drop index UQE_api_key_key - v1"
logger=migrator t=2024-08-29T15:36:45.65056657Z level=debug msg="Executing migration condition SQL" id="drop index UQE_api_key_key - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[api_key UQE_api_key_key]"
logger=migrator t=2024-08-29T15:36:45.650881433Z level=debug msg="Executing sql migration" id="drop index UQE_api_key_key - v1" sql="DROP INDEX `UQE_api_key_key`"
logger=migrator t=2024-08-29T15:36:45.651342194Z level=info msg="Migration successfully executed" id="drop index UQE_api_key_key - v1" duration=833.004µs
logger=migrator t=2024-08-29T15:36:45.673771355Z level=info msg="Executing migration" id="drop index UQE_api_key_account_id_name - v1"
logger=migrator t=2024-08-29T15:36:45.673872725Z level=debug msg="Executing migration condition SQL" id="drop index UQE_api_key_account_id_name - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[api_key UQE_api_key_account_id_name]"
logger=migrator t=2024-08-29T15:36:45.675604883Z level=debug msg="Executing sql migration" id="drop index UQE_api_key_account_id_name - v1" sql="DROP INDEX `UQE_api_key_account_id_name`"
logger=migrator t=2024-08-29T15:36:45.677051391Z level=info msg="Migration successfully executed" id="drop index UQE_api_key_account_id_name - v1" duration=3.282693ms
logger=migrator t=2024-08-29T15:36:45.712784858Z level=info msg="Executing migration" id="Rename table api_key to api_key_v1 - v1"
logger=migrator t=2024-08-29T15:36:45.71315081Z level=debug msg="Executing sql migration" id="Rename table api_key to api_key_v1 - v1" sql="ALTER TABLE `api_key` RENAME TO `api_key_v1`"
logger=migrator t=2024-08-29T15:36:45.740390595Z level=info msg="Migration successfully executed" id="Rename table api_key to api_key_v1 - v1" duration=27.600067ms
logger=migrator t=2024-08-29T15:36:45.767908816Z level=info msg="Executing migration" id="create api_key table v2"
logger=migrator t=2024-08-29T15:36:45.768048148Z level=debug msg="Executing sql migration" id="create api_key table v2" sql="CREATE TABLE IF NOT EXISTS `api_key` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `name` TEXT NOT NULL\n, `key` TEXT NOT NULL\n, `role` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:45.769662089Z level=info msg="Migration successfully executed" id="create api_key table v2" duration=1.753776ms
logger=migrator t=2024-08-29T15:36:45.785612797Z level=info msg="Executing migration" id="create index IDX_api_key_org_id - v2"
logger=migrator t=2024-08-29T15:36:45.785964475Z level=debug msg="Executing migration condition SQL" id="create index IDX_api_key_org_id - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[api_key IDX_api_key_org_id]"
logger=migrator t=2024-08-29T15:36:45.787585256Z level=debug msg="Executing sql migration" id="create index IDX_api_key_org_id - v2" sql="CREATE INDEX `IDX_api_key_org_id` ON `api_key` (`org_id`);"
logger=migrator t=2024-08-29T15:36:45.789214462Z level=info msg="Migration successfully executed" id="create index IDX_api_key_org_id - v2" duration=3.604065ms
logger=migrator t=2024-08-29T15:36:45.811052007Z level=info msg="Executing migration" id="create index UQE_api_key_key - v2"
logger=migrator t=2024-08-29T15:36:45.811179944Z level=debug msg="Executing migration condition SQL" id="create index UQE_api_key_key - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[api_key UQE_api_key_key]"
logger=migrator t=2024-08-29T15:36:45.811652286Z level=debug msg="Executing sql migration" id="create index UQE_api_key_key - v2" sql="CREATE UNIQUE INDEX `UQE_api_key_key` ON `api_key` (`key`);"
logger=migrator t=2024-08-29T15:36:45.812554394Z level=info msg="Migration successfully executed" id="create index UQE_api_key_key - v2" duration=1.504359ms
logger=migrator t=2024-08-29T15:36:45.832953824Z level=info msg="Executing migration" id="create index UQE_api_key_org_id_name - v2"
logger=migrator t=2024-08-29T15:36:45.833239404Z level=debug msg="Executing migration condition SQL" id="create index UQE_api_key_org_id_name - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[api_key UQE_api_key_org_id_name]"
logger=migrator t=2024-08-29T15:36:45.833537502Z level=debug msg="Executing sql migration" id="create index UQE_api_key_org_id_name - v2" sql="CREATE UNIQUE INDEX `UQE_api_key_org_id_name` ON `api_key` (`org_id`,`name`);"
logger=migrator t=2024-08-29T15:36:45.837372393Z level=info msg="Migration successfully executed" id="create index UQE_api_key_org_id_name - v2" duration=4.412013ms
logger=migrator t=2024-08-29T15:36:45.863503908Z level=info msg="Executing migration" id="copy api_key v1 to v2"
logger=migrator t=2024-08-29T15:36:45.863772895Z level=debug msg="Executing sql migration" id="copy api_key v1 to v2" sql="INSERT INTO `api_key` (`name`\n, `key`\n, `role`\n, `created`\n, `updated`\n, `id`\n, `org_id`) SELECT `name`\n, `key`\n, `role`\n, `created`\n, `updated`\n, `id`\n, `account_id` FROM `api_key_v1`"
logger=migrator t=2024-08-29T15:36:45.86415551Z level=info msg="Migration successfully executed" id="copy api_key v1 to v2" duration=653.128µs
logger=migrator t=2024-08-29T15:36:45.881943477Z level=info msg="Executing migration" id="Drop old table api_key_v1"
logger=migrator t=2024-08-29T15:36:45.8819883Z level=debug msg="Executing sql migration" id="Drop old table api_key_v1" sql="DROP TABLE IF EXISTS `api_key_v1`"
logger=migrator t=2024-08-29T15:36:45.895673415Z level=info msg="Migration successfully executed" id="Drop old table api_key_v1" duration=13.72684ms
logger=migrator t=2024-08-29T15:36:45.919455443Z level=info msg="Executing migration" id="Update api_key table charset"
logger=migrator t=2024-08-29T15:36:45.919566622Z level=debug msg="Executing sql migration" id="Update api_key table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:45.919595244Z level=info msg="Migration successfully executed" id="Update api_key table charset" duration=143.457µs
logger=migrator t=2024-08-29T15:36:45.931268775Z level=info msg="Executing migration" id="Add expires to api_key table"
logger=migrator t=2024-08-29T15:36:45.931881321Z level=debug msg="Executing sql migration" id="Add expires to api_key table" sql="alter table `api_key` ADD COLUMN `expires` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:45.93643942Z level=info msg="Migration successfully executed" id="Add expires to api_key table" duration=5.172056ms
logger=migrator t=2024-08-29T15:36:45.956201096Z level=info msg="Executing migration" id="Add service account foreign key"
logger=migrator t=2024-08-29T15:36:45.956253144Z level=debug msg="Executing sql migration" id="Add service account foreign key" sql="alter table `api_key` ADD COLUMN `service_account_id` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:45.958415309Z level=info msg="Migration successfully executed" id="Add service account foreign key" duration=2.21521ms
logger=migrator t=2024-08-29T15:36:45.983489358Z level=info msg="Executing migration" id="set service account foreign key to nil if 0"
logger=migrator t=2024-08-29T15:36:45.984083738Z level=debug msg="Executing sql migration" id="set service account foreign key to nil if 0" sql="UPDATE api_key SET service_account_id = NULL WHERE service_account_id = 0;"
logger=migrator t=2024-08-29T15:36:45.984347887Z level=info msg="Migration successfully executed" id="set service account foreign key to nil if 0" duration=861.582µs
logger=migrator t=2024-08-29T15:36:46.004404965Z level=info msg="Executing migration" id="Add last_used_at to api_key table"
logger=migrator t=2024-08-29T15:36:46.005030651Z level=debug msg="Executing sql migration" id="Add last_used_at to api_key table" sql="alter table `api_key` ADD COLUMN `last_used_at` DATETIME NULL "
logger=migrator t=2024-08-29T15:36:46.011562885Z level=info msg="Migration successfully executed" id="Add last_used_at to api_key table" duration=7.155856ms
logger=migrator t=2024-08-29T15:36:46.027930382Z level=info msg="Executing migration" id="Add is_revoked column to api_key table"
logger=migrator t=2024-08-29T15:36:46.028965541Z level=debug msg="Executing sql migration" id="Add is_revoked column to api_key table" sql="alter table `api_key` ADD COLUMN `is_revoked` INTEGER NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:46.032443269Z level=info msg="Migration successfully executed" id="Add is_revoked column to api_key table" duration=4.514317ms
logger=migrator t=2024-08-29T15:36:46.047530464Z level=info msg="Executing migration" id="create dashboard_snapshot table v4"
logger=migrator t=2024-08-29T15:36:46.047783463Z level=debug msg="Executing sql migration" id="create dashboard_snapshot table v4" sql="CREATE TABLE IF NOT EXISTS `dashboard_snapshot` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `name` TEXT NOT NULL\n, `key` TEXT NOT NULL\n, `dashboard` TEXT NOT NULL\n, `expires` DATETIME NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:46.048577871Z level=info msg="Migration successfully executed" id="create dashboard_snapshot table v4" duration=1.049183ms
logger=migrator t=2024-08-29T15:36:46.065587398Z level=info msg="Executing migration" id="drop table dashboard_snapshot_v4 #1"
logger=migrator t=2024-08-29T15:36:46.065666921Z level=debug msg="Executing sql migration" id="drop table dashboard_snapshot_v4 #1" sql="DROP TABLE IF EXISTS `dashboard_snapshot`"
logger=migrator t=2024-08-29T15:36:46.066290395Z level=info msg="Migration successfully executed" id="drop table dashboard_snapshot_v4 #1" duration=706.154µs
logger=migrator t=2024-08-29T15:36:46.081784121Z level=info msg="Executing migration" id="create dashboard_snapshot table v5 #2"
logger=migrator t=2024-08-29T15:36:46.082128281Z level=debug msg="Executing sql migration" id="create dashboard_snapshot table v5 #2" sql="CREATE TABLE IF NOT EXISTS `dashboard_snapshot` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `name` TEXT NOT NULL\n, `key` TEXT NOT NULL\n, `delete_key` TEXT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `user_id` INTEGER NOT NULL\n, `external` INTEGER NOT NULL\n, `external_url` TEXT NOT NULL\n, `dashboard` TEXT NOT NULL\n, `expires` DATETIME NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:46.084691828Z level=info msg="Migration successfully executed" id="create dashboard_snapshot table v5 #2" duration=2.90364ms
logger=migrator t=2024-08-29T15:36:46.102357565Z level=info msg="Executing migration" id="create index UQE_dashboard_snapshot_key - v5"
logger=migrator t=2024-08-29T15:36:46.102845467Z level=debug msg="Executing migration condition SQL" id="create index UQE_dashboard_snapshot_key - v5" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_snapshot UQE_dashboard_snapshot_key]"
logger=migrator t=2024-08-29T15:36:46.105103029Z level=debug msg="Executing sql migration" id="create index UQE_dashboard_snapshot_key - v5" sql="CREATE UNIQUE INDEX `UQE_dashboard_snapshot_key` ON `dashboard_snapshot` (`key`);"
logger=migrator t=2024-08-29T15:36:46.107292339Z level=info msg="Migration successfully executed" id="create index UQE_dashboard_snapshot_key - v5" duration=4.931834ms
logger=migrator t=2024-08-29T15:36:46.12438161Z level=info msg="Executing migration" id="create index UQE_dashboard_snapshot_delete_key - v5"
logger=migrator t=2024-08-29T15:36:46.124594855Z level=debug msg="Executing migration condition SQL" id="create index UQE_dashboard_snapshot_delete_key - v5" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_snapshot UQE_dashboard_snapshot_delete_key]"
logger=migrator t=2024-08-29T15:36:46.125938286Z level=debug msg="Executing sql migration" id="create index UQE_dashboard_snapshot_delete_key - v5" sql="CREATE UNIQUE INDEX `UQE_dashboard_snapshot_delete_key` ON `dashboard_snapshot` (`delete_key`);"
logger=migrator t=2024-08-29T15:36:46.126952358Z level=info msg="Migration successfully executed" id="create index UQE_dashboard_snapshot_delete_key - v5" duration=2.571759ms
logger=migrator t=2024-08-29T15:36:46.144445371Z level=info msg="Executing migration" id="create index IDX_dashboard_snapshot_user_id - v5"
logger=migrator t=2024-08-29T15:36:46.144498235Z level=debug msg="Executing migration condition SQL" id="create index IDX_dashboard_snapshot_user_id - v5" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_snapshot IDX_dashboard_snapshot_user_id]"
logger=migrator t=2024-08-29T15:36:46.144826516Z level=debug msg="Executing sql migration" id="create index IDX_dashboard_snapshot_user_id - v5" sql="CREATE INDEX `IDX_dashboard_snapshot_user_id` ON `dashboard_snapshot` (`user_id`);"
logger=migrator t=2024-08-29T15:36:46.146410574Z level=info msg="Migration successfully executed" id="create index IDX_dashboard_snapshot_user_id - v5" duration=1.965748ms
logger=migrator t=2024-08-29T15:36:46.158698858Z level=info msg="Executing migration" id="alter dashboard_snapshot to mediumtext v2"
logger=migrator t=2024-08-29T15:36:46.15892694Z level=debug msg="Executing sql migration" id="alter dashboard_snapshot to mediumtext v2" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:46.159036686Z level=info msg="Migration successfully executed" id="alter dashboard_snapshot to mediumtext v2" duration=344.397µs
logger=migrator t=2024-08-29T15:36:46.17465858Z level=info msg="Executing migration" id="Update dashboard_snapshot table charset"
logger=migrator t=2024-08-29T15:36:46.175191562Z level=debug msg="Executing sql migration" id="Update dashboard_snapshot table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:46.175246856Z level=info msg="Migration successfully executed" id="Update dashboard_snapshot table charset" duration=587.459µs
logger=migrator t=2024-08-29T15:36:46.19136919Z level=info msg="Executing migration" id="Add column external_delete_url to dashboard_snapshots table"
logger=migrator t=2024-08-29T15:36:46.232273534Z level=debug msg="Executing sql migration" id="Add column external_delete_url to dashboard_snapshots table" sql="alter table `dashboard_snapshot` ADD COLUMN `external_delete_url` TEXT NULL "
logger=migrator t=2024-08-29T15:36:46.244125072Z level=info msg="Migration successfully executed" id="Add column external_delete_url to dashboard_snapshots table" duration=52.753462ms
logger=migrator t=2024-08-29T15:36:46.264704746Z level=info msg="Executing migration" id="Add encrypted dashboard json column"
logger=migrator t=2024-08-29T15:36:46.264861889Z level=debug msg="Executing sql migration" id="Add encrypted dashboard json column" sql="alter table `dashboard_snapshot` ADD COLUMN `dashboard_encrypted` BLOB NULL "
logger=migrator t=2024-08-29T15:36:46.273071365Z level=info msg="Migration successfully executed" id="Add encrypted dashboard json column" duration=8.364649ms
logger=migrator t=2024-08-29T15:36:46.293715738Z level=info msg="Executing migration" id="Change dashboard_encrypted column to MEDIUMBLOB"
logger=migrator t=2024-08-29T15:36:46.294120464Z level=debug msg="Executing sql migration" id="Change dashboard_encrypted column to MEDIUMBLOB" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:46.29420778Z level=info msg="Migration successfully executed" id="Change dashboard_encrypted column to MEDIUMBLOB" duration=495.728µs
logger=migrator t=2024-08-29T15:36:46.315348118Z level=info msg="Executing migration" id="create quota table v1"
logger=migrator t=2024-08-29T15:36:46.315489459Z level=debug msg="Executing sql migration" id="create quota table v1" sql="CREATE TABLE IF NOT EXISTS `quota` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NULL\n, `user_id` INTEGER NULL\n, `target` TEXT NOT NULL\n, `limit` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:46.321176887Z level=info msg="Migration successfully executed" id="create quota table v1" duration=5.82798ms
logger=migrator t=2024-08-29T15:36:46.337967937Z level=info msg="Executing migration" id="create index UQE_quota_org_id_user_id_target - v1"
logger=migrator t=2024-08-29T15:36:46.339853642Z level=debug msg="Executing migration condition SQL" id="create index UQE_quota_org_id_user_id_target - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[quota UQE_quota_org_id_user_id_target]"
logger=migrator t=2024-08-29T15:36:46.341383038Z level=debug msg="Executing sql migration" id="create index UQE_quota_org_id_user_id_target - v1" sql="CREATE UNIQUE INDEX `UQE_quota_org_id_user_id_target` ON `quota` (`org_id`,`user_id`,`target`);"
logger=migrator t=2024-08-29T15:36:46.34254507Z level=info msg="Migration successfully executed" id="create index UQE_quota_org_id_user_id_target - v1" duration=4.57792ms
logger=migrator t=2024-08-29T15:36:46.36481922Z level=info msg="Executing migration" id="Update quota table charset"
logger=migrator t=2024-08-29T15:36:46.364927593Z level=debug msg="Executing sql migration" id="Update quota table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:46.364964894Z level=info msg="Migration successfully executed" id="Update quota table charset" duration=150.15µs
logger=migrator t=2024-08-29T15:36:46.39939157Z level=info msg="Executing migration" id="create plugin_setting table"
logger=migrator t=2024-08-29T15:36:46.399719974Z level=debug msg="Executing sql migration" id="create plugin_setting table" sql="CREATE TABLE IF NOT EXISTS `plugin_setting` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NULL\n, `plugin_id` TEXT NOT NULL\n, `enabled` INTEGER NOT NULL\n, `pinned` INTEGER NOT NULL\n, `json_data` TEXT NULL\n, `secure_json_data` TEXT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:46.400550244Z level=info msg="Migration successfully executed" id="create plugin_setting table" duration=1.161224ms
logger=migrator t=2024-08-29T15:36:46.434251063Z level=info msg="Executing migration" id="create index UQE_plugin_setting_org_id_plugin_id - v1"
logger=migrator t=2024-08-29T15:36:46.434306399Z level=debug msg="Executing migration condition SQL" id="create index UQE_plugin_setting_org_id_plugin_id - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[plugin_setting UQE_plugin_setting_org_id_plugin_id]"
logger=migrator t=2024-08-29T15:36:46.434652373Z level=debug msg="Executing sql migration" id="create index UQE_plugin_setting_org_id_plugin_id - v1" sql="CREATE UNIQUE INDEX `UQE_plugin_setting_org_id_plugin_id` ON `plugin_setting` (`org_id`,`plugin_id`);"
logger=migrator t=2024-08-29T15:36:46.435246662Z level=info msg="Migration successfully executed" id="create index UQE_plugin_setting_org_id_plugin_id - v1" duration=998.521µs
logger=migrator t=2024-08-29T15:36:46.457163443Z level=info msg="Executing migration" id="Add column plugin_version to plugin_settings"
logger=migrator t=2024-08-29T15:36:46.457277717Z level=debug msg="Executing sql migration" id="Add column plugin_version to plugin_settings" sql="alter table `plugin_setting` ADD COLUMN `plugin_version` TEXT NULL "
logger=migrator t=2024-08-29T15:36:46.465812526Z level=info msg="Migration successfully executed" id="Add column plugin_version to plugin_settings" duration=8.627401ms
logger=migrator t=2024-08-29T15:36:46.491289285Z level=info msg="Executing migration" id="Update plugin_setting table charset"
logger=migrator t=2024-08-29T15:36:46.491813821Z level=debug msg="Executing sql migration" id="Update plugin_setting table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:46.491843732Z level=info msg="Migration successfully executed" id="Update plugin_setting table charset" duration=558.533µs
logger=migrator t=2024-08-29T15:36:46.516001625Z level=info msg="Executing migration" id="create session table"
logger=migrator t=2024-08-29T15:36:46.516352328Z level=debug msg="Executing sql migration" id="create session table" sql="CREATE TABLE IF NOT EXISTS `session` (\n`key` TEXT PRIMARY KEY NOT NULL\n, `data` BLOB NOT NULL\n, `expiry` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:46.517135299Z level=info msg="Migration successfully executed" id="create session table" duration=1.135364ms
logger=migrator t=2024-08-29T15:36:46.560999386Z level=info msg="Executing migration" id="Drop old table playlist table"
logger=migrator t=2024-08-29T15:36:46.567134529Z level=debug msg="Executing sql migration" id="Drop old table playlist table" sql="DROP TABLE IF EXISTS `playlist`"
logger=migrator t=2024-08-29T15:36:46.567634097Z level=info msg="Migration successfully executed" id="Drop old table playlist table" duration=6.632337ms
logger=migrator t=2024-08-29T15:36:46.599825805Z level=info msg="Executing migration" id="Drop old table playlist_item table"
logger=migrator t=2024-08-29T15:36:46.599948419Z level=debug msg="Executing sql migration" id="Drop old table playlist_item table" sql="DROP TABLE IF EXISTS `playlist_item`"
logger=migrator t=2024-08-29T15:36:46.60007106Z level=info msg="Migration successfully executed" id="Drop old table playlist_item table" duration=248.968µs
logger=migrator t=2024-08-29T15:36:46.719359572Z level=info msg="Executing migration" id="create playlist table v2"
logger=migrator t=2024-08-29T15:36:46.719515875Z level=debug msg="Executing sql migration" id="create playlist table v2" sql="CREATE TABLE IF NOT EXISTS `playlist` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `name` TEXT NOT NULL\n, `interval` TEXT NOT NULL\n, `org_id` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:46.73197484Z level=info msg="Migration successfully executed" id="create playlist table v2" duration=12.614667ms
logger=migrator t=2024-08-29T15:36:46.757872054Z level=info msg="Executing migration" id="create playlist item table v2"
logger=migrator t=2024-08-29T15:36:46.758251258Z level=debug msg="Executing sql migration" id="create playlist item table v2" sql="CREATE TABLE IF NOT EXISTS `playlist_item` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `playlist_id` INTEGER NOT NULL\n, `type` TEXT NOT NULL\n, `value` TEXT NOT NULL\n, `title` TEXT NOT NULL\n, `order` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:46.759654569Z level=info msg="Migration successfully executed" id="create playlist item table v2" duration=1.783864ms
logger=migrator t=2024-08-29T15:36:46.773113384Z level=info msg="Executing migration" id="Update playlist table charset"
logger=migrator t=2024-08-29T15:36:46.774049294Z level=debug msg="Executing sql migration" id="Update playlist table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:46.776475866Z level=info msg="Migration successfully executed" id="Update playlist table charset" duration=3.361028ms
logger=migrator t=2024-08-29T15:36:46.79673064Z level=info msg="Executing migration" id="Update playlist_item table charset"
logger=migrator t=2024-08-29T15:36:46.796773056Z level=debug msg="Executing sql migration" id="Update playlist_item table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:46.796800509Z level=info msg="Migration successfully executed" id="Update playlist_item table charset" duration=74.356µs
logger=migrator t=2024-08-29T15:36:46.810322307Z level=info msg="Executing migration" id="Add playlist column created_at"
logger=migrator t=2024-08-29T15:36:46.810511459Z level=debug msg="Executing sql migration" id="Add playlist column created_at" sql="alter table `playlist` ADD COLUMN `created_at` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:46.820875186Z level=info msg="Migration successfully executed" id="Add playlist column created_at" duration=10.550417ms
logger=migrator t=2024-08-29T15:36:46.863325957Z level=info msg="Executing migration" id="Add playlist column updated_at"
logger=migrator t=2024-08-29T15:36:46.863374122Z level=debug msg="Executing sql migration" id="Add playlist column updated_at" sql="alter table `playlist` ADD COLUMN `updated_at` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:46.869650375Z level=info msg="Migration successfully executed" id="Add playlist column updated_at" duration=6.323513ms
logger=migrator t=2024-08-29T15:36:46.88347163Z level=info msg="Executing migration" id="drop preferences table v2"
logger=migrator t=2024-08-29T15:36:46.883609603Z level=debug msg="Executing sql migration" id="drop preferences table v2" sql="DROP TABLE IF EXISTS `preferences`"
logger=migrator t=2024-08-29T15:36:46.883713105Z level=info msg="Migration successfully executed" id="drop preferences table v2" duration=244.477µs
logger=migrator t=2024-08-29T15:36:46.896732725Z level=info msg="Executing migration" id="drop preferences table v3"
logger=migrator t=2024-08-29T15:36:46.896855633Z level=debug msg="Executing sql migration" id="drop preferences table v3" sql="DROP TABLE IF EXISTS `preferences`"
logger=migrator t=2024-08-29T15:36:46.89707343Z level=info msg="Migration successfully executed" id="drop preferences table v3" duration=341.822µs
logger=migrator t=2024-08-29T15:36:46.910196531Z level=info msg="Executing migration" id="create preferences table v3"
logger=migrator t=2024-08-29T15:36:46.910372505Z level=debug msg="Executing sql migration" id="create preferences table v3" sql="CREATE TABLE IF NOT EXISTS `preferences` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `user_id` INTEGER NOT NULL\n, `version` INTEGER NOT NULL\n, `home_dashboard_id` INTEGER NOT NULL\n, `timezone` TEXT NOT NULL\n, `theme` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:46.911143458Z level=info msg="Migration successfully executed" id="create preferences table v3" duration=948.871µs
logger=migrator t=2024-08-29T15:36:46.950981593Z level=info msg="Executing migration" id="Update preferences table charset"
logger=migrator t=2024-08-29T15:36:46.951323976Z level=debug msg="Executing sql migration" id="Update preferences table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:46.951370554Z level=info msg="Migration successfully executed" id="Update preferences table charset" duration=395.078µs
logger=migrator t=2024-08-29T15:36:46.969675547Z level=info msg="Executing migration" id="Add column team_id in preferences"
logger=migrator t=2024-08-29T15:36:46.969803836Z level=debug msg="Executing sql migration" id="Add column team_id in preferences" sql="alter table `preferences` ADD COLUMN `team_id` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:46.972528261Z level=info msg="Migration successfully executed" id="Add column team_id in preferences" duration=2.852166ms
logger=migrator t=2024-08-29T15:36:46.994906569Z level=info msg="Executing migration" id="Update team_id column values in preferences"
logger=migrator t=2024-08-29T15:36:46.995022997Z level=debug msg="Executing sql migration" id="Update team_id column values in preferences" sql="UPDATE preferences SET team_id=0 WHERE team_id IS NULL;"
logger=migrator t=2024-08-29T15:36:46.995209362Z level=info msg="Migration successfully executed" id="Update team_id column values in preferences" duration=305.609µs
logger=migrator t=2024-08-29T15:36:47.008234249Z level=info msg="Executing migration" id="Add column week_start in preferences"
logger=migrator t=2024-08-29T15:36:47.008281159Z level=debug msg="Executing sql migration" id="Add column week_start in preferences" sql="alter table `preferences` ADD COLUMN `week_start` TEXT NULL "
logger=migrator t=2024-08-29T15:36:47.011367659Z level=info msg="Migration successfully executed" id="Add column week_start in preferences" duration=3.132119ms
logger=migrator t=2024-08-29T15:36:47.028449665Z level=info msg="Executing migration" id="Add column preferences.json_data"
logger=migrator t=2024-08-29T15:36:47.028851522Z level=debug msg="Executing sql migration" id="Add column preferences.json_data" sql="alter table `preferences` ADD COLUMN `json_data` TEXT NULL "
logger=migrator t=2024-08-29T15:36:47.035248683Z level=info msg="Migration successfully executed" id="Add column preferences.json_data" duration=6.790357ms
logger=migrator t=2024-08-29T15:36:47.05741128Z level=info msg="Executing migration" id="alter preferences.json_data to mediumtext v1"
logger=migrator t=2024-08-29T15:36:47.05752306Z level=debug msg="Executing sql migration" id="alter preferences.json_data to mediumtext v1" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:47.057608448Z level=info msg="Migration successfully executed" id="alter preferences.json_data to mediumtext v1" duration=201.172µs
logger=migrator t=2024-08-29T15:36:47.074639794Z level=info msg="Executing migration" id="Add preferences index org_id"
logger=migrator t=2024-08-29T15:36:47.079152265Z level=debug msg="Executing migration condition SQL" id="Add preferences index org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[preferences IDX_preferences_org_id]"
logger=migrator t=2024-08-29T15:36:47.093555303Z level=debug msg="Executing sql migration" id="Add preferences index org_id" sql="CREATE INDEX `IDX_preferences_org_id` ON `preferences` (`org_id`);"
logger=migrator t=2024-08-29T15:36:47.096608005Z level=info msg="Migration successfully executed" id="Add preferences index org_id" duration=21.969034ms
logger=migrator t=2024-08-29T15:36:47.125398237Z level=info msg="Executing migration" id="Add preferences index user_id"
logger=migrator t=2024-08-29T15:36:47.125520295Z level=debug msg="Executing migration condition SQL" id="Add preferences index user_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[preferences IDX_preferences_user_id]"
logger=migrator t=2024-08-29T15:36:47.125870486Z level=debug msg="Executing sql migration" id="Add preferences index user_id" sql="CREATE INDEX `IDX_preferences_user_id` ON `preferences` (`user_id`);"
logger=migrator t=2024-08-29T15:36:47.126330306Z level=info msg="Migration successfully executed" id="Add preferences index user_id" duration=1.100213ms
logger=migrator t=2024-08-29T15:36:47.135762347Z level=info msg="Executing migration" id="create alert table v1"
logger=migrator t=2024-08-29T15:36:47.135840499Z level=debug msg="Executing sql migration" id="create alert table v1" sql="CREATE TABLE IF NOT EXISTS `alert` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `version` INTEGER NOT NULL\n, `dashboard_id` INTEGER NOT NULL\n, `panel_id` INTEGER NOT NULL\n, `org_id` INTEGER NOT NULL\n, `name` TEXT NOT NULL\n, `message` TEXT NOT NULL\n, `state` TEXT NOT NULL\n, `settings` TEXT NOT NULL\n, `frequency` INTEGER NOT NULL\n, `handler` INTEGER NOT NULL\n, `severity` TEXT NOT NULL\n, `silenced` INTEGER NOT NULL\n, `execution_error` TEXT NOT NULL\n, `eval_data` TEXT NULL\n, `eval_date` DATETIME NULL\n, `new_state_date` DATETIME NOT NULL\n, `state_changes` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:47.137599294Z level=info msg="Migration successfully executed" id="create alert table v1" duration=1.838012ms
logger=migrator t=2024-08-29T15:36:47.147121732Z level=info msg="Executing migration" id="add index alert org_id & id "
logger=migrator t=2024-08-29T15:36:47.147173736Z level=debug msg="Executing migration condition SQL" id="add index alert org_id & id " sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert IDX_alert_org_id_id]"
logger=migrator t=2024-08-29T15:36:47.147475383Z level=debug msg="Executing sql migration" id="add index alert org_id & id " sql="CREATE INDEX `IDX_alert_org_id_id` ON `alert` (`org_id`,`id`);"
logger=migrator t=2024-08-29T15:36:47.148777563Z level=info msg="Migration successfully executed" id="add index alert org_id & id " duration=1.657005ms
logger=migrator t=2024-08-29T15:36:47.16026312Z level=info msg="Executing migration" id="add index alert state"
logger=migrator t=2024-08-29T15:36:47.160307299Z level=debug msg="Executing migration condition SQL" id="add index alert state" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert IDX_alert_state]"
logger=migrator t=2024-08-29T15:36:47.160652407Z level=debug msg="Executing sql migration" id="add index alert state" sql="CREATE INDEX `IDX_alert_state` ON `alert` (`state`);"
logger=migrator t=2024-08-29T15:36:47.161133475Z level=info msg="Migration successfully executed" id="add index alert state" duration=869.827µs
logger=migrator t=2024-08-29T15:36:47.171493316Z level=info msg="Executing migration" id="add index alert dashboard_id"
logger=migrator t=2024-08-29T15:36:47.171620077Z level=debug msg="Executing migration condition SQL" id="add index alert dashboard_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert IDX_alert_dashboard_id]"
logger=migrator t=2024-08-29T15:36:47.17598661Z level=debug msg="Executing sql migration" id="add index alert dashboard_id" sql="CREATE INDEX `IDX_alert_dashboard_id` ON `alert` (`dashboard_id`);"
logger=migrator t=2024-08-29T15:36:47.176971474Z level=info msg="Migration successfully executed" id="add index alert dashboard_id" duration=5.479501ms
logger=migrator t=2024-08-29T15:36:47.189320327Z level=info msg="Executing migration" id="Create alert_rule_tag table v1"
logger=migrator t=2024-08-29T15:36:47.189629732Z level=debug msg="Executing sql migration" id="Create alert_rule_tag table v1" sql="CREATE TABLE IF NOT EXISTS `alert_rule_tag` (\n`alert_id` INTEGER NOT NULL\n, `tag_id` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:47.190763038Z level=info msg="Migration successfully executed" id="Create alert_rule_tag table v1" duration=1.443188ms
logger=migrator t=2024-08-29T15:36:47.203369339Z level=info msg="Executing migration" id="Add unique index alert_rule_tag.alert_id_tag_id"
logger=migrator t=2024-08-29T15:36:47.203491857Z level=debug msg="Executing migration condition SQL" id="Add unique index alert_rule_tag.alert_id_tag_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule_tag UQE_alert_rule_tag_alert_id_tag_id]"
logger=migrator t=2024-08-29T15:36:47.203854375Z level=debug msg="Executing sql migration" id="Add unique index alert_rule_tag.alert_id_tag_id" sql="CREATE UNIQUE INDEX `UQE_alert_rule_tag_alert_id_tag_id` ON `alert_rule_tag` (`alert_id`,`tag_id`);"
logger=migrator t=2024-08-29T15:36:47.205710313Z level=info msg="Migration successfully executed" id="Add unique index alert_rule_tag.alert_id_tag_id" duration=2.336863ms
logger=migrator t=2024-08-29T15:36:47.219843585Z level=info msg="Executing migration" id="drop index UQE_alert_rule_tag_alert_id_tag_id - v1"
logger=migrator t=2024-08-29T15:36:47.219967405Z level=debug msg="Executing migration condition SQL" id="drop index UQE_alert_rule_tag_alert_id_tag_id - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule_tag UQE_alert_rule_tag_alert_id_tag_id]"
logger=migrator t=2024-08-29T15:36:47.220311373Z level=debug msg="Executing sql migration" id="drop index UQE_alert_rule_tag_alert_id_tag_id - v1" sql="DROP INDEX `UQE_alert_rule_tag_alert_id_tag_id`"
logger=migrator t=2024-08-29T15:36:47.220741742Z level=info msg="Migration successfully executed" id="drop index UQE_alert_rule_tag_alert_id_tag_id - v1" duration=900.074µs
logger=migrator t=2024-08-29T15:36:47.236420461Z level=info msg="Executing migration" id="Rename table alert_rule_tag to alert_rule_tag_v1 - v1"
logger=migrator t=2024-08-29T15:36:47.236666669Z level=debug msg="Executing sql migration" id="Rename table alert_rule_tag to alert_rule_tag_v1 - v1" sql="ALTER TABLE `alert_rule_tag` RENAME TO `alert_rule_tag_v1`"
logger=migrator t=2024-08-29T15:36:47.247461478Z level=info msg="Migration successfully executed" id="Rename table alert_rule_tag to alert_rule_tag_v1 - v1" duration=11.038184ms
logger=migrator t=2024-08-29T15:36:47.262802326Z level=info msg="Executing migration" id="Create alert_rule_tag table v2"
logger=migrator t=2024-08-29T15:36:47.26284716Z level=debug msg="Executing sql migration" id="Create alert_rule_tag table v2" sql="CREATE TABLE IF NOT EXISTS `alert_rule_tag` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `alert_id` INTEGER NOT NULL\n, `tag_id` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:47.268626308Z level=info msg="Migration successfully executed" id="Create alert_rule_tag table v2" duration=5.821422ms
logger=migrator t=2024-08-29T15:36:47.278775654Z level=info msg="Executing migration" id="create index UQE_alert_rule_tag_alert_id_tag_id - Add unique index alert_rule_tag.alert_id_tag_id V2"
logger=migrator t=2024-08-29T15:36:47.278911282Z level=debug msg="Executing migration condition SQL" id="create index UQE_alert_rule_tag_alert_id_tag_id - Add unique index alert_rule_tag.alert_id_tag_id V2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule_tag UQE_alert_rule_tag_alert_id_tag_id]"
logger=migrator t=2024-08-29T15:36:47.279555956Z level=debug msg="Executing sql migration" id="create index UQE_alert_rule_tag_alert_id_tag_id - Add unique index alert_rule_tag.alert_id_tag_id V2" sql="CREATE UNIQUE INDEX `UQE_alert_rule_tag_alert_id_tag_id` ON `alert_rule_tag` (`alert_id`,`tag_id`);"
logger=migrator t=2024-08-29T15:36:47.281562719Z level=info msg="Migration successfully executed" id="create index UQE_alert_rule_tag_alert_id_tag_id - Add unique index alert_rule_tag.alert_id_tag_id V2" duration=2.788256ms
logger=migrator t=2024-08-29T15:36:47.296022688Z level=info msg="Executing migration" id="copy alert_rule_tag v1 to v2"
logger=migrator t=2024-08-29T15:36:47.296139573Z level=debug msg="Executing sql migration" id="copy alert_rule_tag v1 to v2" sql="INSERT INTO `alert_rule_tag` (`alert_id`\n, `tag_id`) SELECT `alert_id`\n, `tag_id` FROM `alert_rule_tag_v1`"
logger=migrator t=2024-08-29T15:36:47.300968103Z level=info msg="Migration successfully executed" id="copy alert_rule_tag v1 to v2" duration=4.939365ms
logger=migrator t=2024-08-29T15:36:47.316024092Z level=info msg="Executing migration" id="drop table alert_rule_tag_v1"
logger=migrator t=2024-08-29T15:36:47.316503231Z level=debug msg="Executing sql migration" id="drop table alert_rule_tag_v1" sql="DROP TABLE IF EXISTS `alert_rule_tag_v1`"
logger=migrator t=2024-08-29T15:36:47.317320109Z level=info msg="Migration successfully executed" id="drop table alert_rule_tag_v1" duration=1.293153ms
logger=migrator t=2024-08-29T15:36:47.360178569Z level=info msg="Executing migration" id="create alert_notification table v1"
logger=migrator t=2024-08-29T15:36:47.360231165Z level=debug msg="Executing sql migration" id="create alert_notification table v1" sql="CREATE TABLE IF NOT EXISTS `alert_notification` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `name` TEXT NOT NULL\n, `type` TEXT NOT NULL\n, `settings` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:47.361474689Z level=info msg="Migration successfully executed" id="create alert_notification table v1" duration=1.300616ms
logger=migrator t=2024-08-29T15:36:47.385625898Z level=info msg="Executing migration" id="Add column is_default"
logger=migrator t=2024-08-29T15:36:47.385677044Z level=debug msg="Executing sql migration" id="Add column is_default" sql="alter table `alert_notification` ADD COLUMN `is_default` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:47.40794794Z level=info msg="Migration successfully executed" id="Add column is_default" duration=22.319855ms
logger=migrator t=2024-08-29T15:36:47.429663194Z level=info msg="Executing migration" id="Add column frequency"
logger=migrator t=2024-08-29T15:36:47.429714665Z level=debug msg="Executing sql migration" id="Add column frequency" sql="alter table `alert_notification` ADD COLUMN `frequency` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:47.439871238Z level=info msg="Migration successfully executed" id="Add column frequency" duration=10.205494ms
logger=migrator t=2024-08-29T15:36:47.466464291Z level=info msg="Executing migration" id="Add column send_reminder"
logger=migrator t=2024-08-29T15:36:47.466940986Z level=debug msg="Executing sql migration" id="Add column send_reminder" sql="alter table `alert_notification` ADD COLUMN `send_reminder` INTEGER NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:47.474059536Z level=info msg="Migration successfully executed" id="Add column send_reminder" duration=7.593676ms
logger=migrator t=2024-08-29T15:36:47.512944028Z level=info msg="Executing migration" id="Add column disable_resolve_message"
logger=migrator t=2024-08-29T15:36:47.515906991Z level=debug msg="Executing sql migration" id="Add column disable_resolve_message" sql="alter table `alert_notification` ADD COLUMN `disable_resolve_message` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:47.522266214Z level=info msg="Migration successfully executed" id="Add column disable_resolve_message" duration=9.320005ms
logger=migrator t=2024-08-29T15:36:47.543864775Z level=info msg="Executing migration" id="add index alert_notification org_id & name"
logger=migrator t=2024-08-29T15:36:47.543992109Z level=debug msg="Executing migration condition SQL" id="add index alert_notification org_id & name" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_notification UQE_alert_notification_org_id_name]"
logger=migrator t=2024-08-29T15:36:47.550786945Z level=debug msg="Executing sql migration" id="add index alert_notification org_id & name" sql="CREATE UNIQUE INDEX `UQE_alert_notification_org_id_name` ON `alert_notification` (`org_id`,`name`);"
logger=migrator t=2024-08-29T15:36:47.556642872Z level=info msg="Migration successfully executed" id="add index alert_notification org_id & name" duration=12.778137ms
logger=migrator t=2024-08-29T15:36:47.582374746Z level=info msg="Executing migration" id="Update alert table charset"
logger=migrator t=2024-08-29T15:36:47.582558762Z level=debug msg="Executing sql migration" id="Update alert table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:47.58344442Z level=info msg="Migration successfully executed" id="Update alert table charset" duration=1.071092ms
logger=migrator t=2024-08-29T15:36:47.595859822Z level=info msg="Executing migration" id="Update alert_notification table charset"
logger=migrator t=2024-08-29T15:36:47.596041999Z level=debug msg="Executing sql migration" id="Update alert_notification table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:47.596089101Z level=info msg="Migration successfully executed" id="Update alert_notification table charset" duration=233.229µs
logger=migrator t=2024-08-29T15:36:47.606150466Z level=info msg="Executing migration" id="create notification_journal table v1"
logger=migrator t=2024-08-29T15:36:47.606401017Z level=debug msg="Executing sql migration" id="create notification_journal table v1" sql="CREATE TABLE IF NOT EXISTS `alert_notification_journal` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `alert_id` INTEGER NOT NULL\n, `notifier_id` INTEGER NOT NULL\n, `sent_at` INTEGER NOT NULL\n, `success` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:47.608435102Z level=info msg="Migration successfully executed" id="create notification_journal table v1" duration=2.284944ms
logger=migrator t=2024-08-29T15:36:47.620013472Z level=info msg="Executing migration" id="add index notification_journal org_id & alert_id & notifier_id"
logger=migrator t=2024-08-29T15:36:47.620196113Z level=debug msg="Executing migration condition SQL" id="add index notification_journal org_id & alert_id & notifier_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_notification_journal IDX_alert_notification_journal_org_id_alert_id_notifier_id]"
logger=migrator t=2024-08-29T15:36:47.620858147Z level=debug msg="Executing sql migration" id="add index notification_journal org_id & alert_id & notifier_id" sql="CREATE INDEX `IDX_alert_notification_journal_org_id_alert_id_notifier_id` ON `alert_notification_journal` (`org_id`,`alert_id`,`notifier_id`);"
logger=migrator t=2024-08-29T15:36:47.621458122Z level=info msg="Migration successfully executed" id="add index notification_journal org_id & alert_id & notifier_id" duration=1.446687ms
logger=migrator t=2024-08-29T15:36:47.642404578Z level=info msg="Executing migration" id="drop alert_notification_journal"
logger=migrator t=2024-08-29T15:36:47.642838978Z level=debug msg="Executing sql migration" id="drop alert_notification_journal" sql="DROP TABLE IF EXISTS `alert_notification_journal`"
logger=migrator t=2024-08-29T15:36:47.645846237Z level=info msg="Migration successfully executed" id="drop alert_notification_journal" duration=3.445343ms
logger=migrator t=2024-08-29T15:36:47.664495829Z level=info msg="Executing migration" id="create alert_notification_state table v1"
logger=migrator t=2024-08-29T15:36:47.66460661Z level=debug msg="Executing sql migration" id="create alert_notification_state table v1" sql="CREATE TABLE IF NOT EXISTS `alert_notification_state` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `alert_id` INTEGER NOT NULL\n, `notifier_id` INTEGER NOT NULL\n, `state` TEXT NOT NULL\n, `version` INTEGER NOT NULL\n, `updated_at` INTEGER NOT NULL\n, `alert_rule_state_updated_version` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:47.666230906Z level=info msg="Migration successfully executed" id="create alert_notification_state table v1" duration=1.737219ms
logger=migrator t=2024-08-29T15:36:47.680108239Z level=info msg="Executing migration" id="add index alert_notification_state org_id & alert_id & notifier_id"
logger=migrator t=2024-08-29T15:36:47.680629994Z level=debug msg="Executing migration condition SQL" id="add index alert_notification_state org_id & alert_id & notifier_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_notification_state UQE_alert_notification_state_org_id_alert_id_notifier_id]"
logger=migrator t=2024-08-29T15:36:47.681116317Z level=debug msg="Executing sql migration" id="add index alert_notification_state org_id & alert_id & notifier_id" sql="CREATE UNIQUE INDEX `UQE_alert_notification_state_org_id_alert_id_notifier_id` ON `alert_notification_state` (`org_id`,`alert_id`,`notifier_id`);"
logger=migrator t=2024-08-29T15:36:47.684422256Z level=info msg="Migration successfully executed" id="add index alert_notification_state org_id & alert_id & notifier_id" duration=4.313576ms
logger=migrator t=2024-08-29T15:36:47.710352102Z level=info msg="Executing migration" id="Add for to alert table"
logger=migrator t=2024-08-29T15:36:47.710630907Z level=debug msg="Executing sql migration" id="Add for to alert table" sql="alter table `alert` ADD COLUMN `for` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:47.716803386Z level=info msg="Migration successfully executed" id="Add for to alert table" duration=6.449552ms
logger=migrator t=2024-08-29T15:36:47.733799081Z level=info msg="Executing migration" id="Add column uid in alert_notification"
logger=migrator t=2024-08-29T15:36:47.733851372Z level=debug msg="Executing sql migration" id="Add column uid in alert_notification" sql="alter table `alert_notification` ADD COLUMN `uid` TEXT NULL "
logger=migrator t=2024-08-29T15:36:47.736926422Z level=info msg="Migration successfully executed" id="Add column uid in alert_notification" duration=3.126396ms
logger=migrator t=2024-08-29T15:36:47.747217209Z level=info msg="Executing migration" id="Update uid column values in alert_notification"
logger=migrator t=2024-08-29T15:36:47.747492862Z level=debug msg="Executing sql migration" id="Update uid column values in alert_notification" sql="UPDATE alert_notification SET uid=printf('%09d',id) WHERE uid IS NULL;"
logger=migrator t=2024-08-29T15:36:47.748040524Z level=info msg="Migration successfully executed" id="Update uid column values in alert_notification" duration=826.046µs
logger=migrator t=2024-08-29T15:36:47.758001113Z level=info msg="Executing migration" id="Add unique index alert_notification_org_id_uid"
logger=migrator t=2024-08-29T15:36:47.758300233Z level=debug msg="Executing migration condition SQL" id="Add unique index alert_notification_org_id_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_notification UQE_alert_notification_org_id_uid]"
logger=migrator t=2024-08-29T15:36:47.759091632Z level=debug msg="Executing sql migration" id="Add unique index alert_notification_org_id_uid" sql="CREATE UNIQUE INDEX `UQE_alert_notification_org_id_uid` ON `alert_notification` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:47.75972156Z level=info msg="Migration successfully executed" id="Add unique index alert_notification_org_id_uid" duration=1.718159ms
logger=migrator t=2024-08-29T15:36:47.790821203Z level=info msg="Executing migration" id="Remove unique index org_id_name"
logger=migrator t=2024-08-29T15:36:47.791104892Z level=debug msg="Executing migration condition SQL" id="Remove unique index org_id_name" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_notification UQE_alert_notification_org_id_name]"
logger=migrator t=2024-08-29T15:36:47.791891687Z level=debug msg="Executing sql migration" id="Remove unique index org_id_name" sql="DROP INDEX `UQE_alert_notification_org_id_name`"
logger=migrator t=2024-08-29T15:36:47.792458689Z level=info msg="Migration successfully executed" id="Remove unique index org_id_name" duration=1.640605ms
logger=migrator t=2024-08-29T15:36:47.801830307Z level=info msg="Executing migration" id="Add column secure_settings in alert_notification"
logger=migrator t=2024-08-29T15:36:47.80209331Z level=debug msg="Executing sql migration" id="Add column secure_settings in alert_notification" sql="alter table `alert_notification` ADD COLUMN `secure_settings` TEXT NULL "
logger=migrator t=2024-08-29T15:36:47.805583724Z level=info msg="Migration successfully executed" id="Add column secure_settings in alert_notification" duration=3.750622ms
logger=migrator t=2024-08-29T15:36:47.818595975Z level=info msg="Executing migration" id="alter alert.settings to mediumtext"
logger=migrator t=2024-08-29T15:36:47.818866426Z level=debug msg="Executing sql migration" id="alter alert.settings to mediumtext" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:47.818957872Z level=info msg="Migration successfully executed" id="alter alert.settings to mediumtext" duration=365.509µs
logger=migrator t=2024-08-29T15:36:47.829698629Z level=info msg="Executing migration" id="Add non-unique index alert_notification_state_alert_id"
logger=migrator t=2024-08-29T15:36:47.829819837Z level=debug msg="Executing migration condition SQL" id="Add non-unique index alert_notification_state_alert_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_notification_state IDX_alert_notification_state_alert_id]"
logger=migrator t=2024-08-29T15:36:47.832339203Z level=debug msg="Executing sql migration" id="Add non-unique index alert_notification_state_alert_id" sql="CREATE INDEX `IDX_alert_notification_state_alert_id` ON `alert_notification_state` (`alert_id`);"
logger=migrator t=2024-08-29T15:36:47.83345873Z level=info msg="Migration successfully executed" id="Add non-unique index alert_notification_state_alert_id" duration=3.762554ms
logger=migrator t=2024-08-29T15:36:47.842628533Z level=info msg="Executing migration" id="Add non-unique index alert_rule_tag_alert_id"
logger=migrator t=2024-08-29T15:36:47.843020998Z level=debug msg="Executing migration condition SQL" id="Add non-unique index alert_rule_tag_alert_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule_tag IDX_alert_rule_tag_alert_id]"
logger=migrator t=2024-08-29T15:36:47.843734327Z level=debug msg="Executing sql migration" id="Add non-unique index alert_rule_tag_alert_id" sql="CREATE INDEX `IDX_alert_rule_tag_alert_id` ON `alert_rule_tag` (`alert_id`);"
logger=migrator t=2024-08-29T15:36:47.845157805Z level=info msg="Migration successfully executed" id="Add non-unique index alert_rule_tag_alert_id" duration=2.532ms
logger=migrator t=2024-08-29T15:36:47.855435447Z level=info msg="Executing migration" id="Drop old annotation table v4"
logger=migrator t=2024-08-29T15:36:47.856283536Z level=debug msg="Executing sql migration" id="Drop old annotation table v4" sql="DROP TABLE IF EXISTS `annotation`"
logger=migrator t=2024-08-29T15:36:47.856418522Z level=info msg="Migration successfully executed" id="Drop old annotation table v4" duration=986.336µs
logger=migrator t=2024-08-29T15:36:47.86567351Z level=info msg="Executing migration" id="create annotation table v5"
logger=migrator t=2024-08-29T15:36:47.865808253Z level=debug msg="Executing sql migration" id="create annotation table v5" sql="CREATE TABLE IF NOT EXISTS `annotation` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `alert_id` INTEGER NULL\n, `user_id` INTEGER NULL\n, `dashboard_id` INTEGER NULL\n, `panel_id` INTEGER NULL\n, `category_id` INTEGER NULL\n, `type` TEXT NOT NULL\n, `title` TEXT NOT NULL\n, `text` TEXT NOT NULL\n, `metric` TEXT NULL\n, `prev_state` TEXT NOT NULL\n, `new_state` TEXT NOT NULL\n, `data` TEXT NOT NULL\n, `epoch` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:47.867899106Z level=info msg="Migration successfully executed" id="create annotation table v5" duration=2.22809ms
logger=migrator t=2024-08-29T15:36:47.877656426Z level=info msg="Executing migration" id="add index annotation 0 v3"
logger=migrator t=2024-08-29T15:36:47.877784295Z level=debug msg="Executing migration condition SQL" id="add index annotation 0 v3" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_alert_id]"
logger=migrator t=2024-08-29T15:36:47.879657289Z level=debug msg="Executing sql migration" id="add index annotation 0 v3" sql="CREATE INDEX `IDX_annotation_org_id_alert_id` ON `annotation` (`org_id`,`alert_id`);"
logger=migrator t=2024-08-29T15:36:47.8809907Z level=info msg="Migration successfully executed" id="add index annotation 0 v3" duration=3.335833ms
logger=migrator t=2024-08-29T15:36:47.890752932Z level=info msg="Executing migration" id="add index annotation 1 v3"
logger=migrator t=2024-08-29T15:36:47.89088956Z level=debug msg="Executing migration condition SQL" id="add index annotation 1 v3" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_type]"
logger=migrator t=2024-08-29T15:36:47.891721177Z level=debug msg="Executing sql migration" id="add index annotation 1 v3" sql="CREATE INDEX `IDX_annotation_org_id_type` ON `annotation` (`org_id`,`type`);"
logger=migrator t=2024-08-29T15:36:47.892326218Z level=info msg="Migration successfully executed" id="add index annotation 1 v3" duration=1.573778ms
logger=migrator t=2024-08-29T15:36:47.907434644Z level=info msg="Executing migration" id="add index annotation 2 v3"
logger=migrator t=2024-08-29T15:36:47.907493572Z level=debug msg="Executing migration condition SQL" id="add index annotation 2 v3" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_category_id]"
logger=migrator t=2024-08-29T15:36:47.907856285Z level=debug msg="Executing sql migration" id="add index annotation 2 v3" sql="CREATE INDEX `IDX_annotation_org_id_category_id` ON `annotation` (`org_id`,`category_id`);"
logger=migrator t=2024-08-29T15:36:47.90841523Z level=info msg="Migration successfully executed" id="add index annotation 2 v3" duration=982.776µs
logger=migrator t=2024-08-29T15:36:47.924859776Z level=info msg="Executing migration" id="add index annotation 3 v3"
logger=migrator t=2024-08-29T15:36:47.92515533Z level=debug msg="Executing migration condition SQL" id="add index annotation 3 v3" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_dashboard_id_panel_id_epoch]"
logger=migrator t=2024-08-29T15:36:47.925883626Z level=debug msg="Executing sql migration" id="add index annotation 3 v3" sql="CREATE INDEX `IDX_annotation_org_id_dashboard_id_panel_id_epoch` ON `annotation` (`org_id`,`dashboard_id`,`panel_id`,`epoch`);"
logger=migrator t=2024-08-29T15:36:47.940198001Z level=info msg="Migration successfully executed" id="add index annotation 3 v3" duration=15.331731ms
logger=migrator t=2024-08-29T15:36:47.95584718Z level=info msg="Executing migration" id="add index annotation 4 v3"
logger=migrator t=2024-08-29T15:36:47.956289975Z level=debug msg="Executing migration condition SQL" id="add index annotation 4 v3" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_epoch]"
logger=migrator t=2024-08-29T15:36:47.959385808Z level=debug msg="Executing sql migration" id="add index annotation 4 v3" sql="CREATE INDEX `IDX_annotation_org_id_epoch` ON `annotation` (`org_id`,`epoch`);"
logger=migrator t=2024-08-29T15:36:47.960862215Z level=info msg="Migration successfully executed" id="add index annotation 4 v3" duration=5.003777ms
logger=migrator t=2024-08-29T15:36:47.97618772Z level=info msg="Executing migration" id="Update annotation table charset"
logger=migrator t=2024-08-29T15:36:47.976519105Z level=debug msg="Executing sql migration" id="Update annotation table charset" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:47.976555366Z level=info msg="Migration successfully executed" id="Update annotation table charset" duration=376.58µs
logger=migrator t=2024-08-29T15:36:47.987096112Z level=info msg="Executing migration" id="Add column region_id to annotation table"
logger=migrator t=2024-08-29T15:36:47.987213329Z level=debug msg="Executing sql migration" id="Add column region_id to annotation table" sql="alter table `annotation` ADD COLUMN `region_id` INTEGER NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:47.992236348Z level=info msg="Migration successfully executed" id="Add column region_id to annotation table" duration=5.138315ms
logger=migrator t=2024-08-29T15:36:48.005660781Z level=info msg="Executing migration" id="Drop category_id index"
logger=migrator t=2024-08-29T15:36:48.005779483Z level=debug msg="Executing migration condition SQL" id="Drop category_id index" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_category_id]"
logger=migrator t=2024-08-29T15:36:48.007403298Z level=debug msg="Executing sql migration" id="Drop category_id index" sql="DROP INDEX `IDX_annotation_org_id_category_id`"
logger=migrator t=2024-08-29T15:36:48.009363511Z level=info msg="Migration successfully executed" id="Drop category_id index" duration=3.704164ms
logger=migrator t=2024-08-29T15:36:48.020764957Z level=info msg="Executing migration" id="Add column tags to annotation table"
logger=migrator t=2024-08-29T15:36:48.020882217Z level=debug msg="Executing sql migration" id="Add column tags to annotation table" sql="alter table `annotation` ADD COLUMN `tags` TEXT NULL "
logger=migrator t=2024-08-29T15:36:48.02734884Z level=info msg="Migration successfully executed" id="Add column tags to annotation table" duration=6.581201ms
logger=migrator t=2024-08-29T15:36:48.042459262Z level=info msg="Executing migration" id="Create annotation_tag table v2"
logger=migrator t=2024-08-29T15:36:48.04286793Z level=debug msg="Executing sql migration" id="Create annotation_tag table v2" sql="CREATE TABLE IF NOT EXISTS `annotation_tag` (\n`annotation_id` INTEGER NOT NULL\n, `tag_id` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:48.044270787Z level=info msg="Migration successfully executed" id="Create annotation_tag table v2" duration=1.812232ms
logger=migrator t=2024-08-29T15:36:48.062776802Z level=info msg="Executing migration" id="Add unique index annotation_tag.annotation_id_tag_id"
logger=migrator t=2024-08-29T15:36:48.063952182Z level=debug msg="Executing migration condition SQL" id="Add unique index annotation_tag.annotation_id_tag_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation_tag UQE_annotation_tag_annotation_id_tag_id]"
logger=migrator t=2024-08-29T15:36:48.065927822Z level=debug msg="Executing sql migration" id="Add unique index annotation_tag.annotation_id_tag_id" sql="CREATE UNIQUE INDEX `UQE_annotation_tag_annotation_id_tag_id` ON `annotation_tag` (`annotation_id`,`tag_id`);"
logger=migrator t=2024-08-29T15:36:48.066842711Z level=info msg="Migration successfully executed" id="Add unique index annotation_tag.annotation_id_tag_id" duration=4.066411ms
logger=migrator t=2024-08-29T15:36:48.090064232Z level=info msg="Executing migration" id="drop index UQE_annotation_tag_annotation_id_tag_id - v2"
logger=migrator t=2024-08-29T15:36:48.090615187Z level=debug msg="Executing migration condition SQL" id="drop index UQE_annotation_tag_annotation_id_tag_id - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation_tag UQE_annotation_tag_annotation_id_tag_id]"
logger=migrator t=2024-08-29T15:36:48.091830467Z level=debug msg="Executing sql migration" id="drop index UQE_annotation_tag_annotation_id_tag_id - v2" sql="DROP INDEX `UQE_annotation_tag_annotation_id_tag_id`"
logger=migrator t=2024-08-29T15:36:48.094388141Z level=info msg="Migration successfully executed" id="drop index UQE_annotation_tag_annotation_id_tag_id - v2" duration=4.327564ms
logger=migrator t=2024-08-29T15:36:48.109197803Z level=info msg="Executing migration" id="Rename table annotation_tag to annotation_tag_v2 - v2"
logger=migrator t=2024-08-29T15:36:48.109305039Z level=debug msg="Executing sql migration" id="Rename table annotation_tag to annotation_tag_v2 - v2" sql="ALTER TABLE `annotation_tag` RENAME TO `annotation_tag_v2`"
logger=migrator t=2024-08-29T15:36:48.129082188Z level=info msg="Migration successfully executed" id="Rename table annotation_tag to annotation_tag_v2 - v2" duration=19.873573ms
logger=migrator t=2024-08-29T15:36:48.145114476Z level=info msg="Executing migration" id="Create annotation_tag table v3"
logger=migrator t=2024-08-29T15:36:48.145238913Z level=debug msg="Executing sql migration" id="Create annotation_tag table v3" sql="CREATE TABLE IF NOT EXISTS `annotation_tag` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `annotation_id` INTEGER NOT NULL\n, `tag_id` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:48.146937406Z level=info msg="Migration successfully executed" id="Create annotation_tag table v3" duration=1.824014ms
logger=migrator t=2024-08-29T15:36:48.160848337Z level=info msg="Executing migration" id="create index UQE_annotation_tag_annotation_id_tag_id - Add unique index annotation_tag.annotation_id_tag_id V3"
logger=migrator t=2024-08-29T15:36:48.16137894Z level=debug msg="Executing migration condition SQL" id="create index UQE_annotation_tag_annotation_id_tag_id - Add unique index annotation_tag.annotation_id_tag_id V3" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation_tag UQE_annotation_tag_annotation_id_tag_id]"
logger=migrator t=2024-08-29T15:36:48.16400758Z level=debug msg="Executing sql migration" id="create index UQE_annotation_tag_annotation_id_tag_id - Add unique index annotation_tag.annotation_id_tag_id V3" sql="CREATE UNIQUE INDEX `UQE_annotation_tag_annotation_id_tag_id` ON `annotation_tag` (`annotation_id`,`tag_id`);"
logger=migrator t=2024-08-29T15:36:48.165027198Z level=info msg="Migration successfully executed" id="create index UQE_annotation_tag_annotation_id_tag_id - Add unique index annotation_tag.annotation_id_tag_id V3" duration=4.180381ms
logger=migrator t=2024-08-29T15:36:48.181282475Z level=info msg="Executing migration" id="copy annotation_tag v2 to v3"
logger=migrator t=2024-08-29T15:36:48.182954898Z level=debug msg="Executing sql migration" id="copy annotation_tag v2 to v3" sql="INSERT INTO `annotation_tag` (`annotation_id`\n, `tag_id`) SELECT `annotation_id`\n, `tag_id` FROM `annotation_tag_v2`"
logger=migrator t=2024-08-29T15:36:48.183791899Z level=info msg="Migration successfully executed" id="copy annotation_tag v2 to v3" duration=2.510886ms
logger=migrator t=2024-08-29T15:36:48.238502043Z level=info msg="Executing migration" id="drop table annotation_tag_v2"
logger=migrator t=2024-08-29T15:36:48.238617018Z level=debug msg="Executing sql migration" id="drop table annotation_tag_v2" sql="DROP TABLE IF EXISTS `annotation_tag_v2`"
logger=migrator t=2024-08-29T15:36:48.239754342Z level=info msg="Migration successfully executed" id="drop table annotation_tag_v2" duration=1.253731ms
logger=migrator t=2024-08-29T15:36:48.263878411Z level=info msg="Executing migration" id="Update alert annotations and set TEXT to empty"
logger=migrator t=2024-08-29T15:36:48.264316907Z level=debug msg="Executing sql migration" id="Update alert annotations and set TEXT to empty" sql="UPDATE annotation SET TEXT = '' WHERE alert_id > 0"
logger=migrator t=2024-08-29T15:36:48.26650165Z level=info msg="Migration successfully executed" id="Update alert annotations and set TEXT to empty" duration=2.623874ms
logger=migrator t=2024-08-29T15:36:48.287184645Z level=info msg="Executing migration" id="Add created time to annotation table"
logger=migrator t=2024-08-29T15:36:48.287325099Z level=debug msg="Executing sql migration" id="Add created time to annotation table" sql="alter table `annotation` ADD COLUMN `created` INTEGER NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:48.294588723Z level=info msg="Migration successfully executed" id="Add created time to annotation table" duration=7.969723ms
logger=migrator t=2024-08-29T15:36:48.311637537Z level=info msg="Executing migration" id="Add updated time to annotation table"
logger=migrator t=2024-08-29T15:36:48.311777895Z level=debug msg="Executing sql migration" id="Add updated time to annotation table" sql="alter table `annotation` ADD COLUMN `updated` INTEGER NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:48.318867485Z level=info msg="Migration successfully executed" id="Add updated time to annotation table" duration=7.227365ms
logger=migrator t=2024-08-29T15:36:48.334204577Z level=info msg="Executing migration" id="Add index for created in annotation table"
logger=migrator t=2024-08-29T15:36:48.335479236Z level=debug msg="Executing migration condition SQL" id="Add index for created in annotation table" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_created]"
logger=migrator t=2024-08-29T15:36:48.336242906Z level=debug msg="Executing sql migration" id="Add index for created in annotation table" sql="CREATE INDEX `IDX_annotation_org_id_created` ON `annotation` (`org_id`,`created`);"
logger=migrator t=2024-08-29T15:36:48.342718291Z level=info msg="Migration successfully executed" id="Add index for created in annotation table" duration=8.510562ms
logger=migrator t=2024-08-29T15:36:48.356696603Z level=info msg="Executing migration" id="Add index for updated in annotation table"
logger=migrator t=2024-08-29T15:36:48.356855718Z level=debug msg="Executing migration condition SQL" id="Add index for updated in annotation table" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_updated]"
logger=migrator t=2024-08-29T15:36:48.357425257Z level=debug msg="Executing sql migration" id="Add index for updated in annotation table" sql="CREATE INDEX `IDX_annotation_org_id_updated` ON `annotation` (`org_id`,`updated`);"
logger=migrator t=2024-08-29T15:36:48.359477636Z level=info msg="Migration successfully executed" id="Add index for updated in annotation table" duration=2.78199ms
logger=migrator t=2024-08-29T15:36:48.374730791Z level=info msg="Executing migration" id="Convert existing annotations from seconds to milliseconds"
logger=migrator t=2024-08-29T15:36:48.3748496Z level=debug msg="Executing sql migration" id="Convert existing annotations from seconds to milliseconds" sql="UPDATE annotation SET epoch = (epoch*1000) where epoch < 9999999999"
logger=migrator t=2024-08-29T15:36:48.377255116Z level=info msg="Migration successfully executed" id="Convert existing annotations from seconds to milliseconds" duration=2.522708ms
logger=migrator t=2024-08-29T15:36:48.394324061Z level=info msg="Executing migration" id="Add epoch_end column"
logger=migrator t=2024-08-29T15:36:48.394517848Z level=debug msg="Executing sql migration" id="Add epoch_end column" sql="alter table `annotation` ADD COLUMN `epoch_end` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:48.413402556Z level=info msg="Migration successfully executed" id="Add epoch_end column" duration=19.076723ms
logger=migrator t=2024-08-29T15:36:48.430636534Z level=info msg="Executing migration" id="Add index for epoch_end"
logger=migrator t=2024-08-29T15:36:48.430765264Z level=debug msg="Executing migration condition SQL" id="Add index for epoch_end" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_epoch_epoch_end]"
logger=migrator t=2024-08-29T15:36:48.431496596Z level=debug msg="Executing sql migration" id="Add index for epoch_end" sql="CREATE INDEX `IDX_annotation_org_id_epoch_epoch_end` ON `annotation` (`org_id`,`epoch`,`epoch_end`);"
logger=migrator t=2024-08-29T15:36:48.432754926Z level=info msg="Migration successfully executed" id="Add index for epoch_end" duration=2.116719ms
logger=migrator t=2024-08-29T15:36:48.44585405Z level=info msg="Executing migration" id="Make epoch_end the same as epoch"
logger=migrator t=2024-08-29T15:36:48.446006074Z level=debug msg="Executing sql migration" id="Make epoch_end the same as epoch" sql="UPDATE annotation SET epoch_end = epoch"
logger=migrator t=2024-08-29T15:36:48.446670646Z level=info msg="Migration successfully executed" id="Make epoch_end the same as epoch" duration=819.286µs
logger=migrator t=2024-08-29T15:36:48.460746958Z level=info msg="Executing migration" id="Move region to single row"
logger=migrator t=2024-08-29T15:36:48.462335234Z level=debug msg="Executing code migration" id="Move region to single row"
logger=migrator t=2024-08-29T15:36:48.464443933Z level=info msg="Migration successfully executed" id="Move region to single row" duration=3.697091ms
logger=migrator t=2024-08-29T15:36:48.476292778Z level=info msg="Executing migration" id="Remove index org_id_epoch from annotation table"
logger=migrator t=2024-08-29T15:36:48.476450846Z level=debug msg="Executing migration condition SQL" id="Remove index org_id_epoch from annotation table" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_epoch]"
logger=migrator t=2024-08-29T15:36:48.4784626Z level=debug msg="Executing sql migration" id="Remove index org_id_epoch from annotation table" sql="DROP INDEX `IDX_annotation_org_id_epoch`"
logger=migrator t=2024-08-29T15:36:48.480650049Z level=info msg="Migration successfully executed" id="Remove index org_id_epoch from annotation table" duration=4.347646ms
logger=migrator t=2024-08-29T15:36:48.495750489Z level=info msg="Executing migration" id="Remove index org_id_dashboard_id_panel_id_epoch from annotation table"
logger=migrator t=2024-08-29T15:36:48.495894193Z level=debug msg="Executing migration condition SQL" id="Remove index org_id_dashboard_id_panel_id_epoch from annotation table" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_dashboard_id_panel_id_epoch]"
logger=migrator t=2024-08-29T15:36:48.496841653Z level=debug msg="Executing sql migration" id="Remove index org_id_dashboard_id_panel_id_epoch from annotation table" sql="DROP INDEX `IDX_annotation_org_id_dashboard_id_panel_id_epoch`"
logger=migrator t=2024-08-29T15:36:48.499801084Z level=info msg="Migration successfully executed" id="Remove index org_id_dashboard_id_panel_id_epoch from annotation table" duration=4.045008ms
logger=migrator t=2024-08-29T15:36:48.513860766Z level=info msg="Executing migration" id="Add index for org_id_dashboard_id_epoch_end_epoch on annotation table"
logger=migrator t=2024-08-29T15:36:48.51472839Z level=debug msg="Executing migration condition SQL" id="Add index for org_id_dashboard_id_epoch_end_epoch on annotation table" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_dashboard_id_epoch_end_epoch]"
logger=migrator t=2024-08-29T15:36:48.516822503Z level=debug msg="Executing sql migration" id="Add index for org_id_dashboard_id_epoch_end_epoch on annotation table" sql="CREATE INDEX `IDX_annotation_org_id_dashboard_id_epoch_end_epoch` ON `annotation` (`org_id`,`dashboard_id`,`epoch_end`,`epoch`);"
logger=migrator t=2024-08-29T15:36:48.518514005Z level=info msg="Migration successfully executed" id="Add index for org_id_dashboard_id_epoch_end_epoch on annotation table" duration=4.650313ms
logger=migrator t=2024-08-29T15:36:48.534264717Z level=info msg="Executing migration" id="Add index for org_id_epoch_end_epoch on annotation table"
logger=migrator t=2024-08-29T15:36:48.535375193Z level=debug msg="Executing migration condition SQL" id="Add index for org_id_epoch_end_epoch on annotation table" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_epoch_end_epoch]"
logger=migrator t=2024-08-29T15:36:48.537629113Z level=debug msg="Executing sql migration" id="Add index for org_id_epoch_end_epoch on annotation table" sql="CREATE INDEX `IDX_annotation_org_id_epoch_end_epoch` ON `annotation` (`org_id`,`epoch_end`,`epoch`);"
logger=migrator t=2024-08-29T15:36:48.540613811Z level=info msg="Migration successfully executed" id="Add index for org_id_epoch_end_epoch on annotation table" duration=6.353194ms
logger=migrator t=2024-08-29T15:36:48.562366803Z level=info msg="Executing migration" id="Remove index org_id_epoch_epoch_end from annotation table"
logger=migrator t=2024-08-29T15:36:48.562502421Z level=debug msg="Executing migration condition SQL" id="Remove index org_id_epoch_epoch_end from annotation table" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_org_id_epoch_epoch_end]"
logger=migrator t=2024-08-29T15:36:48.564501001Z level=debug msg="Executing sql migration" id="Remove index org_id_epoch_epoch_end from annotation table" sql="DROP INDEX `IDX_annotation_org_id_epoch_epoch_end`"
logger=migrator t=2024-08-29T15:36:48.571323961Z level=info msg="Migration successfully executed" id="Remove index org_id_epoch_epoch_end from annotation table" duration=8.956349ms
logger=migrator t=2024-08-29T15:36:48.591508214Z level=info msg="Executing migration" id="Add index for alert_id on annotation table"
logger=migrator t=2024-08-29T15:36:48.591705089Z level=debug msg="Executing migration condition SQL" id="Add index for alert_id on annotation table" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[annotation IDX_annotation_alert_id]"
logger=migrator t=2024-08-29T15:36:48.595719468Z level=debug msg="Executing sql migration" id="Add index for alert_id on annotation table" sql="CREATE INDEX `IDX_annotation_alert_id` ON `annotation` (`alert_id`);"
logger=migrator t=2024-08-29T15:36:48.600417466Z level=info msg="Migration successfully executed" id="Add index for alert_id on annotation table" duration=8.909514ms
logger=migrator t=2024-08-29T15:36:48.622726416Z level=info msg="Executing migration" id="Increase tags column to length 4096"
logger=migrator t=2024-08-29T15:36:48.622903276Z level=debug msg="Executing sql migration" id="Increase tags column to length 4096" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:48.623229582Z level=info msg="Migration successfully executed" id="Increase tags column to length 4096" duration=508.293µs
logger=migrator t=2024-08-29T15:36:48.641702585Z level=info msg="Executing migration" id="create test_data table"
logger=migrator t=2024-08-29T15:36:48.641869581Z level=debug msg="Executing sql migration" id="create test_data table" sql="CREATE TABLE IF NOT EXISTS `test_data` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `metric1` TEXT NULL\n, `metric2` TEXT NULL\n, `value_big_int` INTEGER NULL\n, `value_double` REAL NULL\n, `value_float` REAL NULL\n, `value_int` INTEGER NULL\n, `time_epoch` INTEGER NOT NULL\n, `time_date_time` DATETIME NOT NULL\n, `time_time_stamp` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:48.647464291Z level=info msg="Migration successfully executed" id="create test_data table" duration=5.759722ms
logger=migrator t=2024-08-29T15:36:48.665861108Z level=info msg="Executing migration" id="create dashboard_version table v1"
logger=migrator t=2024-08-29T15:36:48.666470656Z level=debug msg="Executing sql migration" id="create dashboard_version table v1" sql="CREATE TABLE IF NOT EXISTS `dashboard_version` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `dashboard_id` INTEGER NOT NULL\n, `parent_version` INTEGER NOT NULL\n, `restored_from` INTEGER NOT NULL\n, `version` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `created_by` INTEGER NOT NULL\n, `message` TEXT NOT NULL\n, `data` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:48.671399885Z level=info msg="Migration successfully executed" id="create dashboard_version table v1" duration=5.536672ms
logger=migrator t=2024-08-29T15:36:48.691452073Z level=info msg="Executing migration" id="add index dashboard_version.dashboard_id"
logger=migrator t=2024-08-29T15:36:48.692300731Z level=debug msg="Executing migration condition SQL" id="add index dashboard_version.dashboard_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_version IDX_dashboard_version_dashboard_id]"
logger=migrator t=2024-08-29T15:36:48.694231155Z level=debug msg="Executing sql migration" id="add index dashboard_version.dashboard_id" sql="CREATE INDEX `IDX_dashboard_version_dashboard_id` ON `dashboard_version` (`dashboard_id`);"
logger=migrator t=2024-08-29T15:36:48.695468763Z level=info msg="Migration successfully executed" id="add index dashboard_version.dashboard_id" duration=4.017024ms
logger=migrator t=2024-08-29T15:36:48.72425069Z level=info msg="Executing migration" id="add unique index dashboard_version.dashboard_id and dashboard_version.version"
logger=migrator t=2024-08-29T15:36:48.724387577Z level=debug msg="Executing migration condition SQL" id="add unique index dashboard_version.dashboard_id and dashboard_version.version" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_version UQE_dashboard_version_dashboard_id_version]"
logger=migrator t=2024-08-29T15:36:48.72643104Z level=debug msg="Executing sql migration" id="add unique index dashboard_version.dashboard_id and dashboard_version.version" sql="CREATE UNIQUE INDEX `UQE_dashboard_version_dashboard_id_version` ON `dashboard_version` (`dashboard_id`,`version`);"
logger=migrator t=2024-08-29T15:36:48.727161883Z level=info msg="Migration successfully executed" id="add unique index dashboard_version.dashboard_id and dashboard_version.version" duration=2.914686ms
logger=migrator t=2024-08-29T15:36:48.749441634Z level=info msg="Executing migration" id="Set dashboard version to 1 where 0"
logger=migrator t=2024-08-29T15:36:48.749506391Z level=debug msg="Executing sql migration" id="Set dashboard version to 1 where 0" sql="UPDATE dashboard SET version = 1 WHERE version = 0"
logger=migrator t=2024-08-29T15:36:48.750511038Z level=info msg="Migration successfully executed" id="Set dashboard version to 1 where 0" duration=1.070475ms
logger=migrator t=2024-08-29T15:36:48.767290293Z level=info msg="Executing migration" id="save existing dashboard data in dashboard_version table v1"
logger=migrator t=2024-08-29T15:36:48.767979044Z level=debug msg="Executing sql migration" id="save existing dashboard data in dashboard_version table v1" sql="INSERT INTO dashboard_version\n(\n\tdashboard_id,\n\tversion,\n\tparent_version,\n\trestored_from,\n\tcreated,\n\tcreated_by,\n\tmessage,\n\tdata\n)\nSELECT\n\tdashboard.id,\n\tdashboard.version,\n\tdashboard.version,\n\tdashboard.version,\n\tdashboard.updated,\n\tCOALESCE(dashboard.updated_by, -1),\n\t'',\n\tdashboard.data\nFROM dashboard;"
logger=migrator t=2024-08-29T15:36:48.768657141Z level=info msg="Migration successfully executed" id="save existing dashboard data in dashboard_version table v1" duration=1.368765ms
logger=migrator t=2024-08-29T15:36:48.782859935Z level=info msg="Executing migration" id="alter dashboard_version.data to mediumtext v1"
logger=migrator t=2024-08-29T15:36:48.784367901Z level=debug msg="Executing sql migration" id="alter dashboard_version.data to mediumtext v1" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:48.784542365Z level=info msg="Migration successfully executed" id="alter dashboard_version.data to mediumtext v1" duration=1.685257ms
logger=migrator t=2024-08-29T15:36:48.800095496Z level=info msg="Executing migration" id="create team table"
logger=migrator t=2024-08-29T15:36:48.800779764Z level=debug msg="Executing sql migration" id="create team table" sql="CREATE TABLE IF NOT EXISTS `team` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `name` TEXT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:48.802825239Z level=info msg="Migration successfully executed" id="create team table" duration=2.728502ms
logger=migrator t=2024-08-29T15:36:48.831832282Z level=info msg="Executing migration" id="add index team.org_id"
logger=migrator t=2024-08-29T15:36:48.833572705Z level=debug msg="Executing migration condition SQL" id="add index team.org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[team IDX_team_org_id]"
logger=migrator t=2024-08-29T15:36:48.835794552Z level=debug msg="Executing sql migration" id="add index team.org_id" sql="CREATE INDEX `IDX_team_org_id` ON `team` (`org_id`);"
logger=migrator t=2024-08-29T15:36:48.836899383Z level=info msg="Migration successfully executed" id="add index team.org_id" duration=5.067869ms
logger=migrator t=2024-08-29T15:36:48.859143803Z level=info msg="Executing migration" id="add unique index team_org_id_name"
logger=migrator t=2024-08-29T15:36:48.859619733Z level=debug msg="Executing migration condition SQL" id="add unique index team_org_id_name" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[team UQE_team_org_id_name]"
logger=migrator t=2024-08-29T15:36:48.861824638Z level=debug msg="Executing sql migration" id="add unique index team_org_id_name" sql="CREATE UNIQUE INDEX `UQE_team_org_id_name` ON `team` (`org_id`,`name`);"
logger=migrator t=2024-08-29T15:36:48.871749081Z level=info msg="Migration successfully executed" id="add unique index team_org_id_name" duration=12.605888ms
logger=migrator t=2024-08-29T15:36:48.888698257Z level=info msg="Executing migration" id="Add column uid in team"
logger=migrator t=2024-08-29T15:36:48.889189679Z level=debug msg="Executing sql migration" id="Add column uid in team" sql="alter table `team` ADD COLUMN `uid` TEXT NULL "
logger=migrator t=2024-08-29T15:36:48.901861354Z level=info msg="Migration successfully executed" id="Add column uid in team" duration=13.162046ms
logger=migrator t=2024-08-29T15:36:48.917596091Z level=info msg="Executing migration" id="Update uid column values in team"
logger=migrator t=2024-08-29T15:36:48.917845277Z level=debug msg="Executing sql migration" id="Update uid column values in team" sql="UPDATE team SET uid=printf('t%09d',id) WHERE uid IS NULL;"
logger=migrator t=2024-08-29T15:36:48.9182937Z level=info msg="Migration successfully executed" id="Update uid column values in team" duration=700.176µs
logger=migrator t=2024-08-29T15:36:48.931313803Z level=info msg="Executing migration" id="Add unique index team_org_id_uid"
logger=migrator t=2024-08-29T15:36:48.931366884Z level=debug msg="Executing migration condition SQL" id="Add unique index team_org_id_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[team UQE_team_org_id_uid]"
logger=migrator t=2024-08-29T15:36:48.932541769Z level=debug msg="Executing sql migration" id="Add unique index team_org_id_uid" sql="CREATE UNIQUE INDEX `UQE_team_org_id_uid` ON `team` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:48.933705612Z level=info msg="Migration successfully executed" id="Add unique index team_org_id_uid" duration=2.390482ms
logger=migrator t=2024-08-29T15:36:48.952130122Z level=info msg="Executing migration" id="create team member table"
logger=migrator t=2024-08-29T15:36:48.952319128Z level=debug msg="Executing sql migration" id="create team member table" sql="CREATE TABLE IF NOT EXISTS `team_member` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `team_id` INTEGER NOT NULL\n, `user_id` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:48.955156914Z level=info msg="Migration successfully executed" id="create team member table" duration=3.026825ms
logger=migrator t=2024-08-29T15:36:48.999678407Z level=info msg="Executing migration" id="add index team_member.org_id"
logger=migrator t=2024-08-29T15:36:49.00021182Z level=debug msg="Executing migration condition SQL" id="add index team_member.org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[team_member IDX_team_member_org_id]"
logger=migrator t=2024-08-29T15:36:49.001850361Z level=debug msg="Executing sql migration" id="add index team_member.org_id" sql="CREATE INDEX `IDX_team_member_org_id` ON `team_member` (`org_id`);"
logger=migrator t=2024-08-29T15:36:49.004859135Z level=info msg="Migration successfully executed" id="add index team_member.org_id" duration=5.180977ms
logger=migrator t=2024-08-29T15:36:49.020396439Z level=info msg="Executing migration" id="add unique index team_member_org_id_team_id_user_id"
logger=migrator t=2024-08-29T15:36:49.020593012Z level=debug msg="Executing migration condition SQL" id="add unique index team_member_org_id_team_id_user_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[team_member UQE_team_member_org_id_team_id_user_id]"
logger=migrator t=2024-08-29T15:36:49.021007739Z level=debug msg="Executing sql migration" id="add unique index team_member_org_id_team_id_user_id" sql="CREATE UNIQUE INDEX `UQE_team_member_org_id_team_id_user_id` ON `team_member` (`org_id`,`team_id`,`user_id`);"
logger=migrator t=2024-08-29T15:36:49.022518726Z level=info msg="Migration successfully executed" id="add unique index team_member_org_id_team_id_user_id" duration=2.122493ms
logger=migrator t=2024-08-29T15:36:49.088962471Z level=info msg="Executing migration" id="add index team_member.team_id"
logger=migrator t=2024-08-29T15:36:49.103257339Z level=debug msg="Executing migration condition SQL" id="add index team_member.team_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[team_member IDX_team_member_team_id]"
logger=migrator t=2024-08-29T15:36:49.104003815Z level=debug msg="Executing sql migration" id="add index team_member.team_id" sql="CREATE INDEX `IDX_team_member_team_id` ON `team_member` (`team_id`);"
logger=migrator t=2024-08-29T15:36:49.105323112Z level=info msg="Migration successfully executed" id="add index team_member.team_id" duration=16.362405ms
logger=migrator t=2024-08-29T15:36:49.201002631Z level=info msg="Executing migration" id="Add column email to team table"
logger=migrator t=2024-08-29T15:36:49.201523631Z level=debug msg="Executing sql migration" id="Add column email to team table" sql="alter table `team` ADD COLUMN `email` TEXT NULL "
logger=migrator t=2024-08-29T15:36:49.234525304Z level=info msg="Migration successfully executed" id="Add column email to team table" duration=33.519133ms
logger=migrator t=2024-08-29T15:36:49.332784925Z level=info msg="Executing migration" id="Add column external to team_member table"
logger=migrator t=2024-08-29T15:36:49.332853153Z level=debug msg="Executing sql migration" id="Add column external to team_member table" sql="alter table `team_member` ADD COLUMN `external` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:49.34249047Z level=info msg="Migration successfully executed" id="Add column external to team_member table" duration=9.703952ms
logger=migrator t=2024-08-29T15:36:49.362579885Z level=info msg="Executing migration" id="Add column permission to team_member table"
logger=migrator t=2024-08-29T15:36:49.363296579Z level=debug msg="Executing sql migration" id="Add column permission to team_member table" sql="alter table `team_member` ADD COLUMN `permission` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:49.375621835Z level=info msg="Migration successfully executed" id="Add column permission to team_member table" duration=13.035791ms
logger=migrator t=2024-08-29T15:36:49.398850454Z level=info msg="Executing migration" id="create dashboard acl table"
logger=migrator t=2024-08-29T15:36:49.399931088Z level=debug msg="Executing sql migration" id="create dashboard acl table" sql="CREATE TABLE IF NOT EXISTS `dashboard_acl` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `dashboard_id` INTEGER NOT NULL\n, `user_id` INTEGER NULL\n, `team_id` INTEGER NULL\n, `permission` INTEGER NOT NULL DEFAULT 4\n, `role` TEXT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:49.40401962Z level=info msg="Migration successfully executed" id="create dashboard acl table" duration=5.166895ms
logger=migrator t=2024-08-29T15:36:49.432766793Z level=info msg="Executing migration" id="add index dashboard_acl_dashboard_id"
logger=migrator t=2024-08-29T15:36:49.432835265Z level=debug msg="Executing migration condition SQL" id="add index dashboard_acl_dashboard_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_acl IDX_dashboard_acl_dashboard_id]"
logger=migrator t=2024-08-29T15:36:49.433216165Z level=debug msg="Executing sql migration" id="add index dashboard_acl_dashboard_id" sql="CREATE INDEX `IDX_dashboard_acl_dashboard_id` ON `dashboard_acl` (`dashboard_id`);"
logger=migrator t=2024-08-29T15:36:49.433864495Z level=info msg="Migration successfully executed" id="add index dashboard_acl_dashboard_id" duration=1.099328ms
logger=migrator t=2024-08-29T15:36:49.46678048Z level=info msg="Executing migration" id="add unique index dashboard_acl_dashboard_id_user_id"
logger=migrator t=2024-08-29T15:36:49.466843838Z level=debug msg="Executing migration condition SQL" id="add unique index dashboard_acl_dashboard_id_user_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_acl UQE_dashboard_acl_dashboard_id_user_id]"
logger=migrator t=2024-08-29T15:36:49.467753653Z level=debug msg="Executing sql migration" id="add unique index dashboard_acl_dashboard_id_user_id" sql="CREATE UNIQUE INDEX `UQE_dashboard_acl_dashboard_id_user_id` ON `dashboard_acl` (`dashboard_id`,`user_id`);"
logger=migrator t=2024-08-29T15:36:49.469485887Z level=info msg="Migration successfully executed" id="add unique index dashboard_acl_dashboard_id_user_id" duration=2.703895ms
logger=migrator t=2024-08-29T15:36:49.490199247Z level=info msg="Executing migration" id="add unique index dashboard_acl_dashboard_id_team_id"
logger=migrator t=2024-08-29T15:36:49.492481271Z level=debug msg="Executing migration condition SQL" id="add unique index dashboard_acl_dashboard_id_team_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_acl UQE_dashboard_acl_dashboard_id_team_id]"
logger=migrator t=2024-08-29T15:36:49.49341961Z level=debug msg="Executing sql migration" id="add unique index dashboard_acl_dashboard_id_team_id" sql="CREATE UNIQUE INDEX `UQE_dashboard_acl_dashboard_id_team_id` ON `dashboard_acl` (`dashboard_id`,`team_id`);"
logger=migrator t=2024-08-29T15:36:49.494761319Z level=info msg="Migration successfully executed" id="add unique index dashboard_acl_dashboard_id_team_id" duration=4.566486ms
logger=migrator t=2024-08-29T15:36:49.507995853Z level=info msg="Executing migration" id="add index dashboard_acl_user_id"
logger=migrator t=2024-08-29T15:36:49.508333261Z level=debug msg="Executing migration condition SQL" id="add index dashboard_acl_user_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_acl IDX_dashboard_acl_user_id]"
logger=migrator t=2024-08-29T15:36:49.508897826Z level=debug msg="Executing sql migration" id="add index dashboard_acl_user_id" sql="CREATE INDEX `IDX_dashboard_acl_user_id` ON `dashboard_acl` (`user_id`);"
logger=migrator t=2024-08-29T15:36:49.511216958Z level=info msg="Migration successfully executed" id="add index dashboard_acl_user_id" duration=3.219412ms
logger=migrator t=2024-08-29T15:36:49.525487486Z level=info msg="Executing migration" id="add index dashboard_acl_team_id"
logger=migrator t=2024-08-29T15:36:49.525535997Z level=debug msg="Executing migration condition SQL" id="add index dashboard_acl_team_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_acl IDX_dashboard_acl_team_id]"
logger=migrator t=2024-08-29T15:36:49.526342581Z level=debug msg="Executing sql migration" id="add index dashboard_acl_team_id" sql="CREATE INDEX `IDX_dashboard_acl_team_id` ON `dashboard_acl` (`team_id`);"
logger=migrator t=2024-08-29T15:36:49.527067889Z level=info msg="Migration successfully executed" id="add index dashboard_acl_team_id" duration=1.582749ms
logger=migrator t=2024-08-29T15:36:49.577377736Z level=info msg="Executing migration" id="add index dashboard_acl_org_id_role"
logger=migrator t=2024-08-29T15:36:49.577516971Z level=debug msg="Executing migration condition SQL" id="add index dashboard_acl_org_id_role" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_acl IDX_dashboard_acl_org_id_role]"
logger=migrator t=2024-08-29T15:36:49.578223964Z level=debug msg="Executing sql migration" id="add index dashboard_acl_org_id_role" sql="CREATE INDEX `IDX_dashboard_acl_org_id_role` ON `dashboard_acl` (`org_id`,`role`);"
logger=migrator t=2024-08-29T15:36:49.582017057Z level=info msg="Migration successfully executed" id="add index dashboard_acl_org_id_role" duration=4.637581ms
logger=migrator t=2024-08-29T15:36:49.659965282Z level=info msg="Executing migration" id="add index dashboard_permission"
logger=migrator t=2024-08-29T15:36:49.66004754Z level=debug msg="Executing migration condition SQL" id="add index dashboard_permission" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_acl IDX_dashboard_acl_permission]"
logger=migrator t=2024-08-29T15:36:49.661583529Z level=debug msg="Executing sql migration" id="add index dashboard_permission" sql="CREATE INDEX `IDX_dashboard_acl_permission` ON `dashboard_acl` (`permission`);"
logger=migrator t=2024-08-29T15:36:49.663585642Z level=info msg="Migration successfully executed" id="add index dashboard_permission" duration=3.623622ms
logger=migrator t=2024-08-29T15:36:49.678988038Z level=info msg="Executing migration" id="save default acl rules in dashboard_acl table"
logger=migrator t=2024-08-29T15:36:49.67940413Z level=debug msg="Executing sql migration" id="save default acl rules in dashboard_acl table" sql="\nINSERT INTO dashboard_acl\n\t(\n\t\torg_id,\n\t\tdashboard_id,\n\t\tpermission,\n\t\trole,\n\t\tcreated,\n\t\tupdated\n\t)\n\tVALUES\n\t\t(-1,-1, 1,'Viewer','2017-06-20','2017-06-20'),\n\t\t(-1,-1, 2,'Editor','2017-06-20','2017-06-20')\n\t"
logger=migrator t=2024-08-29T15:36:49.679992863Z level=info msg="Migration successfully executed" id="save default acl rules in dashboard_acl table" duration=1.007285ms
logger=migrator t=2024-08-29T15:36:49.709922844Z level=info msg="Executing migration" id="delete acl rules for deleted dashboards and folders"
logger=migrator t=2024-08-29T15:36:49.710333115Z level=debug msg="Executing sql migration" id="delete acl rules for deleted dashboards and folders" sql="DELETE FROM dashboard_acl WHERE dashboard_id NOT IN (SELECT id FROM dashboard) AND dashboard_id != -1"
logger=migrator t=2024-08-29T15:36:49.710630288Z level=info msg="Migration successfully executed" id="delete acl rules for deleted dashboards and folders" duration=710.229µs
logger=migrator t=2024-08-29T15:36:49.725736933Z level=info msg="Executing migration" id="create tag table"
logger=migrator t=2024-08-29T15:36:49.726232887Z level=debug msg="Executing sql migration" id="create tag table" sql="CREATE TABLE IF NOT EXISTS `tag` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `key` TEXT NOT NULL\n, `value` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:49.726996405Z level=info msg="Migration successfully executed" id="create tag table" duration=1.261309ms
logger=migrator t=2024-08-29T15:36:49.743688152Z level=info msg="Executing migration" id="add index tag.key_value"
logger=migrator t=2024-08-29T15:36:49.792241318Z level=debug msg="Executing migration condition SQL" id="add index tag.key_value" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[tag UQE_tag_key_value]"
logger=migrator t=2024-08-29T15:36:49.792710497Z level=debug msg="Executing sql migration" id="add index tag.key_value" sql="CREATE UNIQUE INDEX `UQE_tag_key_value` ON `tag` (`key`,`value`);"
logger=migrator t=2024-08-29T15:36:49.80448489Z level=info msg="Migration successfully executed" id="add index tag.key_value" duration=60.80385ms
logger=migrator t=2024-08-29T15:36:49.928634149Z level=info msg="Executing migration" id="create login attempt table"
logger=migrator t=2024-08-29T15:36:49.938460044Z level=debug msg="Executing sql migration" id="create login attempt table" sql="CREATE TABLE IF NOT EXISTS `login_attempt` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `username` TEXT NOT NULL\n, `ip_address` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:49.943743558Z level=info msg="Migration successfully executed" id="create login attempt table" duration=15.107514ms
logger=migrator t=2024-08-29T15:36:49.963252275Z level=info msg="Executing migration" id="add index login_attempt.username"
logger=migrator t=2024-08-29T15:36:49.966515885Z level=debug msg="Executing migration condition SQL" id="add index login_attempt.username" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[login_attempt IDX_login_attempt_username]"
logger=migrator t=2024-08-29T15:36:49.969487531Z level=debug msg="Executing sql migration" id="add index login_attempt.username" sql="CREATE INDEX `IDX_login_attempt_username` ON `login_attempt` (`username`);"
logger=migrator t=2024-08-29T15:36:49.973468043Z level=info msg="Migration successfully executed" id="add index login_attempt.username" duration=10.213466ms
logger=migrator t=2024-08-29T15:36:50.002545391Z level=info msg="Executing migration" id="drop index IDX_login_attempt_username - v1"
logger=migrator t=2024-08-29T15:36:50.008590835Z level=debug msg="Executing migration condition SQL" id="drop index IDX_login_attempt_username - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[login_attempt IDX_login_attempt_username]"
logger=migrator t=2024-08-29T15:36:50.012460041Z level=debug msg="Executing sql migration" id="drop index IDX_login_attempt_username - v1" sql="DROP INDEX `IDX_login_attempt_username`"
logger=migrator t=2024-08-29T15:36:50.016040522Z level=info msg="Migration successfully executed" id="drop index IDX_login_attempt_username - v1" duration=13.48927ms
logger=migrator t=2024-08-29T15:36:50.041773857Z level=info msg="Executing migration" id="Rename table login_attempt to login_attempt_tmp_qwerty - v1"
logger=migrator t=2024-08-29T15:36:50.043733424Z level=debug msg="Executing sql migration" id="Rename table login_attempt to login_attempt_tmp_qwerty - v1" sql="ALTER TABLE `login_attempt` RENAME TO `login_attempt_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:50.067138369Z level=info msg="Migration successfully executed" id="Rename table login_attempt to login_attempt_tmp_qwerty - v1" duration=25.365322ms
logger=migrator t=2024-08-29T15:36:50.121520678Z level=info msg="Executing migration" id="create login_attempt v2"
logger=migrator t=2024-08-29T15:36:50.1235308Z level=debug msg="Executing sql migration" id="create login_attempt v2" sql="CREATE TABLE IF NOT EXISTS `login_attempt` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `username` TEXT NOT NULL\n, `ip_address` TEXT NOT NULL\n, `created` INTEGER NOT NULL DEFAULT 0\n);"
logger=migrator t=2024-08-29T15:36:50.128912953Z level=info msg="Migration successfully executed" id="create login_attempt v2" duration=7.388244ms
logger=migrator t=2024-08-29T15:36:50.152858759Z level=info msg="Executing migration" id="create index IDX_login_attempt_username - v2"
logger=migrator t=2024-08-29T15:36:50.153330339Z level=debug msg="Executing migration condition SQL" id="create index IDX_login_attempt_username - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[login_attempt IDX_login_attempt_username]"
logger=migrator t=2024-08-29T15:36:50.155400144Z level=debug msg="Executing sql migration" id="create index IDX_login_attempt_username - v2" sql="CREATE INDEX `IDX_login_attempt_username` ON `login_attempt` (`username`);"
logger=migrator t=2024-08-29T15:36:50.158871442Z level=info msg="Migration successfully executed" id="create index IDX_login_attempt_username - v2" duration=6.011672ms
logger=migrator t=2024-08-29T15:36:50.231156951Z level=info msg="Executing migration" id="copy login_attempt v1 to v2"
logger=migrator t=2024-08-29T15:36:50.233619938Z level=debug msg="Executing sql migration" id="copy login_attempt v1 to v2" sql="INSERT INTO `login_attempt` (`id`\n, `username`\n, `ip_address`) SELECT `id`\n, `username`\n, `ip_address` FROM `login_attempt_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:50.234120872Z level=info msg="Migration successfully executed" id="copy login_attempt v1 to v2" duration=2.966929ms
logger=migrator t=2024-08-29T15:36:50.266006977Z level=info msg="Executing migration" id="drop login_attempt_tmp_qwerty"
logger=migrator t=2024-08-29T15:36:50.268468361Z level=debug msg="Executing sql migration" id="drop login_attempt_tmp_qwerty" sql="DROP TABLE IF EXISTS `login_attempt_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:50.274465063Z level=info msg="Migration successfully executed" id="drop login_attempt_tmp_qwerty" duration=8.455287ms
logger=migrator t=2024-08-29T15:36:50.292793853Z level=info msg="Executing migration" id="create user auth table"
logger=migrator t=2024-08-29T15:36:50.292996158Z level=debug msg="Executing sql migration" id="create user auth table" sql="CREATE TABLE IF NOT EXISTS `user_auth` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `user_id` INTEGER NOT NULL\n, `auth_module` TEXT NOT NULL\n, `auth_id` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:50.295822109Z level=info msg="Migration successfully executed" id="create user auth table" duration=3.021893ms
logger=migrator t=2024-08-29T15:36:50.367322037Z level=info msg="Executing migration" id="create index IDX_user_auth_auth_module_auth_id - v1"
logger=migrator t=2024-08-29T15:36:50.367471656Z level=debug msg="Executing migration condition SQL" id="create index IDX_user_auth_auth_module_auth_id - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user_auth IDX_user_auth_auth_module_auth_id]"
logger=migrator t=2024-08-29T15:36:50.367933057Z level=debug msg="Executing sql migration" id="create index IDX_user_auth_auth_module_auth_id - v1" sql="CREATE INDEX `IDX_user_auth_auth_module_auth_id` ON `user_auth` (`auth_module`,`auth_id`);"
logger=migrator t=2024-08-29T15:36:50.376738319Z level=info msg="Migration successfully executed" id="create index IDX_user_auth_auth_module_auth_id - v1" duration=9.405945ms
logger=migrator t=2024-08-29T15:36:50.406805277Z level=info msg="Executing migration" id="alter user_auth.auth_id to length 190"
logger=migrator t=2024-08-29T15:36:50.40723992Z level=debug msg="Executing sql migration" id="alter user_auth.auth_id to length 190" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:50.407439622Z level=info msg="Migration successfully executed" id="alter user_auth.auth_id to length 190" duration=638.715µs
logger=migrator t=2024-08-29T15:36:50.424692462Z level=info msg="Executing migration" id="Add OAuth access token to user_auth"
logger=migrator t=2024-08-29T15:36:50.42525409Z level=debug msg="Executing sql migration" id="Add OAuth access token to user_auth" sql="alter table `user_auth` ADD COLUMN `o_auth_access_token` TEXT NULL "
logger=migrator t=2024-08-29T15:36:50.435613902Z level=info msg="Migration successfully executed" id="Add OAuth access token to user_auth" duration=10.91872ms
logger=migrator t=2024-08-29T15:36:50.484298063Z level=info msg="Executing migration" id="Add OAuth refresh token to user_auth"
logger=migrator t=2024-08-29T15:36:50.486368845Z level=debug msg="Executing sql migration" id="Add OAuth refresh token to user_auth" sql="alter table `user_auth` ADD COLUMN `o_auth_refresh_token` TEXT NULL "
logger=migrator t=2024-08-29T15:36:50.492701399Z level=info msg="Migration successfully executed" id="Add OAuth refresh token to user_auth" duration=8.401735ms
logger=migrator t=2024-08-29T15:36:50.517636168Z level=info msg="Executing migration" id="Add OAuth token type to user_auth"
logger=migrator t=2024-08-29T15:36:50.517822138Z level=debug msg="Executing sql migration" id="Add OAuth token type to user_auth" sql="alter table `user_auth` ADD COLUMN `o_auth_token_type` TEXT NULL "
logger=migrator t=2024-08-29T15:36:50.522864371Z level=info msg="Migration successfully executed" id="Add OAuth token type to user_auth" duration=5.225407ms
logger=migrator t=2024-08-29T15:36:50.540958199Z level=info msg="Executing migration" id="Add OAuth expiry to user_auth"
logger=migrator t=2024-08-29T15:36:50.541093532Z level=debug msg="Executing sql migration" id="Add OAuth expiry to user_auth" sql="alter table `user_auth` ADD COLUMN `o_auth_expiry` DATETIME NULL "
logger=migrator t=2024-08-29T15:36:50.585564717Z level=info msg="Migration successfully executed" id="Add OAuth expiry to user_auth" duration=44.604202ms
logger=migrator t=2024-08-29T15:36:50.60349313Z level=info msg="Executing migration" id="Add index to user_id column in user_auth"
logger=migrator t=2024-08-29T15:36:50.603627518Z level=debug msg="Executing migration condition SQL" id="Add index to user_id column in user_auth" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user_auth IDX_user_auth_user_id]"
logger=migrator t=2024-08-29T15:36:50.604528236Z level=debug msg="Executing sql migration" id="Add index to user_id column in user_auth" sql="CREATE INDEX `IDX_user_auth_user_id` ON `user_auth` (`user_id`);"
logger=migrator t=2024-08-29T15:36:50.608197519Z level=info msg="Migration successfully executed" id="Add index to user_id column in user_auth" duration=4.699868ms
logger=migrator t=2024-08-29T15:36:50.642658042Z level=info msg="Executing migration" id="Add OAuth ID token to user_auth"
logger=migrator t=2024-08-29T15:36:50.6427562Z level=debug msg="Executing sql migration" id="Add OAuth ID token to user_auth" sql="alter table `user_auth` ADD COLUMN `o_auth_id_token` TEXT NULL "
logger=migrator t=2024-08-29T15:36:50.658755616Z level=info msg="Migration successfully executed" id="Add OAuth ID token to user_auth" duration=16.095429ms
logger=migrator t=2024-08-29T15:36:50.688126065Z level=info msg="Executing migration" id="create server_lock table"
logger=migrator t=2024-08-29T15:36:50.688993138Z level=debug msg="Executing sql migration" id="create server_lock table" sql="CREATE TABLE IF NOT EXISTS `server_lock` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `operation_uid` TEXT NOT NULL\n, `version` INTEGER NOT NULL\n, `last_execution` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:50.692025513Z level=info msg="Migration successfully executed" id="create server_lock table" duration=3.899813ms
logger=migrator t=2024-08-29T15:36:50.717050745Z level=info msg="Executing migration" id="add index server_lock.operation_uid"
logger=migrator t=2024-08-29T15:36:50.718554557Z level=debug msg="Executing migration condition SQL" id="add index server_lock.operation_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[server_lock UQE_server_lock_operation_uid]"
logger=migrator t=2024-08-29T15:36:50.720228352Z level=debug msg="Executing sql migration" id="add index server_lock.operation_uid" sql="CREATE UNIQUE INDEX `UQE_server_lock_operation_uid` ON `server_lock` (`operation_uid`);"
logger=migrator t=2024-08-29T15:36:50.724739443Z level=info msg="Migration successfully executed" id="add index server_lock.operation_uid" duration=7.679149ms
logger=migrator t=2024-08-29T15:36:50.741384145Z level=info msg="Executing migration" id="create user auth token table"
logger=migrator t=2024-08-29T15:36:50.788349945Z level=debug msg="Executing sql migration" id="create user auth token table" sql="CREATE TABLE IF NOT EXISTS `user_auth_token` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `user_id` INTEGER NOT NULL\n, `auth_token` TEXT NOT NULL\n, `prev_auth_token` TEXT NOT NULL\n, `user_agent` TEXT NOT NULL\n, `client_ip` TEXT NOT NULL\n, `auth_token_seen` INTEGER NOT NULL\n, `seen_at` INTEGER NULL\n, `rotated_at` INTEGER NOT NULL\n, `created_at` INTEGER NOT NULL\n, `updated_at` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:50.792084512Z level=info msg="Migration successfully executed" id="create user auth token table" duration=50.706711ms
logger=migrator t=2024-08-29T15:36:50.81228668Z level=info msg="Executing migration" id="add unique index user_auth_token.auth_token"
logger=migrator t=2024-08-29T15:36:50.812844157Z level=debug msg="Executing migration condition SQL" id="add unique index user_auth_token.auth_token" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user_auth_token UQE_user_auth_token_auth_token]"
logger=migrator t=2024-08-29T15:36:50.813546551Z level=debug msg="Executing sql migration" id="add unique index user_auth_token.auth_token" sql="CREATE UNIQUE INDEX `UQE_user_auth_token_auth_token` ON `user_auth_token` (`auth_token`);"
logger=migrator t=2024-08-29T15:36:50.814111983Z level=info msg="Migration successfully executed" id="add unique index user_auth_token.auth_token" duration=1.827307ms
logger=migrator t=2024-08-29T15:36:50.829891192Z level=info msg="Executing migration" id="add unique index user_auth_token.prev_auth_token"
logger=migrator t=2024-08-29T15:36:50.829946941Z level=debug msg="Executing migration condition SQL" id="add unique index user_auth_token.prev_auth_token" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user_auth_token UQE_user_auth_token_prev_auth_token]"
logger=migrator t=2024-08-29T15:36:50.831961954Z level=debug msg="Executing sql migration" id="add unique index user_auth_token.prev_auth_token" sql="CREATE UNIQUE INDEX `UQE_user_auth_token_prev_auth_token` ON `user_auth_token` (`prev_auth_token`);"
logger=migrator t=2024-08-29T15:36:50.832553879Z level=info msg="Migration successfully executed" id="add unique index user_auth_token.prev_auth_token" duration=2.665739ms
logger=migrator t=2024-08-29T15:36:50.88546201Z level=info msg="Executing migration" id="add index user_auth_token.user_id"
logger=migrator t=2024-08-29T15:36:50.885906195Z level=debug msg="Executing migration condition SQL" id="add index user_auth_token.user_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user_auth_token IDX_user_auth_token_user_id]"
logger=migrator t=2024-08-29T15:36:50.887951037Z level=debug msg="Executing sql migration" id="add index user_auth_token.user_id" sql="CREATE INDEX `IDX_user_auth_token_user_id` ON `user_auth_token` (`user_id`);"
logger=migrator t=2024-08-29T15:36:50.892314113Z level=info msg="Migration successfully executed" id="add index user_auth_token.user_id" duration=6.85644ms
logger=migrator t=2024-08-29T15:36:50.904394856Z level=info msg="Executing migration" id="Add revoked_at to the user auth token"
logger=migrator t=2024-08-29T15:36:50.904942331Z level=debug msg="Executing sql migration" id="Add revoked_at to the user auth token" sql="alter table `user_auth_token` ADD COLUMN `revoked_at` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:50.914048284Z level=info msg="Migration successfully executed" id="Add revoked_at to the user auth token" duration=9.651941ms
logger=migrator t=2024-08-29T15:36:50.925650977Z level=info msg="Executing migration" id="add index user_auth_token.revoked_at"
logger=migrator t=2024-08-29T15:36:50.925719102Z level=debug msg="Executing migration condition SQL" id="add index user_auth_token.revoked_at" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user_auth_token IDX_user_auth_token_revoked_at]"
logger=migrator t=2024-08-29T15:36:50.928146682Z level=debug msg="Executing sql migration" id="add index user_auth_token.revoked_at" sql="CREATE INDEX `IDX_user_auth_token_revoked_at` ON `user_auth_token` (`revoked_at`);"
logger=migrator t=2024-08-29T15:36:50.929849326Z level=info msg="Migration successfully executed" id="add index user_auth_token.revoked_at" duration=4.200255ms
logger=migrator t=2024-08-29T15:36:50.940205401Z level=info msg="Executing migration" id="create cache_data table"
logger=migrator t=2024-08-29T15:36:50.940262647Z level=debug msg="Executing sql migration" id="create cache_data table" sql="CREATE TABLE IF NOT EXISTS `cache_data` (\n`cache_key` TEXT PRIMARY KEY NOT NULL\n, `data` BLOB NOT NULL\n, `expires` INTEGER NOT NULL\n, `created_at` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:50.941499468Z level=info msg="Migration successfully executed" id="create cache_data table" duration=1.293335ms
logger=migrator t=2024-08-29T15:36:50.953755127Z level=info msg="Executing migration" id="add unique index cache_data.cache_key"
logger=migrator t=2024-08-29T15:36:50.953837472Z level=debug msg="Executing migration condition SQL" id="add unique index cache_data.cache_key" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[cache_data UQE_cache_data_cache_key]"
logger=migrator t=2024-08-29T15:36:50.956545067Z level=debug msg="Executing sql migration" id="add unique index cache_data.cache_key" sql="CREATE UNIQUE INDEX `UQE_cache_data_cache_key` ON `cache_data` (`cache_key`);"
logger=migrator t=2024-08-29T15:36:50.963131045Z level=info msg="Migration successfully executed" id="add unique index cache_data.cache_key" duration=9.375669ms
logger=migrator t=2024-08-29T15:36:50.986446689Z level=info msg="Executing migration" id="create short_url table v1"
logger=migrator t=2024-08-29T15:36:50.986597153Z level=debug msg="Executing sql migration" id="create short_url table v1" sql="CREATE TABLE IF NOT EXISTS `short_url` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `uid` TEXT NOT NULL\n, `path` TEXT NOT NULL\n, `created_by` INTEGER NOT NULL\n, `created_at` INTEGER NOT NULL\n, `last_seen_at` INTEGER NULL\n);"
logger=migrator t=2024-08-29T15:36:50.988263018Z level=info msg="Migration successfully executed" id="create short_url table v1" duration=1.816142ms
logger=migrator t=2024-08-29T15:36:51.005278428Z level=info msg="Executing migration" id="add index short_url.org_id-uid"
logger=migrator t=2024-08-29T15:36:51.005323844Z level=debug msg="Executing migration condition SQL" id="add index short_url.org_id-uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[short_url UQE_short_url_org_id_uid]"
logger=migrator t=2024-08-29T15:36:51.006352737Z level=debug msg="Executing sql migration" id="add index short_url.org_id-uid" sql="CREATE UNIQUE INDEX `UQE_short_url_org_id_uid` ON `short_url` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:51.009267532Z level=info msg="Migration successfully executed" id="add index short_url.org_id-uid" duration=3.991162ms
logger=migrator t=2024-08-29T15:36:51.026477484Z level=info msg="Executing migration" id="alter table short_url alter column created_by type to bigint"
logger=migrator t=2024-08-29T15:36:51.026522695Z level=debug msg="Executing sql migration" id="alter table short_url alter column created_by type to bigint" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:51.026819407Z level=info msg="Migration successfully executed" id="alter table short_url alter column created_by type to bigint" duration=344.606µs
logger=migrator t=2024-08-29T15:36:51.040393043Z level=info msg="Executing migration" id="delete alert_definition table"
logger=migrator t=2024-08-29T15:36:51.040905846Z level=debug msg="Executing sql migration" id="delete alert_definition table" sql="DROP TABLE IF EXISTS `alert_definition`"
logger=migrator t=2024-08-29T15:36:51.041846053Z level=info msg="Migration successfully executed" id="delete alert_definition table" duration=1.454456ms
logger=migrator t=2024-08-29T15:36:51.057372871Z level=info msg="Executing migration" id="recreate alert_definition table"
logger=migrator t=2024-08-29T15:36:51.059237703Z level=debug msg="Executing sql migration" id="recreate alert_definition table" sql="CREATE TABLE IF NOT EXISTS `alert_definition` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `title` TEXT NOT NULL\n, `condition` TEXT NOT NULL\n, `data` TEXT NOT NULL\n, `updated` DATETIME NOT NULL\n, `interval_seconds` INTEGER NOT NULL DEFAULT 60\n, `version` INTEGER NOT NULL DEFAULT 0\n, `uid` TEXT NOT NULL DEFAULT 0\n);"
logger=migrator t=2024-08-29T15:36:51.061524896Z level=info msg="Migration successfully executed" id="recreate alert_definition table" duration=4.153519ms
logger=migrator t=2024-08-29T15:36:51.104641353Z level=info msg="Executing migration" id="add index in alert_definition on org_id and title columns"
logger=migrator t=2024-08-29T15:36:51.105233645Z level=debug msg="Executing migration condition SQL" id="add index in alert_definition on org_id and title columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_definition IDX_alert_definition_org_id_title]"
logger=migrator t=2024-08-29T15:36:51.106797514Z level=debug msg="Executing sql migration" id="add index in alert_definition on org_id and title columns" sql="CREATE INDEX `IDX_alert_definition_org_id_title` ON `alert_definition` (`org_id`,`title`);"
logger=migrator t=2024-08-29T15:36:51.108547054Z level=info msg="Migration successfully executed" id="add index in alert_definition on org_id and title columns" duration=3.903757ms
logger=migrator t=2024-08-29T15:36:51.123649041Z level=info msg="Executing migration" id="add index in alert_definition on org_id and uid columns"
logger=migrator t=2024-08-29T15:36:51.124366889Z level=debug msg="Executing migration condition SQL" id="add index in alert_definition on org_id and uid columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_definition IDX_alert_definition_org_id_uid]"
logger=migrator t=2024-08-29T15:36:51.125326957Z level=debug msg="Executing sql migration" id="add index in alert_definition on org_id and uid columns" sql="CREATE INDEX `IDX_alert_definition_org_id_uid` ON `alert_definition` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:51.126346081Z level=info msg="Migration successfully executed" id="add index in alert_definition on org_id and uid columns" duration=2.703302ms
logger=migrator t=2024-08-29T15:36:51.140859006Z level=info msg="Executing migration" id="alter alert_definition table data column to mediumtext in mysql"
logger=migrator t=2024-08-29T15:36:51.141260216Z level=debug msg="Executing sql migration" id="alter alert_definition table data column to mediumtext in mysql" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:51.141349533Z level=info msg="Migration successfully executed" id="alter alert_definition table data column to mediumtext in mysql" duration=494.225µs
logger=migrator t=2024-08-29T15:36:51.153387255Z level=info msg="Executing migration" id="drop index in alert_definition on org_id and title columns"
logger=migrator t=2024-08-29T15:36:51.153656446Z level=debug msg="Executing migration condition SQL" id="drop index in alert_definition on org_id and title columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_definition IDX_alert_definition_org_id_title]"
logger=migrator t=2024-08-29T15:36:51.154669393Z level=debug msg="Executing sql migration" id="drop index in alert_definition on org_id and title columns" sql="DROP INDEX `IDX_alert_definition_org_id_title`"
logger=migrator t=2024-08-29T15:36:51.155894451Z level=info msg="Migration successfully executed" id="drop index in alert_definition on org_id and title columns" duration=2.509452ms
logger=migrator t=2024-08-29T15:36:51.169699492Z level=info msg="Executing migration" id="drop index in alert_definition on org_id and uid columns"
logger=migrator t=2024-08-29T15:36:51.17019805Z level=debug msg="Executing migration condition SQL" id="drop index in alert_definition on org_id and uid columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_definition IDX_alert_definition_org_id_uid]"
logger=migrator t=2024-08-29T15:36:51.171178682Z level=debug msg="Executing sql migration" id="drop index in alert_definition on org_id and uid columns" sql="DROP INDEX `IDX_alert_definition_org_id_uid`"
logger=migrator t=2024-08-29T15:36:51.172299856Z level=info msg="Migration successfully executed" id="drop index in alert_definition on org_id and uid columns" duration=2.601998ms
logger=migrator t=2024-08-29T15:36:51.18646504Z level=info msg="Executing migration" id="add unique index in alert_definition on org_id and title columns"
logger=migrator t=2024-08-29T15:36:51.186595696Z level=debug msg="Executing migration condition SQL" id="add unique index in alert_definition on org_id and title columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_definition UQE_alert_definition_org_id_title]"
logger=migrator t=2024-08-29T15:36:51.187489751Z level=debug msg="Executing sql migration" id="add unique index in alert_definition on org_id and title columns" sql="CREATE UNIQUE INDEX `UQE_alert_definition_org_id_title` ON `alert_definition` (`org_id`,`title`);"
logger=migrator t=2024-08-29T15:36:51.18957665Z level=info msg="Migration successfully executed" id="add unique index in alert_definition on org_id and title columns" duration=3.111074ms
logger=migrator t=2024-08-29T15:36:51.203526817Z level=info msg="Executing migration" id="add unique index in alert_definition on org_id and uid columns"
logger=migrator t=2024-08-29T15:36:51.203573587Z level=debug msg="Executing migration condition SQL" id="add unique index in alert_definition on org_id and uid columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_definition UQE_alert_definition_org_id_uid]"
logger=migrator t=2024-08-29T15:36:51.204578523Z level=debug msg="Executing sql migration" id="add unique index in alert_definition on org_id and uid columns" sql="CREATE UNIQUE INDEX `UQE_alert_definition_org_id_uid` ON `alert_definition` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:51.205521192Z level=info msg="Migration successfully executed" id="add unique index in alert_definition on org_id and uid columns" duration=1.996237ms
logger=migrator t=2024-08-29T15:36:51.218324652Z level=info msg="Executing migration" id="Add column paused in alert_definition"
logger=migrator t=2024-08-29T15:36:51.21836659Z level=debug msg="Executing sql migration" id="Add column paused in alert_definition" sql="alter table `alert_definition` ADD COLUMN `paused` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:51.224231656Z level=info msg="Migration successfully executed" id="Add column paused in alert_definition" duration=5.9066ms
logger=migrator t=2024-08-29T15:36:51.237664086Z level=info msg="Executing migration" id="drop alert_definition table"
logger=migrator t=2024-08-29T15:36:51.237926531Z level=debug msg="Executing sql migration" id="drop alert_definition table" sql="DROP TABLE IF EXISTS `alert_definition`"
logger=migrator t=2024-08-29T15:36:51.240445101Z level=info msg="Migration successfully executed" id="drop alert_definition table" duration=2.782813ms
logger=migrator t=2024-08-29T15:36:51.254911216Z level=info msg="Executing migration" id="delete alert_definition_version table"
logger=migrator t=2024-08-29T15:36:51.254954633Z level=debug msg="Executing sql migration" id="delete alert_definition_version table" sql="DROP TABLE IF EXISTS `alert_definition_version`"
logger=migrator t=2024-08-29T15:36:51.255339169Z level=info msg="Migration successfully executed" id="delete alert_definition_version table" duration=429.187µs
logger=migrator t=2024-08-29T15:36:51.268456451Z level=info msg="Executing migration" id="recreate alert_definition_version table"
logger=migrator t=2024-08-29T15:36:51.269602967Z level=debug msg="Executing sql migration" id="recreate alert_definition_version table" sql="CREATE TABLE IF NOT EXISTS `alert_definition_version` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `alert_definition_id` INTEGER NOT NULL\n, `alert_definition_uid` TEXT NOT NULL DEFAULT 0\n, `parent_version` INTEGER NOT NULL\n, `restored_from` INTEGER NOT NULL\n, `version` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `title` TEXT NOT NULL\n, `condition` TEXT NOT NULL\n, `data` TEXT NOT NULL\n, `interval_seconds` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:51.271448597Z level=info msg="Migration successfully executed" id="recreate alert_definition_version table" duration=2.990324ms
logger=migrator t=2024-08-29T15:36:51.284730407Z level=info msg="Executing migration" id="add index in alert_definition_version table on alert_definition_id and version columns"
logger=migrator t=2024-08-29T15:36:51.285294369Z level=debug msg="Executing migration condition SQL" id="add index in alert_definition_version table on alert_definition_id and version columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_definition_version UQE_alert_definition_version_alert_definition_id_version]"
logger=migrator t=2024-08-29T15:36:51.287339772Z level=debug msg="Executing sql migration" id="add index in alert_definition_version table on alert_definition_id and version columns" sql="CREATE UNIQUE INDEX `UQE_alert_definition_version_alert_definition_id_version` ON `alert_definition_version` (`alert_definition_id`,`version`);"
logger=migrator t=2024-08-29T15:36:51.288842834Z level=info msg="Migration successfully executed" id="add index in alert_definition_version table on alert_definition_id and version columns" duration=4.114701ms
logger=migrator t=2024-08-29T15:36:51.302895581Z level=info msg="Executing migration" id="add index in alert_definition_version table on alert_definition_uid and version columns"
logger=migrator t=2024-08-29T15:36:51.302939813Z level=debug msg="Executing migration condition SQL" id="add index in alert_definition_version table on alert_definition_uid and version columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_definition_version UQE_alert_definition_version_alert_definition_uid_version]"
logger=migrator t=2024-08-29T15:36:51.305117949Z level=debug msg="Executing sql migration" id="add index in alert_definition_version table on alert_definition_uid and version columns" sql="CREATE UNIQUE INDEX `UQE_alert_definition_version_alert_definition_uid_version` ON `alert_definition_version` (`alert_definition_uid`,`version`);"
logger=migrator t=2024-08-29T15:36:51.307321775Z level=info msg="Migration successfully executed" id="add index in alert_definition_version table on alert_definition_uid and version columns" duration=4.425464ms
logger=migrator t=2024-08-29T15:36:51.322493823Z level=info msg="Executing migration" id="alter alert_definition_version table data column to mediumtext in mysql"
logger=migrator t=2024-08-29T15:36:51.323515988Z level=debug msg="Executing sql migration" id="alter alert_definition_version table data column to mediumtext in mysql" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:51.323686146Z level=info msg="Migration successfully executed" id="alter alert_definition_version table data column to mediumtext in mysql" duration=1.195041ms
logger=migrator t=2024-08-29T15:36:51.334772624Z level=info msg="Executing migration" id="drop alert_definition_version table"
logger=migrator t=2024-08-29T15:36:51.334812047Z level=debug msg="Executing sql migration" id="drop alert_definition_version table" sql="DROP TABLE IF EXISTS `alert_definition_version`"
logger=migrator t=2024-08-29T15:36:51.336054371Z level=info msg="Migration successfully executed" id="drop alert_definition_version table" duration=1.279031ms
logger=migrator t=2024-08-29T15:36:51.349274428Z level=info msg="Executing migration" id="create alert_instance table"
logger=migrator t=2024-08-29T15:36:51.349466773Z level=debug msg="Executing sql migration" id="create alert_instance table" sql="CREATE TABLE IF NOT EXISTS `alert_instance` (\n`def_org_id` INTEGER NOT NULL\n, `def_uid` TEXT NOT NULL DEFAULT 0\n, `labels` TEXT NOT NULL\n, `labels_hash` TEXT NOT NULL\n, `current_state` TEXT NOT NULL\n, `current_state_since` INTEGER NOT NULL\n, `last_eval_time` INTEGER NOT NULL\n, PRIMARY KEY ( `def_org_id`,`def_uid`,`labels_hash` ));"
logger=migrator t=2024-08-29T15:36:51.351351676Z level=info msg="Migration successfully executed" id="create alert_instance table" duration=2.078743ms
logger=migrator t=2024-08-29T15:36:51.361769306Z level=info msg="Executing migration" id="add index in alert_instance table on def_org_id, def_uid and current_state columns"
logger=migrator t=2024-08-29T15:36:51.361917509Z level=debug msg="Executing migration condition SQL" id="add index in alert_instance table on def_org_id, def_uid and current_state columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_instance IDX_alert_instance_def_org_id_def_uid_current_state]"
logger=migrator t=2024-08-29T15:36:51.362884398Z level=debug msg="Executing sql migration" id="add index in alert_instance table on def_org_id, def_uid and current_state columns" sql="CREATE INDEX `IDX_alert_instance_def_org_id_def_uid_current_state` ON `alert_instance` (`def_org_id`,`def_uid`,`current_state`);"
logger=migrator t=2024-08-29T15:36:51.364818777Z level=info msg="Migration successfully executed" id="add index in alert_instance table on def_org_id, def_uid and current_state columns" duration=3.050609ms
logger=migrator t=2024-08-29T15:36:51.376609536Z level=info msg="Executing migration" id="add index in alert_instance table on def_org_id, current_state columns"
logger=migrator t=2024-08-29T15:36:51.376821245Z level=debug msg="Executing migration condition SQL" id="add index in alert_instance table on def_org_id, current_state columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_instance IDX_alert_instance_def_org_id_current_state]"
logger=migrator t=2024-08-29T15:36:51.377887834Z level=debug msg="Executing sql migration" id="add index in alert_instance table on def_org_id, current_state columns" sql="CREATE INDEX `IDX_alert_instance_def_org_id_current_state` ON `alert_instance` (`def_org_id`,`current_state`);"
logger=migrator t=2024-08-29T15:36:51.378962301Z level=info msg="Migration successfully executed" id="add index in alert_instance table on def_org_id, current_state columns" duration=2.354643ms
logger=migrator t=2024-08-29T15:36:51.391248595Z level=info msg="Executing migration" id="add column current_state_end to alert_instance"
logger=migrator t=2024-08-29T15:36:51.391297982Z level=debug msg="Executing sql migration" id="add column current_state_end to alert_instance" sql="alter table `alert_instance` ADD COLUMN `current_state_end` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:51.398708088Z level=info msg="Migration successfully executed" id="add column current_state_end to alert_instance" duration=7.458077ms
logger=migrator t=2024-08-29T15:36:51.412347889Z level=info msg="Executing migration" id="remove index def_org_id, def_uid, current_state on alert_instance"
logger=migrator t=2024-08-29T15:36:51.412469589Z level=debug msg="Executing migration condition SQL" id="remove index def_org_id, def_uid, current_state on alert_instance" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_instance IDX_alert_instance_def_org_id_def_uid_current_state]"
logger=migrator t=2024-08-29T15:36:51.413535695Z level=debug msg="Executing sql migration" id="remove index def_org_id, def_uid, current_state on alert_instance" sql="DROP INDEX `IDX_alert_instance_def_org_id_def_uid_current_state`"
logger=migrator t=2024-08-29T15:36:51.414888945Z level=info msg="Migration successfully executed" id="remove index def_org_id, def_uid, current_state on alert_instance" duration=2.541736ms
logger=migrator t=2024-08-29T15:36:51.427636553Z level=info msg="Executing migration" id="remove index def_org_id, current_state on alert_instance"
logger=migrator t=2024-08-29T15:36:51.427920184Z level=debug msg="Executing migration condition SQL" id="remove index def_org_id, current_state on alert_instance" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_instance IDX_alert_instance_def_org_id_current_state]"
logger=migrator t=2024-08-29T15:36:51.429456039Z level=debug msg="Executing sql migration" id="remove index def_org_id, current_state on alert_instance" sql="DROP INDEX `IDX_alert_instance_def_org_id_current_state`"
logger=migrator t=2024-08-29T15:36:51.430692271Z level=info msg="Migration successfully executed" id="remove index def_org_id, current_state on alert_instance" duration=3.056757ms
logger=migrator t=2024-08-29T15:36:51.443015426Z level=info msg="Executing migration" id="rename def_org_id to rule_org_id in alert_instance"
logger=migrator t=2024-08-29T15:36:51.443579919Z level=debug msg="Executing sql migration" id="rename def_org_id to rule_org_id in alert_instance" sql="ALTER TABLE alert_instance RENAME COLUMN def_org_id TO rule_org_id;"
logger=migrator t=2024-08-29T15:36:51.480953886Z level=info msg="Migration successfully executed" id="rename def_org_id to rule_org_id in alert_instance" duration=37.934699ms
logger=migrator t=2024-08-29T15:36:51.502207673Z level=info msg="Executing migration" id="rename def_uid to rule_uid in alert_instance"
logger=migrator t=2024-08-29T15:36:51.502708492Z level=debug msg="Executing sql migration" id="rename def_uid to rule_uid in alert_instance" sql="ALTER TABLE alert_instance RENAME COLUMN def_uid TO rule_uid;"
logger=migrator t=2024-08-29T15:36:51.548718367Z level=info msg="Migration successfully executed" id="rename def_uid to rule_uid in alert_instance" duration=46.509686ms
logger=migrator t=2024-08-29T15:36:51.56289153Z level=info msg="Executing migration" id="add index rule_org_id, rule_uid, current_state on alert_instance"
logger=migrator t=2024-08-29T15:36:51.563345447Z level=debug msg="Executing migration condition SQL" id="add index rule_org_id, rule_uid, current_state on alert_instance" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_instance IDX_alert_instance_rule_org_id_rule_uid_current_state]"
logger=migrator t=2024-08-29T15:36:51.564418205Z level=debug msg="Executing sql migration" id="add index rule_org_id, rule_uid, current_state on alert_instance" sql="CREATE INDEX `IDX_alert_instance_rule_org_id_rule_uid_current_state` ON `alert_instance` (`rule_org_id`,`rule_uid`,`current_state`);"
logger=migrator t=2024-08-29T15:36:51.565999508Z level=info msg="Migration successfully executed" id="add index rule_org_id, rule_uid, current_state on alert_instance" duration=3.108085ms
logger=migrator t=2024-08-29T15:36:51.580952826Z level=info msg="Executing migration" id="add index rule_org_id, current_state on alert_instance"
logger=migrator t=2024-08-29T15:36:51.5813844Z level=debug msg="Executing migration condition SQL" id="add index rule_org_id, current_state on alert_instance" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_instance IDX_alert_instance_rule_org_id_current_state]"
logger=migrator t=2024-08-29T15:36:51.583235383Z level=debug msg="Executing sql migration" id="add index rule_org_id, current_state on alert_instance" sql="CREATE INDEX `IDX_alert_instance_rule_org_id_current_state` ON `alert_instance` (`rule_org_id`,`current_state`);"
logger=migrator t=2024-08-29T15:36:51.584589379Z level=info msg="Migration successfully executed" id="add index rule_org_id, current_state on alert_instance" duration=3.635522ms
logger=migrator t=2024-08-29T15:36:51.598233989Z level=info msg="Executing migration" id="add current_reason column related to current_state"
logger=migrator t=2024-08-29T15:36:51.598402792Z level=debug msg="Executing sql migration" id="add current_reason column related to current_state" sql="alter table `alert_instance` ADD COLUMN `current_reason` TEXT NULL "
logger=migrator t=2024-08-29T15:36:51.605295161Z level=info msg="Migration successfully executed" id="add current_reason column related to current_state" duration=7.0604ms
logger=migrator t=2024-08-29T15:36:51.618675651Z level=info msg="Executing migration" id="add result_fingerprint column to alert_instance"
logger=migrator t=2024-08-29T15:36:51.618949827Z level=debug msg="Executing sql migration" id="add result_fingerprint column to alert_instance" sql="alter table `alert_instance` ADD COLUMN `result_fingerprint` TEXT NULL "
logger=migrator t=2024-08-29T15:36:51.624659379Z level=info msg="Migration successfully executed" id="add result_fingerprint column to alert_instance" duration=5.981268ms
logger=migrator t=2024-08-29T15:36:51.637456836Z level=info msg="Executing migration" id="create alert_rule table"
logger=migrator t=2024-08-29T15:36:51.638088893Z level=debug msg="Executing sql migration" id="create alert_rule table" sql="CREATE TABLE IF NOT EXISTS `alert_rule` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `title` TEXT NOT NULL\n, `condition` TEXT NOT NULL\n, `data` TEXT NOT NULL\n, `updated` DATETIME NOT NULL\n, `interval_seconds` INTEGER NOT NULL DEFAULT 60\n, `version` INTEGER NOT NULL DEFAULT 0\n, `uid` TEXT NOT NULL DEFAULT 0\n, `namespace_uid` TEXT NOT NULL\n, `rule_group` TEXT NOT NULL\n, `no_data_state` TEXT NOT NULL DEFAULT 'NoData'\n, `exec_err_state` TEXT NOT NULL DEFAULT 'Alerting'\n);"
logger=migrator t=2024-08-29T15:36:51.639936989Z level=info msg="Migration successfully executed" id="create alert_rule table" duration=2.469671ms
logger=migrator t=2024-08-29T15:36:51.654469532Z level=info msg="Executing migration" id="add index in alert_rule on org_id and title columns"
logger=migrator t=2024-08-29T15:36:51.65451853Z level=debug msg="Executing migration condition SQL" id="add index in alert_rule on org_id and title columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule UQE_alert_rule_org_id_title]"
logger=migrator t=2024-08-29T15:36:51.655444315Z level=debug msg="Executing sql migration" id="add index in alert_rule on org_id and title columns" sql="CREATE UNIQUE INDEX `UQE_alert_rule_org_id_title` ON `alert_rule` (`org_id`,`title`);"
logger=migrator t=2024-08-29T15:36:51.656607644Z level=info msg="Migration successfully executed" id="add index in alert_rule on org_id and title columns" duration=2.139071ms
logger=migrator t=2024-08-29T15:36:51.668577581Z level=info msg="Executing migration" id="add index in alert_rule on org_id and uid columns"
logger=migrator t=2024-08-29T15:36:51.668729158Z level=debug msg="Executing migration condition SQL" id="add index in alert_rule on org_id and uid columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule UQE_alert_rule_org_id_uid]"
logger=migrator t=2024-08-29T15:36:51.671532409Z level=debug msg="Executing sql migration" id="add index in alert_rule on org_id and uid columns" sql="CREATE UNIQUE INDEX `UQE_alert_rule_org_id_uid` ON `alert_rule` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:51.673944002Z level=info msg="Migration successfully executed" id="add index in alert_rule on org_id and uid columns" duration=5.364936ms
logger=migrator t=2024-08-29T15:36:51.685624604Z level=info msg="Executing migration" id="add index in alert_rule on org_id, namespace_uid, group_uid columns"
logger=migrator t=2024-08-29T15:36:51.685789931Z level=debug msg="Executing migration condition SQL" id="add index in alert_rule on org_id, namespace_uid, group_uid columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule IDX_alert_rule_org_id_namespace_uid_rule_group]"
logger=migrator t=2024-08-29T15:36:51.686409325Z level=debug msg="Executing sql migration" id="add index in alert_rule on org_id, namespace_uid, group_uid columns" sql="CREATE INDEX `IDX_alert_rule_org_id_namespace_uid_rule_group` ON `alert_rule` (`org_id`,`namespace_uid`,`rule_group`);"
logger=migrator t=2024-08-29T15:36:51.687416055Z level=info msg="Migration successfully executed" id="add index in alert_rule on org_id, namespace_uid, group_uid columns" duration=1.79026ms
logger=migrator t=2024-08-29T15:36:51.699255242Z level=info msg="Executing migration" id="alter alert_rule table data column to mediumtext in mysql"
logger=migrator t=2024-08-29T15:36:51.699318449Z level=debug msg="Executing sql migration" id="alter alert_rule table data column to mediumtext in mysql" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:51.700732605Z level=info msg="Migration successfully executed" id="alter alert_rule table data column to mediumtext in mysql" duration=1.479041ms
logger=migrator t=2024-08-29T15:36:51.714116613Z level=info msg="Executing migration" id="add column for to alert_rule"
logger=migrator t=2024-08-29T15:36:51.714551628Z level=debug msg="Executing sql migration" id="add column for to alert_rule" sql="alter table `alert_rule` ADD COLUMN `for` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:51.720741717Z level=info msg="Migration successfully executed" id="add column for to alert_rule" duration=6.62284ms
logger=migrator t=2024-08-29T15:36:51.736431204Z level=info msg="Executing migration" id="add column annotations to alert_rule"
logger=migrator t=2024-08-29T15:36:51.736552355Z level=debug msg="Executing sql migration" id="add column annotations to alert_rule" sql="alter table `alert_rule` ADD COLUMN `annotations` TEXT NULL "
logger=migrator t=2024-08-29T15:36:51.743585682Z level=info msg="Migration successfully executed" id="add column annotations to alert_rule" duration=7.154955ms
logger=migrator t=2024-08-29T15:36:51.754476087Z level=info msg="Executing migration" id="add column labels to alert_rule"
logger=migrator t=2024-08-29T15:36:51.754677297Z level=debug msg="Executing sql migration" id="add column labels to alert_rule" sql="alter table `alert_rule` ADD COLUMN `labels` TEXT NULL "
logger=migrator t=2024-08-29T15:36:51.760667137Z level=info msg="Migration successfully executed" id="add column labels to alert_rule" duration=6.187777ms
logger=migrator t=2024-08-29T15:36:51.773637467Z level=info msg="Executing migration" id="remove unique index from alert_rule on org_id, title columns"
logger=migrator t=2024-08-29T15:36:51.773783743Z level=debug msg="Executing migration condition SQL" id="remove unique index from alert_rule on org_id, title columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule UQE_alert_rule_org_id_title]"
logger=migrator t=2024-08-29T15:36:51.77610132Z level=debug msg="Executing sql migration" id="remove unique index from alert_rule on org_id, title columns" sql="DROP INDEX `UQE_alert_rule_org_id_title`"
logger=migrator t=2024-08-29T15:36:51.777444689Z level=info msg="Migration successfully executed" id="remove unique index from alert_rule on org_id, title columns" duration=3.809793ms
logger=migrator t=2024-08-29T15:36:51.79140583Z level=info msg="Executing migration" id="add index in alert_rule on org_id, namespase_uid and title columns"
logger=migrator t=2024-08-29T15:36:51.791815412Z level=debug msg="Executing migration condition SQL" id="add index in alert_rule on org_id, namespase_uid and title columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule UQE_alert_rule_org_id_namespace_uid_title]"
logger=migrator t=2024-08-29T15:36:51.793817493Z level=debug msg="Executing sql migration" id="add index in alert_rule on org_id, namespase_uid and title columns" sql="CREATE UNIQUE INDEX `UQE_alert_rule_org_id_namespace_uid_title` ON `alert_rule` (`org_id`,`namespace_uid`,`title`);"
logger=migrator t=2024-08-29T15:36:51.795529798Z level=info msg="Migration successfully executed" id="add index in alert_rule on org_id, namespase_uid and title columns" duration=4.129893ms
logger=migrator t=2024-08-29T15:36:51.8063746Z level=info msg="Executing migration" id="add dashboard_uid column to alert_rule"
logger=migrator t=2024-08-29T15:36:51.806523012Z level=debug msg="Executing sql migration" id="add dashboard_uid column to alert_rule" sql="alter table `alert_rule` ADD COLUMN `dashboard_uid` TEXT NULL "
logger=migrator t=2024-08-29T15:36:51.813657761Z level=info msg="Migration successfully executed" id="add dashboard_uid column to alert_rule" duration=7.282767ms
logger=migrator t=2024-08-29T15:36:51.828631605Z level=info msg="Executing migration" id="add panel_id column to alert_rule"
logger=migrator t=2024-08-29T15:36:51.829268099Z level=debug msg="Executing sql migration" id="add panel_id column to alert_rule" sql="alter table `alert_rule` ADD COLUMN `panel_id` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:51.838227671Z level=info msg="Migration successfully executed" id="add panel_id column to alert_rule" duration=9.595202ms
logger=migrator t=2024-08-29T15:36:51.854895936Z level=info msg="Executing migration" id="add index in alert_rule on org_id, dashboard_uid and panel_id columns"
logger=migrator t=2024-08-29T15:36:51.855818938Z level=debug msg="Executing migration condition SQL" id="add index in alert_rule on org_id, dashboard_uid and panel_id columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule IDX_alert_rule_org_id_dashboard_uid_panel_id]"
logger=migrator t=2024-08-29T15:36:51.859781516Z level=debug msg="Executing sql migration" id="add index in alert_rule on org_id, dashboard_uid and panel_id columns" sql="CREATE INDEX `IDX_alert_rule_org_id_dashboard_uid_panel_id` ON `alert_rule` (`org_id`,`dashboard_uid`,`panel_id`);"
logger=migrator t=2024-08-29T15:36:51.862874716Z level=info msg="Migration successfully executed" id="add index in alert_rule on org_id, dashboard_uid and panel_id columns" duration=7.975995ms
logger=migrator t=2024-08-29T15:36:51.88165856Z level=info msg="Executing migration" id="add rule_group_idx column to alert_rule"
logger=migrator t=2024-08-29T15:36:51.88233704Z level=debug msg="Executing sql migration" id="add rule_group_idx column to alert_rule" sql="alter table `alert_rule` ADD COLUMN `rule_group_idx` INTEGER NOT NULL DEFAULT 1 "
logger=migrator t=2024-08-29T15:36:51.893857083Z level=info msg="Migration successfully executed" id="add rule_group_idx column to alert_rule" duration=12.380584ms
logger=migrator t=2024-08-29T15:36:51.912891604Z level=info msg="Executing migration" id="add is_paused column to alert_rule table"
logger=migrator t=2024-08-29T15:36:51.913026998Z level=debug msg="Executing sql migration" id="add is_paused column to alert_rule table" sql="alter table `alert_rule` ADD COLUMN `is_paused` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:51.918846561Z level=info msg="Migration successfully executed" id="add is_paused column to alert_rule table" duration=5.95282ms
logger=migrator t=2024-08-29T15:36:51.931326152Z level=info msg="Executing migration" id="fix is_paused column for alert_rule table"
logger=migrator t=2024-08-29T15:36:51.931370567Z level=debug msg="Executing sql migration" id="fix is_paused column for alert_rule table" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:51.93145595Z level=info msg="Migration successfully executed" id="fix is_paused column for alert_rule table" duration=133.347µs
logger=migrator t=2024-08-29T15:36:51.945705112Z level=info msg="Executing migration" id="create alert_rule_version table"
logger=migrator t=2024-08-29T15:36:51.946490693Z level=debug msg="Executing sql migration" id="create alert_rule_version table" sql="CREATE TABLE IF NOT EXISTS `alert_rule_version` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `rule_org_id` INTEGER NOT NULL\n, `rule_uid` TEXT NOT NULL DEFAULT 0\n, `rule_namespace_uid` TEXT NOT NULL\n, `rule_group` TEXT NOT NULL\n, `parent_version` INTEGER NOT NULL\n, `restored_from` INTEGER NOT NULL\n, `version` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `title` TEXT NOT NULL\n, `condition` TEXT NOT NULL\n, `data` TEXT NOT NULL\n, `interval_seconds` INTEGER NOT NULL\n, `no_data_state` TEXT NOT NULL DEFAULT 'NoData'\n, `exec_err_state` TEXT NOT NULL DEFAULT 'Alerting'\n);"
logger=migrator t=2024-08-29T15:36:51.948671703Z level=info msg="Migration successfully executed" id="create alert_rule_version table" duration=2.969032ms
logger=migrator t=2024-08-29T15:36:51.967890978Z level=info msg="Executing migration" id="add index in alert_rule_version table on rule_org_id, rule_uid and version columns"
logger=migrator t=2024-08-29T15:36:51.967943957Z level=debug msg="Executing migration condition SQL" id="add index in alert_rule_version table on rule_org_id, rule_uid and version columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule_version UQE_alert_rule_version_rule_org_id_rule_uid_version]"
logger=migrator t=2024-08-29T15:36:51.96875483Z level=debug msg="Executing sql migration" id="add index in alert_rule_version table on rule_org_id, rule_uid and version columns" sql="CREATE UNIQUE INDEX `UQE_alert_rule_version_rule_org_id_rule_uid_version` ON `alert_rule_version` (`rule_org_id`,`rule_uid`,`version`);"
logger=migrator t=2024-08-29T15:36:51.96938302Z level=info msg="Migration successfully executed" id="add index in alert_rule_version table on rule_org_id, rule_uid and version columns" duration=1.494646ms
logger=migrator t=2024-08-29T15:36:51.982521188Z level=info msg="Executing migration" id="add index in alert_rule_version table on rule_org_id, rule_namespace_uid and rule_group columns"
logger=migrator t=2024-08-29T15:36:51.983036417Z level=debug msg="Executing migration condition SQL" id="add index in alert_rule_version table on rule_org_id, rule_namespace_uid and rule_group columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_rule_version IDX_alert_rule_version_rule_org_id_rule_namespace_uid_rule_group]"
logger=migrator t=2024-08-29T15:36:51.984197389Z level=debug msg="Executing sql migration" id="add index in alert_rule_version table on rule_org_id, rule_namespace_uid and rule_group columns" sql="CREATE INDEX `IDX_alert_rule_version_rule_org_id_rule_namespace_uid_rule_group` ON `alert_rule_version` (`rule_org_id`,`rule_namespace_uid`,`rule_group`);"
logger=migrator t=2024-08-29T15:36:51.985820921Z level=info msg="Migration successfully executed" id="add index in alert_rule_version table on rule_org_id, rule_namespace_uid and rule_group columns" duration=3.300407ms
logger=migrator t=2024-08-29T15:36:52.001756481Z level=info msg="Executing migration" id="alter alert_rule_version table data column to mediumtext in mysql"
logger=migrator t=2024-08-29T15:36:52.001806008Z level=debug msg="Executing sql migration" id="alter alert_rule_version table data column to mediumtext in mysql" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:52.002653702Z level=info msg="Migration successfully executed" id="alter alert_rule_version table data column to mediumtext in mysql" duration=899.991µs
logger=migrator t=2024-08-29T15:36:52.018599928Z level=info msg="Executing migration" id="add column for to alert_rule_version"
logger=migrator t=2024-08-29T15:36:52.018873505Z level=debug msg="Executing sql migration" id="add column for to alert_rule_version" sql="alter table `alert_rule_version` ADD COLUMN `for` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:52.03287399Z level=info msg="Migration successfully executed" id="add column for to alert_rule_version" duration=14.271264ms
logger=migrator t=2024-08-29T15:36:52.046293812Z level=info msg="Executing migration" id="add column annotations to alert_rule_version"
logger=migrator t=2024-08-29T15:36:52.046679694Z level=debug msg="Executing sql migration" id="add column annotations to alert_rule_version" sql="alter table `alert_rule_version` ADD COLUMN `annotations` TEXT NULL "
logger=migrator t=2024-08-29T15:36:52.056495692Z level=info msg="Migration successfully executed" id="add column annotations to alert_rule_version" duration=10.197039ms
logger=migrator t=2024-08-29T15:36:52.069904329Z level=info msg="Executing migration" id="add column labels to alert_rule_version"
logger=migrator t=2024-08-29T15:36:52.070452971Z level=debug msg="Executing sql migration" id="add column labels to alert_rule_version" sql="alter table `alert_rule_version` ADD COLUMN `labels` TEXT NULL "
logger=migrator t=2024-08-29T15:36:52.078319911Z level=info msg="Migration successfully executed" id="add column labels to alert_rule_version" duration=8.415369ms
logger=migrator t=2024-08-29T15:36:52.093214055Z level=info msg="Executing migration" id="add rule_group_idx column to alert_rule_version"
logger=migrator t=2024-08-29T15:36:52.093780892Z level=debug msg="Executing sql migration" id="add rule_group_idx column to alert_rule_version" sql="alter table `alert_rule_version` ADD COLUMN `rule_group_idx` INTEGER NOT NULL DEFAULT 1 "
logger=migrator t=2024-08-29T15:36:52.101150429Z level=info msg="Migration successfully executed" id="add rule_group_idx column to alert_rule_version" duration=7.93647ms
logger=migrator t=2024-08-29T15:36:52.114998499Z level=info msg="Executing migration" id="add is_paused column to alert_rule_versions table"
logger=migrator t=2024-08-29T15:36:52.115443901Z level=debug msg="Executing sql migration" id="add is_paused column to alert_rule_versions table" sql="alter table `alert_rule_version` ADD COLUMN `is_paused` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:52.125206384Z level=info msg="Migration successfully executed" id="add is_paused column to alert_rule_versions table" duration=10.206463ms
logger=migrator t=2024-08-29T15:36:52.137487141Z level=info msg="Executing migration" id="fix is_paused column for alert_rule_version table"
logger=migrator t=2024-08-29T15:36:52.137976908Z level=debug msg="Executing sql migration" id="fix is_paused column for alert_rule_version table" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:52.138375389Z level=info msg="Migration successfully executed" id="fix is_paused column for alert_rule_version table" duration=890.741µs
logger=migrator t=2024-08-29T15:36:52.151437964Z level=info msg="Executing migration" id=create_alert_configuration_table
logger=migrator t=2024-08-29T15:36:52.151683649Z level=debug msg="Executing sql migration" id=create_alert_configuration_table sql="CREATE TABLE IF NOT EXISTS `alert_configuration` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `alertmanager_configuration` TEXT NOT NULL\n, `configuration_version` TEXT NOT NULL\n, `created_at` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.152999765Z level=info msg="Migration successfully executed" id=create_alert_configuration_table duration=1.563032ms
logger=migrator t=2024-08-29T15:36:52.166118532Z level=info msg="Executing migration" id="Add column default in alert_configuration"
logger=migrator t=2024-08-29T15:36:52.166553495Z level=debug msg="Executing sql migration" id="Add column default in alert_configuration" sql="alter table `alert_configuration` ADD COLUMN `default` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:52.173242843Z level=info msg="Migration successfully executed" id="Add column default in alert_configuration" duration=7.123735ms
logger=migrator t=2024-08-29T15:36:52.18596572Z level=info msg="Executing migration" id="alert alert_configuration alertmanager_configuration column from TEXT to MEDIUMTEXT if mysql"
logger=migrator t=2024-08-29T15:36:52.186438058Z level=debug msg="Executing sql migration" id="alert alert_configuration alertmanager_configuration column from TEXT to MEDIUMTEXT if mysql" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:52.186551798Z level=info msg="Migration successfully executed" id="alert alert_configuration alertmanager_configuration column from TEXT to MEDIUMTEXT if mysql" duration=583.061µs
logger=migrator t=2024-08-29T15:36:52.198265998Z level=info msg="Executing migration" id="add column org_id in alert_configuration"
logger=migrator t=2024-08-29T15:36:52.198306039Z level=debug msg="Executing sql migration" id="add column org_id in alert_configuration" sql="alter table `alert_configuration` ADD COLUMN `org_id` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:52.206273459Z level=info msg="Migration successfully executed" id="add column org_id in alert_configuration" duration=8.0055ms
logger=migrator t=2024-08-29T15:36:52.218832434Z level=info msg="Executing migration" id="add index in alert_configuration table on org_id column"
logger=migrator t=2024-08-29T15:36:52.218874786Z level=debug msg="Executing migration condition SQL" id="add index in alert_configuration table on org_id column" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_configuration IDX_alert_configuration_org_id]"
logger=migrator t=2024-08-29T15:36:52.219678212Z level=debug msg="Executing sql migration" id="add index in alert_configuration table on org_id column" sql="CREATE INDEX `IDX_alert_configuration_org_id` ON `alert_configuration` (`org_id`);"
logger=migrator t=2024-08-29T15:36:52.221398206Z level=info msg="Migration successfully executed" id="add index in alert_configuration table on org_id column" duration=2.567394ms
logger=migrator t=2024-08-29T15:36:52.235410004Z level=info msg="Executing migration" id="add configuration_hash column to alert_configuration"
logger=migrator t=2024-08-29T15:36:52.235455871Z level=debug msg="Executing sql migration" id="add configuration_hash column to alert_configuration" sql="alter table `alert_configuration` ADD COLUMN `configuration_hash` TEXT NOT NULL DEFAULT 'not-yet-calculated' "
logger=migrator t=2024-08-29T15:36:52.243779842Z level=info msg="Migration successfully executed" id="add configuration_hash column to alert_configuration" duration=8.367458ms
logger=migrator t=2024-08-29T15:36:52.256918161Z level=info msg="Executing migration" id=create_ngalert_configuration_table
logger=migrator t=2024-08-29T15:36:52.257204043Z level=debug msg="Executing sql migration" id=create_ngalert_configuration_table sql="CREATE TABLE IF NOT EXISTS `ngalert_configuration` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `alertmanagers` TEXT NULL\n, `created_at` INTEGER NOT NULL\n, `updated_at` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.259176994Z level=info msg="Migration successfully executed" id=create_ngalert_configuration_table duration=2.259868ms
logger=migrator t=2024-08-29T15:36:52.270325757Z level=info msg="Executing migration" id="add index in ngalert_configuration on org_id column"
logger=migrator t=2024-08-29T15:36:52.270427012Z level=debug msg="Executing migration condition SQL" id="add index in ngalert_configuration on org_id column" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[ngalert_configuration UQE_ngalert_configuration_org_id]"
logger=migrator t=2024-08-29T15:36:52.271632894Z level=debug msg="Executing sql migration" id="add index in ngalert_configuration on org_id column" sql="CREATE UNIQUE INDEX `UQE_ngalert_configuration_org_id` ON `ngalert_configuration` (`org_id`);"
logger=migrator t=2024-08-29T15:36:52.272925027Z level=info msg="Migration successfully executed" id="add index in ngalert_configuration on org_id column" duration=2.600024ms
logger=migrator t=2024-08-29T15:36:52.286466857Z level=info msg="Executing migration" id="add column send_alerts_to in ngalert_configuration"
logger=migrator t=2024-08-29T15:36:52.287341182Z level=debug msg="Executing sql migration" id="add column send_alerts_to in ngalert_configuration" sql="alter table `ngalert_configuration` ADD COLUMN `send_alerts_to` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:52.294509229Z level=info msg="Migration successfully executed" id="add column send_alerts_to in ngalert_configuration" duration=8.042255ms
logger=migrator t=2024-08-29T15:36:52.304889041Z level=info msg="Executing migration" id="create provenance_type table"
logger=migrator t=2024-08-29T15:36:52.304934829Z level=debug msg="Executing sql migration" id="create provenance_type table" sql="CREATE TABLE IF NOT EXISTS `provenance_type` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `record_key` TEXT NOT NULL\n, `record_type` TEXT NOT NULL\n, `provenance` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.306057Z level=info msg="Migration successfully executed" id="create provenance_type table" duration=1.169308ms
logger=migrator t=2024-08-29T15:36:52.316911111Z level=info msg="Executing migration" id="add index to uniquify (record_key, record_type, org_id) columns"
logger=migrator t=2024-08-29T15:36:52.316947455Z level=debug msg="Executing migration condition SQL" id="add index to uniquify (record_key, record_type, org_id) columns" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[provenance_type UQE_provenance_type_record_type_record_key_org_id]"
logger=migrator t=2024-08-29T15:36:52.318773973Z level=debug msg="Executing sql migration" id="add index to uniquify (record_key, record_type, org_id) columns" sql="CREATE UNIQUE INDEX `UQE_provenance_type_record_type_record_key_org_id` ON `provenance_type` (`record_type`,`record_key`,`org_id`);"
logger=migrator t=2024-08-29T15:36:52.320451203Z level=info msg="Migration successfully executed" id="add index to uniquify (record_key, record_type, org_id) columns" duration=3.541009ms
logger=migrator t=2024-08-29T15:36:52.331639569Z level=info msg="Executing migration" id="create alert_image table"
logger=migrator t=2024-08-29T15:36:52.331738544Z level=debug msg="Executing sql migration" id="create alert_image table" sql="CREATE TABLE IF NOT EXISTS `alert_image` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `token` TEXT NOT NULL\n, `path` TEXT NOT NULL\n, `url` TEXT NOT NULL\n, `created_at` DATETIME NOT NULL\n, `expires_at` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.332902236Z level=info msg="Migration successfully executed" id="create alert_image table" duration=1.264144ms
logger=migrator t=2024-08-29T15:36:52.343480903Z level=info msg="Executing migration" id="add unique index on token to alert_image table"
logger=migrator t=2024-08-29T15:36:52.343521748Z level=debug msg="Executing migration condition SQL" id="add unique index on token to alert_image table" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_image UQE_alert_image_token]"
logger=migrator t=2024-08-29T15:36:52.344190349Z level=debug msg="Executing sql migration" id="add unique index on token to alert_image table" sql="CREATE UNIQUE INDEX `UQE_alert_image_token` ON `alert_image` (`token`);"
logger=migrator t=2024-08-29T15:36:52.344729997Z level=info msg="Migration successfully executed" id="add unique index on token to alert_image table" duration=1.25114ms
logger=migrator t=2024-08-29T15:36:52.356311828Z level=info msg="Executing migration" id="support longer URLs in alert_image table"
logger=migrator t=2024-08-29T15:36:52.356356913Z level=debug msg="Executing sql migration" id="support longer URLs in alert_image table" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:52.356429469Z level=info msg="Migration successfully executed" id="support longer URLs in alert_image table" duration=120.871µs
logger=migrator t=2024-08-29T15:36:52.368454594Z level=info msg="Executing migration" id=create_alert_configuration_history_table
logger=migrator t=2024-08-29T15:36:52.368503599Z level=debug msg="Executing sql migration" id=create_alert_configuration_history_table sql="CREATE TABLE IF NOT EXISTS `alert_configuration_history` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL DEFAULT 0\n, `alertmanager_configuration` TEXT NOT NULL\n, `configuration_hash` TEXT NOT NULL DEFAULT 'not-yet-calculated'\n, `configuration_version` TEXT NOT NULL\n, `created_at` INTEGER NOT NULL\n, `default` INTEGER NOT NULL DEFAULT 0\n);"
logger=migrator t=2024-08-29T15:36:52.370640575Z level=info msg="Migration successfully executed" id=create_alert_configuration_history_table duration=2.186278ms
logger=migrator t=2024-08-29T15:36:52.382500249Z level=info msg="Executing migration" id="drop non-unique orgID index on alert_configuration"
logger=migrator t=2024-08-29T15:36:52.382622296Z level=debug msg="Executing migration condition SQL" id="drop non-unique orgID index on alert_configuration" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_configuration IDX_alert_configuration_org_id]"
logger=migrator t=2024-08-29T15:36:52.384441996Z level=debug msg="Executing sql migration" id="drop non-unique orgID index on alert_configuration" sql="DROP INDEX `IDX_alert_configuration_org_id`"
logger=migrator t=2024-08-29T15:36:52.386243547Z level=info msg="Migration successfully executed" id="drop non-unique orgID index on alert_configuration" duration=3.743775ms
logger=migrator t=2024-08-29T15:36:52.400290257Z level=info msg="Executing migration" id="drop unique orgID index on alert_configuration if exists"
logger=migrator t=2024-08-29T15:36:52.40060897Z level=debug msg="Executing migration condition SQL" id="drop unique orgID index on alert_configuration if exists" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_configuration UQE_alert_configuration_org_id]"
logger=migrator t=2024-08-29T15:36:52.402688919Z level=warn msg="Skipping migration: Already executed, but not recorded in migration log" id="drop unique orgID index on alert_configuration if exists"
logger=migrator t=2024-08-29T15:36:52.416463089Z level=info msg="Executing migration" id="extract alertmanager configuration history to separate table"
logger=migrator t=2024-08-29T15:36:52.416572035Z level=debug msg="Executing code migration" id="extract alertmanager configuration history to separate table"
logger=migrator t=2024-08-29T15:36:52.418546034Z level=info msg="Migration successfully executed" id="extract alertmanager configuration history to separate table" duration=2.084621ms
logger=migrator t=2024-08-29T15:36:52.429338853Z level=info msg="Executing migration" id="add unique index on orgID to alert_configuration"
logger=migrator t=2024-08-29T15:36:52.429407205Z level=debug msg="Executing migration condition SQL" id="add unique index on orgID to alert_configuration" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[alert_configuration UQE_alert_configuration_org_id]"
logger=migrator t=2024-08-29T15:36:52.430599553Z level=debug msg="Executing sql migration" id="add unique index on orgID to alert_configuration" sql="CREATE UNIQUE INDEX `UQE_alert_configuration_org_id` ON `alert_configuration` (`org_id`);"
logger=migrator t=2024-08-29T15:36:52.432498103Z level=info msg="Migration successfully executed" id="add unique index on orgID to alert_configuration" duration=3.162515ms
logger=migrator t=2024-08-29T15:36:52.443441994Z level=info msg="Executing migration" id="add last_applied column to alert_configuration_history"
logger=migrator t=2024-08-29T15:36:52.443614981Z level=debug msg="Executing sql migration" id="add last_applied column to alert_configuration_history" sql="alter table `alert_configuration_history` ADD COLUMN `last_applied` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:52.450584801Z level=info msg="Migration successfully executed" id="add last_applied column to alert_configuration_history" duration=7.143911ms
logger=migrator t=2024-08-29T15:36:52.461844584Z level=info msg="Executing migration" id="create library_element table v1"
logger=migrator t=2024-08-29T15:36:52.46257993Z level=debug msg="Executing sql migration" id="create library_element table v1" sql="CREATE TABLE IF NOT EXISTS `library_element` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `folder_id` INTEGER NOT NULL\n, `uid` TEXT NOT NULL\n, `name` TEXT NOT NULL\n, `kind` INTEGER NOT NULL\n, `type` TEXT NOT NULL\n, `description` TEXT NOT NULL\n, `model` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `created_by` INTEGER NOT NULL\n, `updated` DATETIME NOT NULL\n, `updated_by` INTEGER NOT NULL\n, `version` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.464625542Z level=info msg="Migration successfully executed" id="create library_element table v1" duration=2.782509ms
logger=migrator t=2024-08-29T15:36:52.476327255Z level=info msg="Executing migration" id="add index library_element org_id-folder_id-name-kind"
logger=migrator t=2024-08-29T15:36:52.476367459Z level=debug msg="Executing migration condition SQL" id="add index library_element org_id-folder_id-name-kind" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[library_element UQE_library_element_org_id_folder_id_name_kind]"
logger=migrator t=2024-08-29T15:36:52.478843211Z level=debug msg="Executing sql migration" id="add index library_element org_id-folder_id-name-kind" sql="CREATE UNIQUE INDEX `UQE_library_element_org_id_folder_id_name_kind` ON `library_element` (`org_id`,`folder_id`,`name`,`kind`);"
logger=migrator t=2024-08-29T15:36:52.480044286Z level=info msg="Migration successfully executed" id="add index library_element org_id-folder_id-name-kind" duration=3.718469ms
logger=migrator t=2024-08-29T15:36:52.492600159Z level=info msg="Executing migration" id="create library_element_connection table v1"
logger=migrator t=2024-08-29T15:36:52.492717369Z level=debug msg="Executing sql migration" id="create library_element_connection table v1" sql="CREATE TABLE IF NOT EXISTS `library_element_connection` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `element_id` INTEGER NOT NULL\n, `kind` INTEGER NOT NULL\n, `connection_id` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `created_by` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.494472171Z level=info msg="Migration successfully executed" id="create library_element_connection table v1" duration=1.87279ms
logger=migrator t=2024-08-29T15:36:52.510792373Z level=info msg="Executing migration" id="add index library_element_connection element_id-kind-connection_id"
logger=migrator t=2024-08-29T15:36:52.510923001Z level=debug msg="Executing migration condition SQL" id="add index library_element_connection element_id-kind-connection_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[library_element_connection UQE_library_element_connection_element_id_kind_connection_id]"
logger=migrator t=2024-08-29T15:36:52.512076119Z level=debug msg="Executing sql migration" id="add index library_element_connection element_id-kind-connection_id" sql="CREATE UNIQUE INDEX `UQE_library_element_connection_element_id_kind_connection_id` ON `library_element_connection` (`element_id`,`kind`,`connection_id`);"
logger=migrator t=2024-08-29T15:36:52.5137109Z level=info msg="Migration successfully executed" id="add index library_element_connection element_id-kind-connection_id" duration=2.919031ms
logger=migrator t=2024-08-29T15:36:52.55159141Z level=info msg="Executing migration" id="add unique index library_element org_id_uid"
logger=migrator t=2024-08-29T15:36:52.551659148Z level=debug msg="Executing migration condition SQL" id="add unique index library_element org_id_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[library_element UQE_library_element_org_id_uid]"
logger=migrator t=2024-08-29T15:36:52.553157349Z level=debug msg="Executing sql migration" id="add unique index library_element org_id_uid" sql="CREATE UNIQUE INDEX `UQE_library_element_org_id_uid` ON `library_element` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:52.554482543Z level=info msg="Migration successfully executed" id="add unique index library_element org_id_uid" duration=2.882532ms
logger=migrator t=2024-08-29T15:36:52.569505415Z level=info msg="Executing migration" id="increase max description length to 2048"
logger=migrator t=2024-08-29T15:36:52.569608559Z level=debug msg="Executing sql migration" id="increase max description length to 2048" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:52.570481801Z level=info msg="Migration successfully executed" id="increase max description length to 2048" duration=978.788µs
logger=migrator t=2024-08-29T15:36:52.58116758Z level=info msg="Executing migration" id="alter library_element model to mediumtext"
logger=migrator t=2024-08-29T15:36:52.581274959Z level=debug msg="Executing sql migration" id="alter library_element model to mediumtext" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:52.581382416Z level=info msg="Migration successfully executed" id="alter library_element model to mediumtext" duration=218.528µs
logger=migrator t=2024-08-29T15:36:52.592357955Z level=info msg="Executing migration" id="add library_element folder uid"
logger=migrator t=2024-08-29T15:36:52.592619834Z level=debug msg="Executing sql migration" id="add library_element folder uid" sql="alter table `library_element` ADD COLUMN `folder_uid` TEXT NULL "
logger=migrator t=2024-08-29T15:36:52.600577209Z level=info msg="Migration successfully executed" id="add library_element folder uid" duration=8.050145ms
logger=migrator t=2024-08-29T15:36:52.612387034Z level=info msg="Executing migration" id="populate library_element folder_uid"
logger=migrator t=2024-08-29T15:36:52.612437938Z level=debug msg="Executing sql migration" id="populate library_element folder_uid" sql="UPDATE library_element\n\tSET folder_uid = dashboard.uid\n\tFROM dashboard\n\tWHERE library_element.folder_id = dashboard.id AND library_element.org_id = dashboard.org_id"
logger=migrator t=2024-08-29T15:36:52.613414051Z level=info msg="Migration successfully executed" id="populate library_element folder_uid" duration=1.027965ms
logger=migrator t=2024-08-29T15:36:52.62730641Z level=info msg="Executing migration" id="add index library_element org_id-folder_uid-name-kind"
logger=migrator t=2024-08-29T15:36:52.627430989Z level=debug msg="Executing migration condition SQL" id="add index library_element org_id-folder_uid-name-kind" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[library_element UQE_library_element_org_id_folder_uid_name_kind]"
logger=migrator t=2024-08-29T15:36:52.628868316Z level=debug msg="Executing sql migration" id="add index library_element org_id-folder_uid-name-kind" sql="CREATE UNIQUE INDEX `UQE_library_element_org_id_folder_uid_name_kind` ON `library_element` (`org_id`,`folder_uid`,`name`,`kind`);"
logger=migrator t=2024-08-29T15:36:52.630750657Z level=info msg="Migration successfully executed" id="add index library_element org_id-folder_uid-name-kind" duration=3.445775ms
logger=migrator t=2024-08-29T15:36:52.646312839Z level=info msg="Executing migration" id="clone move dashboard alerts to unified alerting"
logger=migrator t=2024-08-29T15:36:52.64635829Z level=debug msg="Executing code migration" id="clone move dashboard alerts to unified alerting"
logger=migrator t=2024-08-29T15:36:52.647350897Z level=info msg="Migration successfully executed" id="clone move dashboard alerts to unified alerting" duration=1.039983ms
logger=migrator t=2024-08-29T15:36:52.660842922Z level=info msg="Executing migration" id="create data_keys table"
logger=migrator t=2024-08-29T15:36:52.660912301Z level=debug msg="Executing sql migration" id="create data_keys table" sql="CREATE TABLE IF NOT EXISTS `data_keys` (\n`name` TEXT PRIMARY KEY NOT NULL\n, `active` INTEGER NOT NULL\n, `scope` TEXT NOT NULL\n, `provider` TEXT NOT NULL\n, `encrypted_data` BLOB NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.663377776Z level=info msg="Migration successfully executed" id="create data_keys table" duration=2.528799ms
logger=migrator t=2024-08-29T15:36:52.677341604Z level=info msg="Executing migration" id="create secrets table"
logger=migrator t=2024-08-29T15:36:52.677386649Z level=debug msg="Executing sql migration" id="create secrets table" sql="CREATE TABLE IF NOT EXISTS `secrets` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `namespace` TEXT NOT NULL\n, `type` TEXT NOT NULL\n, `value` TEXT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.67940814Z level=info msg="Migration successfully executed" id="create secrets table" duration=2.067703ms
logger=migrator t=2024-08-29T15:36:52.69358832Z level=info msg="Executing migration" id="rename data_keys name column to id"
logger=migrator t=2024-08-29T15:36:52.69363354Z level=debug msg="Executing sql migration" id="rename data_keys name column to id" sql="ALTER TABLE `data_keys` RENAME COLUMN `name` TO `id`"
logger=migrator t=2024-08-29T15:36:52.729701909Z level=info msg="Migration successfully executed" id="rename data_keys name column to id" duration=36.115759ms
logger=migrator t=2024-08-29T15:36:52.744911423Z level=info msg="Executing migration" id="add name column into data_keys"
logger=migrator t=2024-08-29T15:36:52.744958809Z level=debug msg="Executing sql migration" id="add name column into data_keys" sql="alter table `data_keys` ADD COLUMN `name` TEXT NOT NULL DEFAULT '' "
logger=migrator t=2024-08-29T15:36:52.751900494Z level=info msg="Migration successfully executed" id="add name column into data_keys" duration=6.987302ms
logger=migrator t=2024-08-29T15:36:52.765918173Z level=info msg="Executing migration" id="copy data_keys id column values into name"
logger=migrator t=2024-08-29T15:36:52.765960943Z level=debug msg="Executing sql migration" id="copy data_keys id column values into name" sql="UPDATE data_keys SET name = id"
logger=migrator t=2024-08-29T15:36:52.766142357Z level=info msg="Migration successfully executed" id="copy data_keys id column values into name" duration=226.537µs
logger=migrator t=2024-08-29T15:36:52.775827084Z level=info msg="Executing migration" id="rename data_keys name column to label"
logger=migrator t=2024-08-29T15:36:52.775863011Z level=debug msg="Executing sql migration" id="rename data_keys name column to label" sql="ALTER TABLE `data_keys` RENAME COLUMN `name` TO `label`"
logger=migrator t=2024-08-29T15:36:52.811740234Z level=info msg="Migration successfully executed" id="rename data_keys name column to label" duration=35.91034ms
logger=migrator t=2024-08-29T15:36:52.826363089Z level=info msg="Executing migration" id="rename data_keys id column back to name"
logger=migrator t=2024-08-29T15:36:52.826672007Z level=debug msg="Executing sql migration" id="rename data_keys id column back to name" sql="ALTER TABLE `data_keys` RENAME COLUMN `id` TO `name`"
logger=migrator t=2024-08-29T15:36:52.859784741Z level=info msg="Migration successfully executed" id="rename data_keys id column back to name" duration=33.419878ms
logger=migrator t=2024-08-29T15:36:52.87042772Z level=info msg="Executing migration" id="create kv_store table v1"
logger=migrator t=2024-08-29T15:36:52.870479924Z level=debug msg="Executing sql migration" id="create kv_store table v1" sql="CREATE TABLE IF NOT EXISTS `kv_store` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `namespace` TEXT NOT NULL\n, `key` TEXT NOT NULL\n, `value` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.873360836Z level=info msg="Migration successfully executed" id="create kv_store table v1" duration=2.933999ms
logger=migrator t=2024-08-29T15:36:52.887945155Z level=info msg="Executing migration" id="add index kv_store.org_id-namespace-key"
logger=migrator t=2024-08-29T15:36:52.887984417Z level=debug msg="Executing migration condition SQL" id="add index kv_store.org_id-namespace-key" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[kv_store UQE_kv_store_org_id_namespace_key]"
logger=migrator t=2024-08-29T15:36:52.889282858Z level=debug msg="Executing sql migration" id="add index kv_store.org_id-namespace-key" sql="CREATE UNIQUE INDEX `UQE_kv_store_org_id_namespace_key` ON `kv_store` (`org_id`,`namespace`,`key`);"
logger=migrator t=2024-08-29T15:36:52.891161683Z level=info msg="Migration successfully executed" id="add index kv_store.org_id-namespace-key" duration=3.21585ms
logger=migrator t=2024-08-29T15:36:52.904359166Z level=info msg="Executing migration" id="update dashboard_uid and panel_id from existing annotations"
logger=migrator t=2024-08-29T15:36:52.904398244Z level=debug msg="Executing code migration" id="update dashboard_uid and panel_id from existing annotations"
logger=migrator t=2024-08-29T15:36:52.905540455Z level=info msg="Migration successfully executed" id="update dashboard_uid and panel_id from existing annotations" duration=1.182536ms
logger=migrator t=2024-08-29T15:36:52.917619749Z level=info msg="Executing migration" id="create permission table"
logger=migrator t=2024-08-29T15:36:52.917669819Z level=debug msg="Executing sql migration" id="create permission table" sql="CREATE TABLE IF NOT EXISTS `permission` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `role_id` INTEGER NOT NULL\n, `action` TEXT NOT NULL\n, `scope` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.919809094Z level=info msg="Migration successfully executed" id="create permission table" duration=2.191004ms
logger=migrator t=2024-08-29T15:36:52.931333046Z level=info msg="Executing migration" id="add unique index permission.role_id"
logger=migrator t=2024-08-29T15:36:52.931377257Z level=debug msg="Executing migration condition SQL" id="add unique index permission.role_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[permission IDX_permission_role_id]"
logger=migrator t=2024-08-29T15:36:52.932529388Z level=debug msg="Executing sql migration" id="add unique index permission.role_id" sql="CREATE INDEX `IDX_permission_role_id` ON `permission` (`role_id`);"
logger=migrator t=2024-08-29T15:36:52.934220033Z level=info msg="Migration successfully executed" id="add unique index permission.role_id" duration=2.889197ms
logger=migrator t=2024-08-29T15:36:52.944318609Z level=info msg="Executing migration" id="add unique index role_id_action_scope"
logger=migrator t=2024-08-29T15:36:52.944419199Z level=debug msg="Executing migration condition SQL" id="add unique index role_id_action_scope" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[permission UQE_permission_role_id_action_scope]"
logger=migrator t=2024-08-29T15:36:52.94565344Z level=debug msg="Executing sql migration" id="add unique index role_id_action_scope" sql="CREATE UNIQUE INDEX `UQE_permission_role_id_action_scope` ON `permission` (`role_id`,`action`,`scope`);"
logger=migrator t=2024-08-29T15:36:52.947497625Z level=info msg="Migration successfully executed" id="add unique index role_id_action_scope" duration=3.180485ms
logger=migrator t=2024-08-29T15:36:52.959823931Z level=info msg="Executing migration" id="create role table"
logger=migrator t=2024-08-29T15:36:52.959876139Z level=debug msg="Executing sql migration" id="create role table" sql="CREATE TABLE IF NOT EXISTS `role` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `name` TEXT NOT NULL\n, `description` TEXT NULL\n, `version` INTEGER NOT NULL\n, `org_id` INTEGER NOT NULL\n, `uid` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:52.962148725Z level=info msg="Migration successfully executed" id="create role table" duration=2.32341ms
logger=migrator t=2024-08-29T15:36:52.975398926Z level=info msg="Executing migration" id="add column display_name"
logger=migrator t=2024-08-29T15:36:52.975646761Z level=debug msg="Executing sql migration" id="add column display_name" sql="alter table `role` ADD COLUMN `display_name` TEXT NULL "
logger=migrator t=2024-08-29T15:36:52.991095523Z level=info msg="Migration successfully executed" id="add column display_name" duration=15.692417ms
logger=migrator t=2024-08-29T15:36:53.00794625Z level=info msg="Executing migration" id="add column group_name"
logger=migrator t=2024-08-29T15:36:53.0082432Z level=debug msg="Executing sql migration" id="add column group_name" sql="alter table `role` ADD COLUMN `group_name` TEXT NULL "
logger=migrator t=2024-08-29T15:36:53.021823525Z level=info msg="Migration successfully executed" id="add column group_name" duration=13.872329ms
logger=migrator t=2024-08-29T15:36:53.037701259Z level=info msg="Executing migration" id="add index role.org_id"
logger=migrator t=2024-08-29T15:36:53.03823039Z level=debug msg="Executing migration condition SQL" id="add index role.org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[role IDX_role_org_id]"
logger=migrator t=2024-08-29T15:36:53.039232164Z level=debug msg="Executing sql migration" id="add index role.org_id" sql="CREATE INDEX `IDX_role_org_id` ON `role` (`org_id`);"
logger=migrator t=2024-08-29T15:36:53.040470862Z level=info msg="Migration successfully executed" id="add index role.org_id" duration=2.76991ms
logger=migrator t=2024-08-29T15:36:53.054601784Z level=info msg="Executing migration" id="add unique index role_org_id_name"
logger=migrator t=2024-08-29T15:36:53.055126882Z level=debug msg="Executing migration condition SQL" id="add unique index role_org_id_name" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[role UQE_role_org_id_name]"
logger=migrator t=2024-08-29T15:36:53.055858301Z level=debug msg="Executing sql migration" id="add unique index role_org_id_name" sql="CREATE UNIQUE INDEX `UQE_role_org_id_name` ON `role` (`org_id`,`name`);"
logger=migrator t=2024-08-29T15:36:53.058327662Z level=info msg="Migration successfully executed" id="add unique index role_org_id_name" duration=3.711628ms
logger=migrator t=2024-08-29T15:36:53.072984999Z level=info msg="Executing migration" id="add index role_org_id_uid"
logger=migrator t=2024-08-29T15:36:53.073354171Z level=debug msg="Executing migration condition SQL" id="add index role_org_id_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[role UQE_role_org_id_uid]"
logger=migrator t=2024-08-29T15:36:53.075818953Z level=debug msg="Executing sql migration" id="add index role_org_id_uid" sql="CREATE UNIQUE INDEX `UQE_role_org_id_uid` ON `role` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:53.07741747Z level=info msg="Migration successfully executed" id="add index role_org_id_uid" duration=4.431932ms
logger=migrator t=2024-08-29T15:36:53.091645051Z level=info msg="Executing migration" id="create team role table"
logger=migrator t=2024-08-29T15:36:53.091700677Z level=debug msg="Executing sql migration" id="create team role table" sql="CREATE TABLE IF NOT EXISTS `team_role` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `team_id` INTEGER NOT NULL\n, `role_id` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:53.093661836Z level=info msg="Migration successfully executed" id="create team role table" duration=2.016816ms
logger=migrator t=2024-08-29T15:36:53.107954262Z level=info msg="Executing migration" id="add index team_role.org_id"
logger=migrator t=2024-08-29T15:36:53.108382207Z level=debug msg="Executing migration condition SQL" id="add index team_role.org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[team_role IDX_team_role_org_id]"
logger=migrator t=2024-08-29T15:36:53.111542753Z level=debug msg="Executing sql migration" id="add index team_role.org_id" sql="CREATE INDEX `IDX_team_role_org_id` ON `team_role` (`org_id`);"
logger=migrator t=2024-08-29T15:36:53.114346162Z level=info msg="Migration successfully executed" id="add index team_role.org_id" duration=6.39028ms
logger=migrator t=2024-08-29T15:36:53.126442769Z level=info msg="Executing migration" id="add unique index team_role_org_id_team_id_role_id"
logger=migrator t=2024-08-29T15:36:53.126490492Z level=debug msg="Executing migration condition SQL" id="add unique index team_role_org_id_team_id_role_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[team_role UQE_team_role_org_id_team_id_role_id]"
logger=migrator t=2024-08-29T15:36:53.12799194Z level=debug msg="Executing sql migration" id="add unique index team_role_org_id_team_id_role_id" sql="CREATE UNIQUE INDEX `UQE_team_role_org_id_team_id_role_id` ON `team_role` (`org_id`,`team_id`,`role_id`);"
logger=migrator t=2024-08-29T15:36:53.129651391Z level=info msg="Migration successfully executed" id="add unique index team_role_org_id_team_id_role_id" duration=3.209314ms
logger=migrator t=2024-08-29T15:36:53.145883901Z level=info msg="Executing migration" id="add index team_role.team_id"
logger=migrator t=2024-08-29T15:36:53.146419327Z level=debug msg="Executing migration condition SQL" id="add index team_role.team_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[team_role IDX_team_role_team_id]"
logger=migrator t=2024-08-29T15:36:53.148322131Z level=debug msg="Executing sql migration" id="add index team_role.team_id" sql="CREATE INDEX `IDX_team_role_team_id` ON `team_role` (`team_id`);"
logger=migrator t=2024-08-29T15:36:53.149852447Z level=info msg="Migration successfully executed" id="add index team_role.team_id" duration=3.968958ms
logger=migrator t=2024-08-29T15:36:53.164783602Z level=info msg="Executing migration" id="create user role table"
logger=migrator t=2024-08-29T15:36:53.164845634Z level=debug msg="Executing sql migration" id="create user role table" sql="CREATE TABLE IF NOT EXISTS `user_role` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `user_id` INTEGER NOT NULL\n, `role_id` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:53.165704087Z level=info msg="Migration successfully executed" id="create user role table" duration=920.646µs
logger=migrator t=2024-08-29T15:36:53.17754337Z level=info msg="Executing migration" id="add index user_role.org_id"
logger=migrator t=2024-08-29T15:36:53.177597724Z level=debug msg="Executing migration condition SQL" id="add index user_role.org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user_role IDX_user_role_org_id]"
logger=migrator t=2024-08-29T15:36:53.178650698Z level=debug msg="Executing sql migration" id="add index user_role.org_id" sql="CREATE INDEX `IDX_user_role_org_id` ON `user_role` (`org_id`);"
logger=migrator t=2024-08-29T15:36:53.180797632Z level=info msg="Migration successfully executed" id="add index user_role.org_id" duration=3.254355ms
logger=migrator t=2024-08-29T15:36:53.194241598Z level=info msg="Executing migration" id="add unique index user_role_org_id_user_id_role_id"
logger=migrator t=2024-08-29T15:36:53.194873516Z level=debug msg="Executing migration condition SQL" id="add unique index user_role_org_id_user_id_role_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user_role UQE_user_role_org_id_user_id_role_id]"
logger=migrator t=2024-08-29T15:36:53.196525472Z level=debug msg="Executing sql migration" id="add unique index user_role_org_id_user_id_role_id" sql="CREATE UNIQUE INDEX `UQE_user_role_org_id_user_id_role_id` ON `user_role` (`org_id`,`user_id`,`role_id`);"
logger=migrator t=2024-08-29T15:36:53.198106854Z level=info msg="Migration successfully executed" id="add unique index user_role_org_id_user_id_role_id" duration=3.866257ms
logger=migrator t=2024-08-29T15:36:53.210955799Z level=info msg="Executing migration" id="add index user_role.user_id"
logger=migrator t=2024-08-29T15:36:53.211003721Z level=debug msg="Executing migration condition SQL" id="add index user_role.user_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[user_role IDX_user_role_user_id]"
logger=migrator t=2024-08-29T15:36:53.212202567Z level=debug msg="Executing sql migration" id="add index user_role.user_id" sql="CREATE INDEX `IDX_user_role_user_id` ON `user_role` (`user_id`);"
logger=migrator t=2024-08-29T15:36:53.213326122Z level=info msg="Migration successfully executed" id="add index user_role.user_id" duration=2.369728ms
logger=migrator t=2024-08-29T15:36:53.229785971Z level=info msg="Executing migration" id="create builtin role table"
logger=migrator t=2024-08-29T15:36:53.229840003Z level=debug msg="Executing sql migration" id="create builtin role table" sql="CREATE TABLE IF NOT EXISTS `builtin_role` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `role` TEXT NOT NULL\n, `role_id` INTEGER NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:53.230701049Z level=info msg="Migration successfully executed" id="create builtin role table" duration=915.295µs
logger=migrator t=2024-08-29T15:36:53.245307327Z level=info msg="Executing migration" id="add index builtin_role.role_id"
logger=migrator t=2024-08-29T15:36:53.245498148Z level=debug msg="Executing migration condition SQL" id="add index builtin_role.role_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[builtin_role IDX_builtin_role_role_id]"
logger=migrator t=2024-08-29T15:36:53.247201896Z level=debug msg="Executing sql migration" id="add index builtin_role.role_id" sql="CREATE INDEX `IDX_builtin_role_role_id` ON `builtin_role` (`role_id`);"
logger=migrator t=2024-08-29T15:36:53.248935649Z level=info msg="Migration successfully executed" id="add index builtin_role.role_id" duration=3.629846ms
logger=migrator t=2024-08-29T15:36:53.263346303Z level=info msg="Executing migration" id="add index builtin_role.name"
logger=migrator t=2024-08-29T15:36:53.263451701Z level=debug msg="Executing migration condition SQL" id="add index builtin_role.name" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[builtin_role IDX_builtin_role_role]"
logger=migrator t=2024-08-29T15:36:53.264397046Z level=debug msg="Executing sql migration" id="add index builtin_role.name" sql="CREATE INDEX `IDX_builtin_role_role` ON `builtin_role` (`role`);"
logger=migrator t=2024-08-29T15:36:53.265266609Z level=info msg="Migration successfully executed" id="add index builtin_role.name" duration=1.922512ms
logger=migrator t=2024-08-29T15:36:53.27650208Z level=info msg="Executing migration" id="Add column org_id to builtin_role table"
logger=migrator t=2024-08-29T15:36:53.276555052Z level=debug msg="Executing sql migration" id="Add column org_id to builtin_role table" sql="alter table `builtin_role` ADD COLUMN `org_id` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:53.282556297Z level=info msg="Migration successfully executed" id="Add column org_id to builtin_role table" duration=6.052847ms
logger=migrator t=2024-08-29T15:36:53.297809828Z level=info msg="Executing migration" id="add index builtin_role.org_id"
logger=migrator t=2024-08-29T15:36:53.298262818Z level=debug msg="Executing migration condition SQL" id="add index builtin_role.org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[builtin_role IDX_builtin_role_org_id]"
logger=migrator t=2024-08-29T15:36:53.299330319Z level=debug msg="Executing sql migration" id="add index builtin_role.org_id" sql="CREATE INDEX `IDX_builtin_role_org_id` ON `builtin_role` (`org_id`);"
logger=migrator t=2024-08-29T15:36:53.30019039Z level=info msg="Migration successfully executed" id="add index builtin_role.org_id" duration=2.363742ms
logger=migrator t=2024-08-29T15:36:53.313740427Z level=info msg="Executing migration" id="add unique index builtin_role_org_id_role_id_role"
logger=migrator t=2024-08-29T15:36:53.314085022Z level=debug msg="Executing migration condition SQL" id="add unique index builtin_role_org_id_role_id_role" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[builtin_role UQE_builtin_role_org_id_role_id_role]"
logger=migrator t=2024-08-29T15:36:53.31529459Z level=debug msg="Executing sql migration" id="add unique index builtin_role_org_id_role_id_role" sql="CREATE UNIQUE INDEX `UQE_builtin_role_org_id_role_id_role` ON `builtin_role` (`org_id`,`role_id`,`role`);"
logger=migrator t=2024-08-29T15:36:53.316018729Z level=info msg="Migration successfully executed" id="add unique index builtin_role_org_id_role_id_role" duration=2.279994ms
logger=migrator t=2024-08-29T15:36:53.327860981Z level=info msg="Executing migration" id="Remove unique index role_org_id_uid"
logger=migrator t=2024-08-29T15:36:53.32823973Z level=debug msg="Executing migration condition SQL" id="Remove unique index role_org_id_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[role UQE_role_org_id_uid]"
logger=migrator t=2024-08-29T15:36:53.330387418Z level=debug msg="Executing sql migration" id="Remove unique index role_org_id_uid" sql="DROP INDEX `UQE_role_org_id_uid`"
logger=migrator t=2024-08-29T15:36:53.333954269Z level=info msg="Migration successfully executed" id="Remove unique index role_org_id_uid" duration=6.092813ms
logger=migrator t=2024-08-29T15:36:53.345596426Z level=info msg="Executing migration" id="add unique index role.uid"
logger=migrator t=2024-08-29T15:36:53.345751536Z level=debug msg="Executing migration condition SQL" id="add unique index role.uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[role UQE_role_uid]"
logger=migrator t=2024-08-29T15:36:53.34640461Z level=debug msg="Executing sql migration" id="add unique index role.uid" sql="CREATE UNIQUE INDEX `UQE_role_uid` ON `role` (`uid`);"
logger=migrator t=2024-08-29T15:36:53.347860336Z level=info msg="Migration successfully executed" id="add unique index role.uid" duration=2.266175ms
logger=migrator t=2024-08-29T15:36:53.359407478Z level=info msg="Executing migration" id="create seed assignment table"
logger=migrator t=2024-08-29T15:36:53.35945054Z level=debug msg="Executing sql migration" id="create seed assignment table" sql="CREATE TABLE IF NOT EXISTS `seed_assignment` (\n`builtin_role` TEXT NOT NULL\n, `role_name` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:53.361921366Z level=info msg="Migration successfully executed" id="create seed assignment table" duration=2.513935ms
logger=migrator t=2024-08-29T15:36:53.375462829Z level=info msg="Executing migration" id="add unique index builtin_role_role_name"
logger=migrator t=2024-08-29T15:36:53.375506413Z level=debug msg="Executing migration condition SQL" id="add unique index builtin_role_role_name" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[seed_assignment UQE_seed_assignment_builtin_role_role_name]"
logger=migrator t=2024-08-29T15:36:53.376648795Z level=debug msg="Executing sql migration" id="add unique index builtin_role_role_name" sql="CREATE UNIQUE INDEX `UQE_seed_assignment_builtin_role_role_name` ON `seed_assignment` (`builtin_role`,`role_name`);"
logger=migrator t=2024-08-29T15:36:53.378782333Z level=info msg="Migration successfully executed" id="add unique index builtin_role_role_name" duration=3.316856ms
logger=migrator t=2024-08-29T15:36:53.389966447Z level=info msg="Executing migration" id="add column hidden to role table"
logger=migrator t=2024-08-29T15:36:53.390842632Z level=debug msg="Executing sql migration" id="add column hidden to role table" sql="alter table `role` ADD COLUMN `hidden` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:53.397050217Z level=info msg="Migration successfully executed" id="add column hidden to role table" duration=7.084982ms
logger=migrator t=2024-08-29T15:36:53.409697196Z level=info msg="Executing migration" id="permission kind migration"
logger=migrator t=2024-08-29T15:36:53.409753215Z level=debug msg="Executing sql migration" id="permission kind migration" sql="alter table `permission` ADD COLUMN `kind` TEXT NOT NULL DEFAULT '' "
logger=migrator t=2024-08-29T15:36:53.419901664Z level=info msg="Migration successfully executed" id="permission kind migration" duration=10.204439ms
logger=migrator t=2024-08-29T15:36:53.433169768Z level=info msg="Executing migration" id="permission attribute migration"
logger=migrator t=2024-08-29T15:36:53.433278215Z level=debug msg="Executing sql migration" id="permission attribute migration" sql="alter table `permission` ADD COLUMN `attribute` TEXT NOT NULL DEFAULT '' "
logger=migrator t=2024-08-29T15:36:53.442289794Z level=info msg="Migration successfully executed" id="permission attribute migration" duration=9.119872ms
logger=migrator t=2024-08-29T15:36:53.452625933Z level=info msg="Executing migration" id="permission identifier migration"
logger=migrator t=2024-08-29T15:36:53.45272572Z level=debug msg="Executing sql migration" id="permission identifier migration" sql="alter table `permission` ADD COLUMN `identifier` TEXT NOT NULL DEFAULT '' "
logger=migrator t=2024-08-29T15:36:53.461487207Z level=info msg="Migration successfully executed" id="permission identifier migration" duration=8.861654ms
logger=migrator t=2024-08-29T15:36:53.473995323Z level=info msg="Executing migration" id="add permission identifier index"
logger=migrator t=2024-08-29T15:36:53.47410133Z level=debug msg="Executing migration condition SQL" id="add permission identifier index" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[permission IDX_permission_identifier]"
logger=migrator t=2024-08-29T15:36:53.475158063Z level=debug msg="Executing sql migration" id="add permission identifier index" sql="CREATE INDEX `IDX_permission_identifier` ON `permission` (`identifier`);"
logger=migrator t=2024-08-29T15:36:53.476442806Z level=info msg="Migration successfully executed" id="add permission identifier index" duration=2.449291ms
logger=migrator t=2024-08-29T15:36:53.488236271Z level=info msg="Executing migration" id="add permission action scope role_id index"
logger=migrator t=2024-08-29T15:36:53.488278985Z level=debug msg="Executing migration condition SQL" id="add permission action scope role_id index" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[permission UQE_permission_action_scope_role_id]"
logger=migrator t=2024-08-29T15:36:53.490803035Z level=debug msg="Executing sql migration" id="add permission action scope role_id index" sql="CREATE UNIQUE INDEX `UQE_permission_action_scope_role_id` ON `permission` (`action`,`scope`,`role_id`);"
logger=migrator t=2024-08-29T15:36:53.493115127Z level=info msg="Migration successfully executed" id="add permission action scope role_id index" duration=4.878595ms
logger=migrator t=2024-08-29T15:36:53.505288712Z level=info msg="Executing migration" id="remove permission role_id action scope index"
logger=migrator t=2024-08-29T15:36:53.505354065Z level=debug msg="Executing migration condition SQL" id="remove permission role_id action scope index" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[permission UQE_permission_role_id_action_scope]"
logger=migrator t=2024-08-29T15:36:53.506197751Z level=debug msg="Executing sql migration" id="remove permission role_id action scope index" sql="DROP INDEX `UQE_permission_role_id_action_scope`"
logger=migrator t=2024-08-29T15:36:53.507604953Z level=info msg="Migration successfully executed" id="remove permission role_id action scope index" duration=2.31959ms
logger=migrator t=2024-08-29T15:36:53.522884563Z level=info msg="Executing migration" id="create query_history table v1"
logger=migrator t=2024-08-29T15:36:53.523191394Z level=debug msg="Executing sql migration" id="create query_history table v1" sql="CREATE TABLE IF NOT EXISTS `query_history` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `uid` TEXT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `datasource_uid` TEXT NOT NULL\n, `created_by` INTEGER NOT NULL\n, `created_at` INTEGER NOT NULL\n, `comment` TEXT NOT NULL\n, `queries` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:53.525232218Z level=info msg="Migration successfully executed" id="create query_history table v1" duration=2.35ms
logger=migrator t=2024-08-29T15:36:53.544334489Z level=info msg="Executing migration" id="add index query_history.org_id-created_by-datasource_uid"
logger=migrator t=2024-08-29T15:36:53.544454688Z level=debug msg="Executing migration condition SQL" id="add index query_history.org_id-created_by-datasource_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[query_history IDX_query_history_org_id_created_by_datasource_uid]"
logger=migrator t=2024-08-29T15:36:53.545939176Z level=debug msg="Executing sql migration" id="add index query_history.org_id-created_by-datasource_uid" sql="CREATE INDEX `IDX_query_history_org_id_created_by_datasource_uid` ON `query_history` (`org_id`,`created_by`,`datasource_uid`);"
logger=migrator t=2024-08-29T15:36:53.547659099Z level=info msg="Migration successfully executed" id="add index query_history.org_id-created_by-datasource_uid" duration=3.325824ms
logger=migrator t=2024-08-29T15:36:53.560919843Z level=info msg="Executing migration" id="alter table query_history alter column created_by type to bigint"
logger=migrator t=2024-08-29T15:36:53.561564295Z level=debug msg="Executing sql migration" id="alter table query_history alter column created_by type to bigint" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:53.561832564Z level=info msg="Migration successfully executed" id="alter table query_history alter column created_by type to bigint" duration=915.378µs
logger=migrator t=2024-08-29T15:36:53.574282521Z level=info msg="Executing migration" id="create query_history_details table v1"
logger=migrator t=2024-08-29T15:36:53.574410583Z level=debug msg="Executing sql migration" id="create query_history_details table v1" sql="CREATE TABLE IF NOT EXISTS `query_history_details` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `query_history_item_uid` TEXT NOT NULL\n, `datasource_uid` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:53.57702349Z level=info msg="Migration successfully executed" id="create query_history_details table v1" duration=2.742015ms
logger=migrator t=2024-08-29T15:36:53.588347117Z level=info msg="Executing migration" id="rbac disabled migrator"
logger=migrator t=2024-08-29T15:36:53.589256962Z level=debug msg="Executing code migration" id="rbac disabled migrator"
logger=migrator t=2024-08-29T15:36:53.589281786Z level=debug msg="skip reset of rbac data migrations"
logger=migrator t=2024-08-29T15:36:53.589289138Z level=info msg="Migration successfully executed" id="rbac disabled migrator" duration=945.368µs
logger=migrator t=2024-08-29T15:36:53.599455357Z level=info msg="Executing migration" id="teams permissions migration"
logger=migrator t=2024-08-29T15:36:53.599556099Z level=debug msg="Executing code migration" id="teams permissions migration"
logger=migrator t=2024-08-29T15:36:53.599962181Z level=info msg="Migration successfully executed" id="teams permissions migration" duration=512.173µs
logger=migrator t=2024-08-29T15:36:53.610128881Z level=info msg="Executing migration" id="dashboard permissions"
logger=migrator t=2024-08-29T15:36:53.610427097Z level=debug msg="Executing code migration" id="dashboard permissions"
logger=migrator t=2024-08-29T15:36:53.611381503Z level=debug msg="bulk-creating roles []"
logger=migrator t=2024-08-29T15:36:53.611481357Z level=info msg="Migration successfully executed" id="dashboard permissions" duration=1.3551ms
logger=migrator t=2024-08-29T15:36:53.622402493Z level=info msg="Executing migration" id="dashboard permissions uid scopes"
logger=migrator t=2024-08-29T15:36:53.622525655Z level=debug msg="Executing code migration" id="dashboard permissions uid scopes"
logger=migrator t=2024-08-29T15:36:53.623566897Z level=info msg="Migration successfully executed" id="dashboard permissions uid scopes" duration=1.168725ms
logger=migrator t=2024-08-29T15:36:53.633336637Z level=info msg="Executing migration" id="drop managed folder create actions"
logger=migrator t=2024-08-29T15:36:53.633378987Z level=debug msg="Executing code migration" id="drop managed folder create actions"
logger=migrator t=2024-08-29T15:36:53.633774346Z level=info msg="Migration successfully executed" id="drop managed folder create actions" duration=439.609µs
logger=migrator t=2024-08-29T15:36:53.643204737Z level=info msg="Executing migration" id="alerting notification permissions"
logger=migrator t=2024-08-29T15:36:53.64324847Z level=debug msg="Executing code migration" id="alerting notification permissions"
logger=migrator t=2024-08-29T15:36:53.643957672Z level=info msg="Migration successfully executed" id="alerting notification permissions" duration=755.872µs
logger=migrator t=2024-08-29T15:36:53.655468795Z level=info msg="Executing migration" id="create query_history_star table v1"
logger=migrator t=2024-08-29T15:36:53.655517297Z level=debug msg="Executing sql migration" id="create query_history_star table v1" sql="CREATE TABLE IF NOT EXISTS `query_history_star` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `query_uid` TEXT NOT NULL\n, `user_id` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:53.657459604Z level=info msg="Migration successfully executed" id="create query_history_star table v1" duration=1.988078ms
logger=migrator t=2024-08-29T15:36:53.671785022Z level=info msg="Executing migration" id="add index query_history.user_id-query_uid"
logger=migrator t=2024-08-29T15:36:53.672107775Z level=debug msg="Executing migration condition SQL" id="add index query_history.user_id-query_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[query_history_star UQE_query_history_star_user_id_query_uid]"
logger=migrator t=2024-08-29T15:36:53.673464014Z level=debug msg="Executing sql migration" id="add index query_history.user_id-query_uid" sql="CREATE UNIQUE INDEX `UQE_query_history_star_user_id_query_uid` ON `query_history_star` (`user_id`,`query_uid`);"
logger=migrator t=2024-08-29T15:36:53.676056099Z level=info msg="Migration successfully executed" id="add index query_history.user_id-query_uid" duration=4.27087ms
logger=migrator t=2024-08-29T15:36:53.690267765Z level=info msg="Executing migration" id="add column org_id in query_history_star"
logger=migrator t=2024-08-29T15:36:53.690326499Z level=debug msg="Executing sql migration" id="add column org_id in query_history_star" sql="alter table `query_history_star` ADD COLUMN `org_id` INTEGER NOT NULL DEFAULT 1 "
logger=migrator t=2024-08-29T15:36:53.699634674Z level=info msg="Migration successfully executed" id="add column org_id in query_history_star" duration=9.360819ms
logger=migrator t=2024-08-29T15:36:53.713470076Z level=info msg="Executing migration" id="alter table query_history_star_mig column user_id type to bigint"
logger=migrator t=2024-08-29T15:36:53.714235277Z level=debug msg="Executing sql migration" id="alter table query_history_star_mig column user_id type to bigint" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:53.714327282Z level=info msg="Migration successfully executed" id="alter table query_history_star_mig column user_id type to bigint" duration=857.033µs
logger=migrator t=2024-08-29T15:36:53.728749205Z level=info msg="Executing migration" id="create correlation table v1"
logger=migrator t=2024-08-29T15:36:53.728809428Z level=debug msg="Executing sql migration" id="create correlation table v1" sql="CREATE TABLE IF NOT EXISTS `correlation` (\n`uid` TEXT NOT NULL\n, `source_uid` TEXT NOT NULL\n, `target_uid` TEXT NULL\n, `label` TEXT NOT NULL\n, `description` TEXT NOT NULL\n, PRIMARY KEY ( `uid`,`source_uid` ));"
logger=migrator t=2024-08-29T15:36:53.731255988Z level=info msg="Migration successfully executed" id="create correlation table v1" duration=2.505971ms
logger=migrator t=2024-08-29T15:36:53.746766251Z level=info msg="Executing migration" id="add index correlations.uid"
logger=migrator t=2024-08-29T15:36:53.747191713Z level=debug msg="Executing migration condition SQL" id="add index correlations.uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[correlation IDX_correlation_uid]"
logger=migrator t=2024-08-29T15:36:53.748041754Z level=debug msg="Executing sql migration" id="add index correlations.uid" sql="CREATE INDEX `IDX_correlation_uid` ON `correlation` (`uid`);"
logger=migrator t=2024-08-29T15:36:53.748773884Z level=info msg="Migration successfully executed" id="add index correlations.uid" duration=2.611834ms
logger=migrator t=2024-08-29T15:36:53.766107872Z level=info msg="Executing migration" id="add index correlations.source_uid"
logger=migrator t=2024-08-29T15:36:53.766948736Z level=debug msg="Executing migration condition SQL" id="add index correlations.source_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[correlation IDX_correlation_source_uid]"
logger=migrator t=2024-08-29T15:36:53.768268912Z level=debug msg="Executing sql migration" id="add index correlations.source_uid" sql="CREATE INDEX `IDX_correlation_source_uid` ON `correlation` (`source_uid`);"
logger=migrator t=2024-08-29T15:36:53.770943347Z level=info msg="Migration successfully executed" id="add index correlations.source_uid" duration=4.82645ms
logger=migrator t=2024-08-29T15:36:53.784756722Z level=info msg="Executing migration" id="add correlation config column"
logger=migrator t=2024-08-29T15:36:53.784811509Z level=debug msg="Executing sql migration" id="add correlation config column" sql="alter table `correlation` ADD COLUMN `config` TEXT NULL "
logger=migrator t=2024-08-29T15:36:53.795407096Z level=info msg="Migration successfully executed" id="add correlation config column" duration=10.647043ms
logger=migrator t=2024-08-29T15:36:53.810469266Z level=info msg="Executing migration" id="drop index IDX_correlation_uid - v1"
logger=migrator t=2024-08-29T15:36:53.810524101Z level=debug msg="Executing migration condition SQL" id="drop index IDX_correlation_uid - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[correlation IDX_correlation_uid]"
logger=migrator t=2024-08-29T15:36:53.812005509Z level=debug msg="Executing sql migration" id="drop index IDX_correlation_uid - v1" sql="DROP INDEX `IDX_correlation_uid`"
logger=migrator t=2024-08-29T15:36:53.813628001Z level=info msg="Migration successfully executed" id="drop index IDX_correlation_uid - v1" duration=3.159513ms
logger=migrator t=2024-08-29T15:36:53.830494943Z level=info msg="Executing migration" id="drop index IDX_correlation_source_uid - v1"
logger=migrator t=2024-08-29T15:36:53.830617061Z level=debug msg="Executing migration condition SQL" id="drop index IDX_correlation_source_uid - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[correlation IDX_correlation_source_uid]"
logger=migrator t=2024-08-29T15:36:53.831438086Z level=debug msg="Executing sql migration" id="drop index IDX_correlation_source_uid - v1" sql="DROP INDEX `IDX_correlation_source_uid`"
logger=migrator t=2024-08-29T15:36:53.832118041Z level=info msg="Migration successfully executed" id="drop index IDX_correlation_source_uid - v1" duration=1.645686ms
logger=migrator t=2024-08-29T15:36:53.846357018Z level=info msg="Executing migration" id="Rename table correlation to correlation_tmp_qwerty - v1"
logger=migrator t=2024-08-29T15:36:53.846787744Z level=debug msg="Executing sql migration" id="Rename table correlation to correlation_tmp_qwerty - v1" sql="ALTER TABLE `correlation` RENAME TO `correlation_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:53.867531083Z level=info msg="Migration successfully executed" id="Rename table correlation to correlation_tmp_qwerty - v1" duration=21.170857ms
logger=migrator t=2024-08-29T15:36:53.883792766Z level=info msg="Executing migration" id="create correlation v2"
logger=migrator t=2024-08-29T15:36:53.884226009Z level=debug msg="Executing sql migration" id="create correlation v2" sql="CREATE TABLE IF NOT EXISTS `correlation` (\n`uid` TEXT NOT NULL\n, `org_id` INTEGER NOT NULL DEFAULT 0\n, `source_uid` TEXT NOT NULL\n, `target_uid` TEXT NULL\n, `label` TEXT NOT NULL\n, `description` TEXT NOT NULL\n, `config` TEXT NULL\n, PRIMARY KEY ( `uid`,`org_id`,`source_uid` ));"
logger=migrator t=2024-08-29T15:36:53.885818191Z level=info msg="Migration successfully executed" id="create correlation v2" duration=2.255544ms
logger=migrator t=2024-08-29T15:36:53.899711068Z level=info msg="Executing migration" id="create index IDX_correlation_uid - v2"
logger=migrator t=2024-08-29T15:36:53.899754125Z level=debug msg="Executing migration condition SQL" id="create index IDX_correlation_uid - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[correlation IDX_correlation_uid]"
logger=migrator t=2024-08-29T15:36:53.900913491Z level=debug msg="Executing sql migration" id="create index IDX_correlation_uid - v2" sql="CREATE INDEX `IDX_correlation_uid` ON `correlation` (`uid`);"
logger=migrator t=2024-08-29T15:36:53.902417492Z level=info msg="Migration successfully executed" id="create index IDX_correlation_uid - v2" duration=2.708749ms
logger=migrator t=2024-08-29T15:36:53.915250582Z level=info msg="Executing migration" id="create index IDX_correlation_source_uid - v2"
logger=migrator t=2024-08-29T15:36:53.915368836Z level=debug msg="Executing migration condition SQL" id="create index IDX_correlation_source_uid - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[correlation IDX_correlation_source_uid]"
logger=migrator t=2024-08-29T15:36:53.916359663Z level=debug msg="Executing sql migration" id="create index IDX_correlation_source_uid - v2" sql="CREATE INDEX `IDX_correlation_source_uid` ON `correlation` (`source_uid`);"
logger=migrator t=2024-08-29T15:36:53.917941303Z level=info msg="Migration successfully executed" id="create index IDX_correlation_source_uid - v2" duration=2.692379ms
logger=migrator t=2024-08-29T15:36:53.932295373Z level=info msg="Executing migration" id="create index IDX_correlation_org_id - v2"
logger=migrator t=2024-08-29T15:36:53.932730875Z level=debug msg="Executing migration condition SQL" id="create index IDX_correlation_org_id - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[correlation IDX_correlation_org_id]"
logger=migrator t=2024-08-29T15:36:53.934516523Z level=debug msg="Executing sql migration" id="create index IDX_correlation_org_id - v2" sql="CREATE INDEX `IDX_correlation_org_id` ON `correlation` (`org_id`);"
logger=migrator t=2024-08-29T15:36:53.937430969Z level=info msg="Migration successfully executed" id="create index IDX_correlation_org_id - v2" duration=5.135723ms
logger=migrator t=2024-08-29T15:36:53.954481551Z level=info msg="Executing migration" id="copy correlation v1 to v2"
logger=migrator t=2024-08-29T15:36:53.954821969Z level=debug msg="Executing sql migration" id="copy correlation v1 to v2" sql="INSERT INTO `correlation` (`source_uid`\n, `target_uid`\n, `label`\n, `description`\n, `config`\n, `uid`) SELECT `source_uid`\n, `target_uid`\n, `label`\n, `description`\n, `config`\n, `uid` FROM `correlation_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:53.955671466Z level=info msg="Migration successfully executed" id="copy correlation v1 to v2" duration=1.19201ms
logger=migrator t=2024-08-29T15:36:53.967605675Z level=info msg="Executing migration" id="drop correlation_tmp_qwerty"
logger=migrator t=2024-08-29T15:36:53.967643758Z level=debug msg="Executing sql migration" id="drop correlation_tmp_qwerty" sql="DROP TABLE IF EXISTS `correlation_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:53.969073201Z level=info msg="Migration successfully executed" id="drop correlation_tmp_qwerty" duration=1.468054ms
logger=migrator t=2024-08-29T15:36:53.982524708Z level=info msg="Executing migration" id="add provisioning column"
logger=migrator t=2024-08-29T15:36:53.982967324Z level=debug msg="Executing sql migration" id="add provisioning column" sql="alter table `correlation` ADD COLUMN `provisioned` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:53.996158265Z level=info msg="Migration successfully executed" id="add provisioning column" duration=13.631031ms
logger=migrator t=2024-08-29T15:36:54.041247412Z level=info msg="Executing migration" id="create entity_events table"
logger=migrator t=2024-08-29T15:36:54.041380877Z level=debug msg="Executing sql migration" id="create entity_events table" sql="CREATE TABLE IF NOT EXISTS `entity_event` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `entity_id` TEXT NOT NULL\n, `event_type` TEXT NOT NULL\n, `created` INTEGER NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:54.044658626Z level=info msg="Migration successfully executed" id="create entity_events table" duration=3.411541ms
logger=migrator t=2024-08-29T15:36:54.057932629Z level=info msg="Executing migration" id="create dashboard public config v1"
logger=migrator t=2024-08-29T15:36:54.058056308Z level=debug msg="Executing sql migration" id="create dashboard public config v1" sql="CREATE TABLE IF NOT EXISTS `dashboard_public_config` (\n`uid` TEXT PRIMARY KEY NOT NULL\n, `dashboard_uid` TEXT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `time_settings` TEXT NOT NULL\n, `refresh_rate` INTEGER NOT NULL DEFAULT 30\n, `template_variables` TEXT NULL\n);"
logger=migrator t=2024-08-29T15:36:54.059647974Z level=info msg="Migration successfully executed" id="create dashboard public config v1" duration=1.717009ms
logger=migrator t=2024-08-29T15:36:54.071029274Z level=info msg="Executing migration" id="drop index UQE_dashboard_public_config_uid - v1"
logger=migrator t=2024-08-29T15:36:54.071106559Z level=debug msg="Executing migration condition SQL" id="drop index UQE_dashboard_public_config_uid - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_public_config UQE_dashboard_public_config_uid]"
logger=migrator t=2024-08-29T15:36:54.072986463Z level=warn msg="Skipping migration: Already executed, but not recorded in migration log" id="drop index UQE_dashboard_public_config_uid - v1"
logger=migrator t=2024-08-29T15:36:54.083372436Z level=info msg="Executing migration" id="drop index IDX_dashboard_public_config_org_id_dashboard_uid - v1"
logger=migrator t=2024-08-29T15:36:54.083415415Z level=debug msg="Executing migration condition SQL" id="drop index IDX_dashboard_public_config_org_id_dashboard_uid - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_public_config IDX_dashboard_public_config_org_id_dashboard_uid]"
logger=migrator t=2024-08-29T15:36:54.0848736Z level=warn msg="Skipping migration: Already executed, but not recorded in migration log" id="drop index IDX_dashboard_public_config_org_id_dashboard_uid - v1"
logger=migrator t=2024-08-29T15:36:54.094728059Z level=info msg="Executing migration" id="Drop old dashboard public config table"
logger=migrator t=2024-08-29T15:36:54.09477799Z level=debug msg="Executing sql migration" id="Drop old dashboard public config table" sql="DROP TABLE IF EXISTS `dashboard_public_config`"
logger=migrator t=2024-08-29T15:36:54.096031155Z level=info msg="Migration successfully executed" id="Drop old dashboard public config table" duration=1.302026ms
logger=migrator t=2024-08-29T15:36:54.105423629Z level=info msg="Executing migration" id="recreate dashboard public config v1"
logger=migrator t=2024-08-29T15:36:54.105469192Z level=debug msg="Executing sql migration" id="recreate dashboard public config v1" sql="CREATE TABLE IF NOT EXISTS `dashboard_public_config` (\n`uid` TEXT PRIMARY KEY NOT NULL\n, `dashboard_uid` TEXT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `time_settings` TEXT NOT NULL\n, `refresh_rate` INTEGER NOT NULL DEFAULT 30\n, `template_variables` TEXT NULL\n);"
logger=migrator t=2024-08-29T15:36:54.107777153Z level=info msg="Migration successfully executed" id="recreate dashboard public config v1" duration=2.354952ms
logger=migrator t=2024-08-29T15:36:54.118806247Z level=info msg="Executing migration" id="create index UQE_dashboard_public_config_uid - v1"
logger=migrator t=2024-08-29T15:36:54.118845629Z level=debug msg="Executing migration condition SQL" id="create index UQE_dashboard_public_config_uid - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_public_config UQE_dashboard_public_config_uid]"
logger=migrator t=2024-08-29T15:36:54.119607885Z level=debug msg="Executing sql migration" id="create index UQE_dashboard_public_config_uid - v1" sql="CREATE UNIQUE INDEX `UQE_dashboard_public_config_uid` ON `dashboard_public_config` (`uid`);"
logger=migrator t=2024-08-29T15:36:54.121154941Z level=info msg="Migration successfully executed" id="create index UQE_dashboard_public_config_uid - v1" duration=2.349596ms
logger=migrator t=2024-08-29T15:36:54.1325658Z level=info msg="Executing migration" id="create index IDX_dashboard_public_config_org_id_dashboard_uid - v1"
logger=migrator t=2024-08-29T15:36:54.132672308Z level=debug msg="Executing migration condition SQL" id="create index IDX_dashboard_public_config_org_id_dashboard_uid - v1" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_public_config IDX_dashboard_public_config_org_id_dashboard_uid]"
logger=migrator t=2024-08-29T15:36:54.13389185Z level=debug msg="Executing sql migration" id="create index IDX_dashboard_public_config_org_id_dashboard_uid - v1" sql="CREATE INDEX `IDX_dashboard_public_config_org_id_dashboard_uid` ON `dashboard_public_config` (`org_id`,`dashboard_uid`);"
logger=migrator t=2024-08-29T15:36:54.136858898Z level=info msg="Migration successfully executed" id="create index IDX_dashboard_public_config_org_id_dashboard_uid - v1" duration=4.294595ms
logger=migrator t=2024-08-29T15:36:54.153963812Z level=info msg="Executing migration" id="drop index UQE_dashboard_public_config_uid - v2"
logger=migrator t=2024-08-29T15:36:54.154577815Z level=debug msg="Executing migration condition SQL" id="drop index UQE_dashboard_public_config_uid - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_public_config UQE_dashboard_public_config_uid]"
logger=migrator t=2024-08-29T15:36:54.156678696Z level=debug msg="Executing sql migration" id="drop index UQE_dashboard_public_config_uid - v2" sql="DROP INDEX `UQE_dashboard_public_config_uid`"
logger=migrator t=2024-08-29T15:36:54.157883989Z level=info msg="Migration successfully executed" id="drop index UQE_dashboard_public_config_uid - v2" duration=3.922426ms
logger=migrator t=2024-08-29T15:36:54.169492871Z level=info msg="Executing migration" id="drop index IDX_dashboard_public_config_org_id_dashboard_uid - v2"
logger=migrator t=2024-08-29T15:36:54.170191399Z level=debug msg="Executing migration condition SQL" id="drop index IDX_dashboard_public_config_org_id_dashboard_uid - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_public_config IDX_dashboard_public_config_org_id_dashboard_uid]"
logger=migrator t=2024-08-29T15:36:54.171540565Z level=debug msg="Executing sql migration" id="drop index IDX_dashboard_public_config_org_id_dashboard_uid - v2" sql="DROP INDEX `IDX_dashboard_public_config_org_id_dashboard_uid`"
logger=migrator t=2024-08-29T15:36:54.173073239Z level=info msg="Migration successfully executed" id="drop index IDX_dashboard_public_config_org_id_dashboard_uid - v2" duration=3.582718ms
logger=migrator t=2024-08-29T15:36:54.183297032Z level=info msg="Executing migration" id="Drop public config table"
logger=migrator t=2024-08-29T15:36:54.183683675Z level=debug msg="Executing sql migration" id="Drop public config table" sql="DROP TABLE IF EXISTS `dashboard_public_config`"
logger=migrator t=2024-08-29T15:36:54.184491739Z level=info msg="Migration successfully executed" id="Drop public config table" duration=1.19612ms
logger=migrator t=2024-08-29T15:36:54.198326909Z level=info msg="Executing migration" id="Recreate dashboard public config v2"
logger=migrator t=2024-08-29T15:36:54.199800585Z level=debug msg="Executing sql migration" id="Recreate dashboard public config v2" sql="CREATE TABLE IF NOT EXISTS `dashboard_public_config` (\n`uid` TEXT PRIMARY KEY NOT NULL\n, `dashboard_uid` TEXT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `time_settings` TEXT NULL\n, `template_variables` TEXT NULL\n, `access_token` TEXT NOT NULL\n, `created_by` INTEGER NOT NULL\n, `updated_by` INTEGER NULL\n, `created_at` DATETIME NOT NULL\n, `updated_at` DATETIME NULL\n, `is_enabled` INTEGER NOT NULL DEFAULT 0\n);"
logger=migrator t=2024-08-29T15:36:54.201310901Z level=info msg="Migration successfully executed" id="Recreate dashboard public config v2" duration=2.985609ms
logger=migrator t=2024-08-29T15:36:54.213033406Z level=info msg="Executing migration" id="create index UQE_dashboard_public_config_uid - v2"
logger=migrator t=2024-08-29T15:36:54.213540168Z level=debug msg="Executing migration condition SQL" id="create index UQE_dashboard_public_config_uid - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_public_config UQE_dashboard_public_config_uid]"
logger=migrator t=2024-08-29T15:36:54.214004174Z level=debug msg="Executing sql migration" id="create index UQE_dashboard_public_config_uid - v2" sql="CREATE UNIQUE INDEX `UQE_dashboard_public_config_uid` ON `dashboard_public_config` (`uid`);"
logger=migrator t=2024-08-29T15:36:54.214604594Z level=info msg="Migration successfully executed" id="create index UQE_dashboard_public_config_uid - v2" duration=1.572334ms
logger=migrator t=2024-08-29T15:36:54.22437228Z level=info msg="Executing migration" id="create index IDX_dashboard_public_config_org_id_dashboard_uid - v2"
logger=migrator t=2024-08-29T15:36:54.225224015Z level=debug msg="Executing migration condition SQL" id="create index IDX_dashboard_public_config_org_id_dashboard_uid - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_public_config IDX_dashboard_public_config_org_id_dashboard_uid]"
logger=migrator t=2024-08-29T15:36:54.226501244Z level=debug msg="Executing sql migration" id="create index IDX_dashboard_public_config_org_id_dashboard_uid - v2" sql="CREATE INDEX `IDX_dashboard_public_config_org_id_dashboard_uid` ON `dashboard_public_config` (`org_id`,`dashboard_uid`);"
logger=migrator t=2024-08-29T15:36:54.228675511Z level=info msg="Migration successfully executed" id="create index IDX_dashboard_public_config_org_id_dashboard_uid - v2" duration=4.300465ms
logger=migrator t=2024-08-29T15:36:54.240476507Z level=info msg="Executing migration" id="create index UQE_dashboard_public_config_access_token - v2"
logger=migrator t=2024-08-29T15:36:54.240926895Z level=debug msg="Executing migration condition SQL" id="create index UQE_dashboard_public_config_access_token - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard_public_config UQE_dashboard_public_config_access_token]"
logger=migrator t=2024-08-29T15:36:54.243163651Z level=debug msg="Executing sql migration" id="create index UQE_dashboard_public_config_access_token - v2" sql="CREATE UNIQUE INDEX `UQE_dashboard_public_config_access_token` ON `dashboard_public_config` (`access_token`);"
logger=migrator t=2024-08-29T15:36:54.244790406Z level=info msg="Migration successfully executed" id="create index UQE_dashboard_public_config_access_token - v2" duration=4.315783ms
logger=migrator t=2024-08-29T15:36:54.259514514Z level=info msg="Executing migration" id="Rename table dashboard_public_config to dashboard_public - v2"
logger=migrator t=2024-08-29T15:36:54.259561709Z level=debug msg="Executing sql migration" id="Rename table dashboard_public_config to dashboard_public - v2" sql="ALTER TABLE `dashboard_public_config` RENAME TO `dashboard_public`"
logger=migrator t=2024-08-29T15:36:54.280594639Z level=info msg="Migration successfully executed" id="Rename table dashboard_public_config to dashboard_public - v2" duration=21.078767ms
logger=migrator t=2024-08-29T15:36:54.293334177Z level=info msg="Executing migration" id="add annotations_enabled column"
logger=migrator t=2024-08-29T15:36:54.293385396Z level=debug msg="Executing sql migration" id="add annotations_enabled column" sql="alter table `dashboard_public` ADD COLUMN `annotations_enabled` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:54.30138038Z level=info msg="Migration successfully executed" id="add annotations_enabled column" duration=8.048739ms
logger=migrator t=2024-08-29T15:36:54.313491239Z level=info msg="Executing migration" id="add time_selection_enabled column"
logger=migrator t=2024-08-29T15:36:54.314093157Z level=debug msg="Executing sql migration" id="add time_selection_enabled column" sql="alter table `dashboard_public` ADD COLUMN `time_selection_enabled` INTEGER NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:54.328569532Z level=info msg="Migration successfully executed" id="add time_selection_enabled column" duration=15.076553ms
logger=migrator t=2024-08-29T15:36:54.345159026Z level=info msg="Executing migration" id="delete orphaned public dashboards"
logger=migrator t=2024-08-29T15:36:54.345212425Z level=debug msg="Executing sql migration" id="delete orphaned public dashboards" sql="DELETE FROM dashboard_public WHERE dashboard_uid NOT IN (SELECT uid FROM dashboard)"
logger=migrator t=2024-08-29T15:36:54.345546129Z level=info msg="Migration successfully executed" id="delete orphaned public dashboards" duration=389.103µs
logger=migrator t=2024-08-29T15:36:54.359473931Z level=info msg="Executing migration" id="add share column"
logger=migrator t=2024-08-29T15:36:54.359650188Z level=debug msg="Executing sql migration" id="add share column" sql="alter table `dashboard_public` ADD COLUMN `share` TEXT NOT NULL DEFAULT 'public' "
logger=migrator t=2024-08-29T15:36:54.374163863Z level=info msg="Migration successfully executed" id="add share column" duration=14.684076ms
logger=migrator t=2024-08-29T15:36:54.383919005Z level=info msg="Executing migration" id="backfill empty share column fields with default of public"
logger=migrator t=2024-08-29T15:36:54.384463838Z level=debug msg="Executing sql migration" id="backfill empty share column fields with default of public" sql="UPDATE dashboard_public SET share='public' WHERE share=''"
logger=migrator t=2024-08-29T15:36:54.384904023Z level=info msg="Migration successfully executed" id="backfill empty share column fields with default of public" duration=987.308µs
logger=migrator t=2024-08-29T15:36:54.397361035Z level=info msg="Executing migration" id="create file table"
logger=migrator t=2024-08-29T15:36:54.397422162Z level=debug msg="Executing sql migration" id="create file table" sql="CREATE TABLE IF NOT EXISTS `file` (\n`path` TEXT NOT NULL\n, `path_hash` TEXT NOT NULL\n, `parent_folder_path_hash` TEXT NOT NULL\n, `contents` BLOB NOT NULL\n, `etag` TEXT NOT NULL\n, `cache_control` TEXT NOT NULL\n, `content_disposition` TEXT NOT NULL\n, `updated` DATETIME NOT NULL\n, `created` DATETIME NOT NULL\n, `size` INTEGER NOT NULL\n, `mime_type` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:54.399438085Z level=info msg="Migration successfully executed" id="create file table" duration=2.073511ms
logger=migrator t=2024-08-29T15:36:54.411955856Z level=info msg="Executing migration" id="file table idx: path natural pk"
logger=migrator t=2024-08-29T15:36:54.412478615Z level=debug msg="Executing migration condition SQL" id="file table idx: path natural pk" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[file UQE_file_path_hash]"
logger=migrator t=2024-08-29T15:36:54.413240915Z level=debug msg="Executing sql migration" id="file table idx: path natural pk" sql="CREATE UNIQUE INDEX `UQE_file_path_hash` ON `file` (`path_hash`);"
logger=migrator t=2024-08-29T15:36:54.414387812Z level=info msg="Migration successfully executed" id="file table idx: path natural pk" duration=2.433033ms
logger=migrator t=2024-08-29T15:36:54.425696651Z level=info msg="Executing migration" id="file table idx: parent_folder_path_hash fast folder retrieval"
logger=migrator t=2024-08-29T15:36:54.426455366Z level=debug msg="Executing migration condition SQL" id="file table idx: parent_folder_path_hash fast folder retrieval" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[file IDX_file_parent_folder_path_hash]"
logger=migrator t=2024-08-29T15:36:54.427382478Z level=debug msg="Executing sql migration" id="file table idx: parent_folder_path_hash fast folder retrieval" sql="CREATE INDEX `IDX_file_parent_folder_path_hash` ON `file` (`parent_folder_path_hash`);"
logger=migrator t=2024-08-29T15:36:54.428396963Z level=info msg="Migration successfully executed" id="file table idx: parent_folder_path_hash fast folder retrieval" duration=2.700673ms
logger=migrator t=2024-08-29T15:36:54.442930328Z level=info msg="Executing migration" id="create file_meta table"
logger=migrator t=2024-08-29T15:36:54.44321728Z level=debug msg="Executing sql migration" id="create file_meta table" sql="CREATE TABLE IF NOT EXISTS `file_meta` (\n`path_hash` TEXT NOT NULL\n, `key` TEXT NOT NULL\n, `value` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:54.445060192Z level=info msg="Migration successfully executed" id="create file_meta table" duration=2.12858ms
logger=migrator t=2024-08-29T15:36:54.45881206Z level=info msg="Executing migration" id="file table idx: path key"
logger=migrator t=2024-08-29T15:36:54.459247543Z level=debug msg="Executing migration condition SQL" id="file table idx: path key" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[file_meta UQE_file_meta_path_hash_key]"
logger=migrator t=2024-08-29T15:36:54.460137289Z level=debug msg="Executing sql migration" id="file table idx: path key" sql="CREATE UNIQUE INDEX `UQE_file_meta_path_hash_key` ON `file_meta` (`path_hash`,`key`);"
logger=migrator t=2024-08-29T15:36:54.461529783Z level=info msg="Migration successfully executed" id="file table idx: path key" duration=2.718331ms
logger=migrator t=2024-08-29T15:36:54.473304169Z level=info msg="Executing migration" id="set path collation in file table"
logger=migrator t=2024-08-29T15:36:54.473491485Z level=debug msg="Executing sql migration" id="set path collation in file table" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:54.473774368Z level=info msg="Migration successfully executed" id="set path collation in file table" duration=474.571µs
logger=migrator t=2024-08-29T15:36:54.484937811Z level=info msg="Executing migration" id="migrate contents column to mediumblob for MySQL"
logger=migrator t=2024-08-29T15:36:54.485442337Z level=debug msg="Executing sql migration" id="migrate contents column to mediumblob for MySQL" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:54.485786926Z level=info msg="Migration successfully executed" id="migrate contents column to mediumblob for MySQL" duration=851.46µs
logger=migrator t=2024-08-29T15:36:54.497743066Z level=info msg="Executing migration" id="managed permissions migration"
logger=migrator t=2024-08-29T15:36:54.497870342Z level=debug msg="Executing code migration" id="managed permissions migration"
logger=migrator t=2024-08-29T15:36:54.499954986Z level=info msg="Migration successfully executed" id="managed permissions migration" duration=2.214171ms
logger=migrator t=2024-08-29T15:36:54.519626783Z level=info msg="Executing migration" id="managed folder permissions alert actions migration"
logger=migrator t=2024-08-29T15:36:54.520204461Z level=debug msg="Executing code migration" id="managed folder permissions alert actions migration"
logger=migrator t=2024-08-29T15:36:54.524088413Z level=info msg="Migration successfully executed" id="managed folder permissions alert actions migration" duration=4.461579ms
logger=migrator t=2024-08-29T15:36:54.532964778Z level=info msg="Executing migration" id="RBAC action name migrator"
logger=migrator t=2024-08-29T15:36:54.533086285Z level=debug msg="Executing code migration" id="RBAC action name migrator"
logger=migrator t=2024-08-29T15:36:54.537691175Z level=info msg="Migration successfully executed" id="RBAC action name migrator" duration=4.725449ms
logger=migrator t=2024-08-29T15:36:54.548955253Z level=info msg="Executing migration" id="Add UID column to playlist"
logger=migrator t=2024-08-29T15:36:54.54927922Z level=debug msg="Executing sql migration" id="Add UID column to playlist" sql="alter table `playlist` ADD COLUMN `uid` TEXT NOT NULL DEFAULT 0 "
logger=migrator t=2024-08-29T15:36:54.558666042Z level=info msg="Migration successfully executed" id="Add UID column to playlist" duration=9.709866ms
logger=migrator t=2024-08-29T15:36:54.568260972Z level=info msg="Executing migration" id="Update uid column values in playlist"
logger=migrator t=2024-08-29T15:36:54.568520194Z level=debug msg="Executing sql migration" id="Update uid column values in playlist" sql="UPDATE playlist SET uid=printf('%d',id);"
logger=migrator t=2024-08-29T15:36:54.569274038Z level=info msg="Migration successfully executed" id="Update uid column values in playlist" duration=1.015566ms
logger=migrator t=2024-08-29T15:36:54.579478593Z level=info msg="Executing migration" id="Add index for uid in playlist"
logger=migrator t=2024-08-29T15:36:54.580262691Z level=debug msg="Executing migration condition SQL" id="Add index for uid in playlist" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[playlist UQE_playlist_org_id_uid]"
logger=migrator t=2024-08-29T15:36:54.581790194Z level=debug msg="Executing sql migration" id="Add index for uid in playlist" sql="CREATE UNIQUE INDEX `UQE_playlist_org_id_uid` ON `playlist` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:54.582857721Z level=info msg="Migration successfully executed" id="Add index for uid in playlist" duration=3.392329ms
logger=migrator t=2024-08-29T15:36:54.59357456Z level=info msg="Executing migration" id="update group index for alert rules"
logger=migrator t=2024-08-29T15:36:54.593696222Z level=debug msg="Executing code migration" id="update group index for alert rules"
logger=migrator t=2024-08-29T15:36:54.595281781Z level=debug msg="No rules to migrate."
logger=migrator t=2024-08-29T15:36:54.595528738Z level=info msg="Migration successfully executed" id="update group index for alert rules" duration=1.956642ms
logger=migrator t=2024-08-29T15:36:54.604405174Z level=info msg="Executing migration" id="managed folder permissions alert actions repeated migration"
logger=migrator t=2024-08-29T15:36:54.604514258Z level=debug msg="Executing code migration" id="managed folder permissions alert actions repeated migration"
logger=migrator t=2024-08-29T15:36:54.605150482Z level=info msg="Migration successfully executed" id="managed folder permissions alert actions repeated migration" duration=744.17µs
logger=migrator t=2024-08-29T15:36:54.614755108Z level=info msg="Executing migration" id="admin only folder/dashboard permission"
logger=migrator t=2024-08-29T15:36:54.615095056Z level=debug msg="Executing code migration" id="admin only folder/dashboard permission"
logger=migrator t=2024-08-29T15:36:54.616715089Z level=info msg="Migration successfully executed" id="admin only folder/dashboard permission" duration=1.965743ms
logger=migrator t=2024-08-29T15:36:54.625868343Z level=info msg="Executing migration" id="add action column to seed_assignment"
logger=migrator t=2024-08-29T15:36:54.625973478Z level=debug msg="Executing sql migration" id="add action column to seed_assignment" sql="alter table `seed_assignment` ADD COLUMN `action` TEXT NULL "
logger=migrator t=2024-08-29T15:36:54.633350059Z level=info msg="Migration successfully executed" id="add action column to seed_assignment" duration=7.483103ms
logger=migrator t=2024-08-29T15:36:54.644204973Z level=info msg="Executing migration" id="add scope column to seed_assignment"
logger=migrator t=2024-08-29T15:36:54.644245196Z level=debug msg="Executing sql migration" id="add scope column to seed_assignment" sql="alter table `seed_assignment` ADD COLUMN `scope` TEXT NULL "
logger=migrator t=2024-08-29T15:36:54.651271163Z level=info msg="Migration successfully executed" id="add scope column to seed_assignment" duration=7.0652ms
logger=migrator t=2024-08-29T15:36:54.68544285Z level=info msg="Executing migration" id="remove unique index builtin_role_role_name before nullable update"
logger=migrator t=2024-08-29T15:36:54.68549091Z level=debug msg="Executing migration condition SQL" id="remove unique index builtin_role_role_name before nullable update" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[seed_assignment UQE_seed_assignment_builtin_role_role_name]"
logger=migrator t=2024-08-29T15:36:54.687229387Z level=debug msg="Executing sql migration" id="remove unique index builtin_role_role_name before nullable update" sql="DROP INDEX `UQE_seed_assignment_builtin_role_role_name`"
logger=migrator t=2024-08-29T15:36:54.689165528Z level=info msg="Migration successfully executed" id="remove unique index builtin_role_role_name before nullable update" duration=3.722422ms
logger=migrator t=2024-08-29T15:36:54.702484138Z level=info msg="Executing migration" id="update seed_assignment role_name column to nullable"
logger=migrator t=2024-08-29T15:36:54.702758618Z level=debug msg="Executing sql migration" id="update seed_assignment role_name column to nullable" sql="ALTER TABLE seed_assignment ADD COLUMN tmp_role_name VARCHAR(190) DEFAULT NULL;\nUPDATE seed_assignment SET tmp_role_name = role_name;\nALTER TABLE seed_assignment DROP COLUMN role_name;\nALTER TABLE seed_assignment RENAME COLUMN tmp_role_name TO role_name;"
logger=migrator t=2024-08-29T15:36:54.800232416Z level=info msg="Migration successfully executed" id="update seed_assignment role_name column to nullable" duration=97.745472ms
logger=migrator t=2024-08-29T15:36:54.813213603Z level=info msg="Executing migration" id="add unique index builtin_role_name back"
logger=migrator t=2024-08-29T15:36:54.813387375Z level=debug msg="Executing migration condition SQL" id="add unique index builtin_role_name back" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[seed_assignment UQE_seed_assignment_builtin_role_role_name]"
logger=migrator t=2024-08-29T15:36:54.814696319Z level=debug msg="Executing sql migration" id="add unique index builtin_role_name back" sql="CREATE UNIQUE INDEX `UQE_seed_assignment_builtin_role_role_name` ON `seed_assignment` (`builtin_role`,`role_name`);"
logger=migrator t=2024-08-29T15:36:54.816759404Z level=info msg="Migration successfully executed" id="add unique index builtin_role_name back" duration=3.546822ms
logger=migrator t=2024-08-29T15:36:54.832783416Z level=info msg="Executing migration" id="add unique index builtin_role_action_scope"
logger=migrator t=2024-08-29T15:36:54.833448034Z level=debug msg="Executing migration condition SQL" id="add unique index builtin_role_action_scope" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[seed_assignment UQE_seed_assignment_builtin_role_action_scope]"
logger=migrator t=2024-08-29T15:36:54.836429599Z level=debug msg="Executing sql migration" id="add unique index builtin_role_action_scope" sql="CREATE UNIQUE INDEX `UQE_seed_assignment_builtin_role_action_scope` ON `seed_assignment` (`builtin_role`,`action`,`scope`);"
logger=migrator t=2024-08-29T15:36:54.83832546Z level=info msg="Migration successfully executed" id="add unique index builtin_role_action_scope" duration=5.540735ms
logger=migrator t=2024-08-29T15:36:54.851362846Z level=info msg="Executing migration" id="add primary key to seed_assigment"
logger=migrator t=2024-08-29T15:36:54.851638868Z level=debug msg="Executing code migration" id="add primary key to seed_assigment"
logger=migrator t=2024-08-29T15:36:54.891971672Z level=info msg="Migration successfully executed" id="add primary key to seed_assigment" duration=40.605522ms
logger=migrator t=2024-08-29T15:36:54.906388197Z level=info msg="Executing migration" id="add origin column to seed_assignment"
logger=migrator t=2024-08-29T15:36:54.906638774Z level=debug msg="Executing sql migration" id="add origin column to seed_assignment" sql="alter table `seed_assignment` ADD COLUMN `origin` TEXT NULL "
logger=migrator t=2024-08-29T15:36:54.921813145Z level=info msg="Migration successfully executed" id="add origin column to seed_assignment" duration=15.423485ms
logger=migrator t=2024-08-29T15:36:54.935467958Z level=info msg="Executing migration" id="add origin to plugin seed_assignment"
logger=migrator t=2024-08-29T15:36:54.935534916Z level=debug msg="Executing code migration" id="add origin to plugin seed_assignment"
logger=migrator t=2024-08-29T15:36:54.936352207Z level=info msg="Migration successfully executed" id="add origin to plugin seed_assignment" duration=885.848µs
logger=migrator t=2024-08-29T15:36:54.947970035Z level=info msg="Executing migration" id="prevent seeding OnCall access"
logger=migrator t=2024-08-29T15:36:54.948024095Z level=debug msg="Executing code migration" id="prevent seeding OnCall access"
logger=migrator t=2024-08-29T15:36:54.948597834Z level=info msg="Migration successfully executed" id="prevent seeding OnCall access" duration=630.723µs
logger=migrator t=2024-08-29T15:36:54.962427488Z level=info msg="Executing migration" id="managed folder permissions alert actions repeated fixed migration"
logger=migrator t=2024-08-29T15:36:54.962596732Z level=debug msg="Executing code migration" id="managed folder permissions alert actions repeated fixed migration"
logger=migrator t=2024-08-29T15:36:54.963251217Z level=info msg="Migration successfully executed" id="managed folder permissions alert actions repeated fixed migration" duration=826.724µs
logger=migrator t=2024-08-29T15:36:54.976264159Z level=info msg="Executing migration" id="managed folder permissions library panel actions migration"
logger=migrator t=2024-08-29T15:36:54.976313969Z level=debug msg="Executing code migration" id="managed folder permissions library panel actions migration"
logger=migrator t=2024-08-29T15:36:54.976555452Z level=info msg="Migration successfully executed" id="managed folder permissions library panel actions migration" duration=294.74µs
logger=migrator t=2024-08-29T15:36:54.991394789Z level=info msg="Executing migration" id="migrate external alertmanagers to datsourcse"
logger=migrator t=2024-08-29T15:36:54.991447272Z level=debug msg="Executing code migration" id="migrate external alertmanagers to datsourcse"
logger=migrator t=2024-08-29T15:36:54.991729858Z level=info msg="Migration successfully executed" id="migrate external alertmanagers to datsourcse" duration=343.203µs
logger=migrator t=2024-08-29T15:36:55.00625895Z level=info msg="Executing migration" id="create folder table"
logger=migrator t=2024-08-29T15:36:55.006311987Z level=debug msg="Executing sql migration" id="create folder table" sql="CREATE TABLE IF NOT EXISTS `folder` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `uid` TEXT NOT NULL\n, `org_id` INTEGER NOT NULL\n, `title` TEXT NOT NULL\n, `description` TEXT NULL\n, `parent_uid` TEXT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:55.007784359Z level=info msg="Migration successfully executed" id="create folder table" duration=1.526646ms
logger=migrator t=2024-08-29T15:36:55.045009692Z level=info msg="Executing migration" id="Add index for parent_uid"
logger=migrator t=2024-08-29T15:36:55.045482961Z level=debug msg="Executing migration condition SQL" id="Add index for parent_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[folder IDX_folder_parent_uid_org_id]"
logger=migrator t=2024-08-29T15:36:55.046382814Z level=debug msg="Executing sql migration" id="Add index for parent_uid" sql="CREATE INDEX `IDX_folder_parent_uid_org_id` ON `folder` (`parent_uid`,`org_id`);"
logger=migrator t=2024-08-29T15:36:55.048792659Z level=info msg="Migration successfully executed" id="Add index for parent_uid" duration=3.787943ms
logger=migrator t=2024-08-29T15:36:55.065298157Z level=info msg="Executing migration" id="Add unique index for folder.uid and folder.org_id"
logger=migrator t=2024-08-29T15:36:55.065463645Z level=debug msg="Executing migration condition SQL" id="Add unique index for folder.uid and folder.org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[folder UQE_folder_uid_org_id]"
logger=migrator t=2024-08-29T15:36:55.066537979Z level=debug msg="Executing sql migration" id="Add unique index for folder.uid and folder.org_id" sql="CREATE UNIQUE INDEX `UQE_folder_uid_org_id` ON `folder` (`uid`,`org_id`);"
logger=migrator t=2024-08-29T15:36:55.067550046Z level=info msg="Migration successfully executed" id="Add unique index for folder.uid and folder.org_id" duration=2.254166ms
logger=migrator t=2024-08-29T15:36:55.07641535Z level=info msg="Executing migration" id="Update folder title length"
logger=migrator t=2024-08-29T15:36:55.076531713Z level=debug msg="Executing sql migration" id="Update folder title length" sql="-- NOT REQUIRED"
logger=migrator t=2024-08-29T15:36:55.076559732Z level=info msg="Migration successfully executed" id="Update folder title length" duration=147.75µs
logger=migrator t=2024-08-29T15:36:55.08525819Z level=info msg="Executing migration" id="Add unique index for folder.title and folder.parent_uid"
logger=migrator t=2024-08-29T15:36:55.085550821Z level=debug msg="Executing migration condition SQL" id="Add unique index for folder.title and folder.parent_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[folder UQE_folder_title_parent_uid]"
logger=migrator t=2024-08-29T15:36:55.086372156Z level=debug msg="Executing sql migration" id="Add unique index for folder.title and folder.parent_uid" sql="CREATE UNIQUE INDEX `UQE_folder_title_parent_uid` ON `folder` (`title`,`parent_uid`);"
logger=migrator t=2024-08-29T15:36:55.087671969Z level=info msg="Migration successfully executed" id="Add unique index for folder.title and folder.parent_uid" duration=2.396028ms
logger=migrator t=2024-08-29T15:36:55.099184738Z level=info msg="Executing migration" id="Remove unique index for folder.title and folder.parent_uid"
logger=migrator t=2024-08-29T15:36:55.099232302Z level=debug msg="Executing migration condition SQL" id="Remove unique index for folder.title and folder.parent_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[folder UQE_folder_title_parent_uid]"
logger=migrator t=2024-08-29T15:36:55.100292024Z level=debug msg="Executing sql migration" id="Remove unique index for folder.title and folder.parent_uid" sql="DROP INDEX `UQE_folder_title_parent_uid`"
logger=migrator t=2024-08-29T15:36:55.101545644Z level=info msg="Migration successfully executed" id="Remove unique index for folder.title and folder.parent_uid" duration=2.362081ms
logger=migrator t=2024-08-29T15:36:55.111611474Z level=info msg="Executing migration" id="Add unique index for title, parent_uid, and org_id"
logger=migrator t=2024-08-29T15:36:55.111651388Z level=debug msg="Executing migration condition SQL" id="Add unique index for title, parent_uid, and org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[folder UQE_folder_title_parent_uid_org_id]"
logger=migrator t=2024-08-29T15:36:55.112646651Z level=debug msg="Executing sql migration" id="Add unique index for title, parent_uid, and org_id" sql="CREATE UNIQUE INDEX `UQE_folder_title_parent_uid_org_id` ON `folder` (`title`,`parent_uid`,`org_id`);"
logger=migrator t=2024-08-29T15:36:55.11387255Z level=info msg="Migration successfully executed" id="Add unique index for title, parent_uid, and org_id" duration=2.2621ms
logger=migrator t=2024-08-29T15:36:55.123503073Z level=info msg="Executing migration" id="Sync dashboard and folder table"
logger=migrator t=2024-08-29T15:36:55.123866557Z level=debug msg="Executing sql migration" id="Sync dashboard and folder table" sql="\n\t\t\tINSERT INTO folder (uid, org_id, title, created, updated)\n\t\t\tSELECT uid, org_id, title, created, updated FROM dashboard WHERE is_folder = 1\n\t\t\tON CONFLICT DO UPDATE SET title=excluded.title, updated=excluded.updated\n\t\t"
logger=migrator t=2024-08-29T15:36:55.124502677Z level=info msg="Migration successfully executed" id="Sync dashboard and folder table" duration=1.001868ms
logger=migrator t=2024-08-29T15:36:55.135841383Z level=info msg="Executing migration" id="Remove ghost folders from the folder table"
logger=migrator t=2024-08-29T15:36:55.135881446Z level=debug msg="Executing sql migration" id="Remove ghost folders from the folder table" sql="\n\t\t\tDELETE FROM folder WHERE NOT EXISTS\n\t\t\t\t(SELECT 1 FROM dashboard WHERE dashboard.uid = folder.uid AND dashboard.org_id = folder.org_id AND dashboard.is_folder = true)\n\t"
logger=migrator t=2024-08-29T15:36:55.13639675Z level=info msg="Migration successfully executed" id="Remove ghost folders from the folder table" duration=553.423µs
logger=migrator t=2024-08-29T15:36:55.146218886Z level=info msg="Executing migration" id="Remove unique index UQE_folder_uid_org_id"
logger=migrator t=2024-08-29T15:36:55.146329054Z level=debug msg="Executing migration condition SQL" id="Remove unique index UQE_folder_uid_org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[folder UQE_folder_uid_org_id]"
logger=migrator t=2024-08-29T15:36:55.148906257Z level=debug msg="Executing sql migration" id="Remove unique index UQE_folder_uid_org_id" sql="DROP INDEX `UQE_folder_uid_org_id`"
logger=migrator t=2024-08-29T15:36:55.150843357Z level=info msg="Migration successfully executed" id="Remove unique index UQE_folder_uid_org_id" duration=4.625943ms
logger=migrator t=2024-08-29T15:36:55.162023583Z level=info msg="Executing migration" id="Add unique index UQE_folder_org_id_uid"
logger=migrator t=2024-08-29T15:36:55.162141245Z level=debug msg="Executing migration condition SQL" id="Add unique index UQE_folder_org_id_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[folder UQE_folder_org_id_uid]"
logger=migrator t=2024-08-29T15:36:55.16430841Z level=debug msg="Executing sql migration" id="Add unique index UQE_folder_org_id_uid" sql="CREATE UNIQUE INDEX `UQE_folder_org_id_uid` ON `folder` (`org_id`,`uid`);"
logger=migrator t=2024-08-29T15:36:55.165615527Z level=info msg="Migration successfully executed" id="Add unique index UQE_folder_org_id_uid" duration=3.593138ms
logger=migrator t=2024-08-29T15:36:55.181343783Z level=info msg="Executing migration" id="Remove unique index UQE_folder_title_parent_uid_org_id"
logger=migrator t=2024-08-29T15:36:55.181385725Z level=debug msg="Executing migration condition SQL" id="Remove unique index UQE_folder_title_parent_uid_org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[folder UQE_folder_title_parent_uid_org_id]"
logger=migrator t=2024-08-29T15:36:55.182703782Z level=debug msg="Executing sql migration" id="Remove unique index UQE_folder_title_parent_uid_org_id" sql="DROP INDEX `UQE_folder_title_parent_uid_org_id`"
logger=migrator t=2024-08-29T15:36:55.184919733Z level=info msg="Migration successfully executed" id="Remove unique index UQE_folder_title_parent_uid_org_id" duration=3.5722ms
logger=migrator t=2024-08-29T15:36:55.195598632Z level=info msg="Executing migration" id="Add unique index UQE_folder_org_id_parent_uid_title"
logger=migrator t=2024-08-29T15:36:55.196233284Z level=debug msg="Executing migration condition SQL" id="Add unique index UQE_folder_org_id_parent_uid_title" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[folder UQE_folder_org_id_parent_uid_title]"
logger=migrator t=2024-08-29T15:36:55.198347028Z level=debug msg="Executing sql migration" id="Add unique index UQE_folder_org_id_parent_uid_title" sql="CREATE UNIQUE INDEX `UQE_folder_org_id_parent_uid_title` ON `folder` (`org_id`,`parent_uid`,`title`);"
logger=migrator t=2024-08-29T15:36:55.199737796Z level=info msg="Migration successfully executed" id="Add unique index UQE_folder_org_id_parent_uid_title" duration=4.139484ms
logger=migrator t=2024-08-29T15:36:55.212663603Z level=info msg="Executing migration" id="Remove index IDX_folder_parent_uid_org_id"
logger=migrator t=2024-08-29T15:36:55.212940185Z level=debug msg="Executing migration condition SQL" id="Remove index IDX_folder_parent_uid_org_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[folder IDX_folder_parent_uid_org_id]"
logger=migrator t=2024-08-29T15:36:55.215168539Z level=debug msg="Executing sql migration" id="Remove index IDX_folder_parent_uid_org_id" sql="DROP INDEX `IDX_folder_parent_uid_org_id`"
logger=migrator t=2024-08-29T15:36:55.21657121Z level=info msg="Migration successfully executed" id="Remove index IDX_folder_parent_uid_org_id" duration=3.909521ms
logger=migrator t=2024-08-29T15:36:55.229247882Z level=info msg="Executing migration" id="create anon_device table"
logger=migrator t=2024-08-29T15:36:55.229294366Z level=debug msg="Executing sql migration" id="create anon_device table" sql="CREATE TABLE IF NOT EXISTS `anon_device` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `client_ip` TEXT NOT NULL\n, `created_at` DATETIME NOT NULL\n, `device_id` TEXT NOT NULL\n, `updated_at` DATETIME NOT NULL\n, `user_agent` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:55.232417561Z level=info msg="Migration successfully executed" id="create anon_device table" duration=3.170455ms
logger=migrator t=2024-08-29T15:36:55.247198072Z level=info msg="Executing migration" id="add unique index anon_device.device_id"
logger=migrator t=2024-08-29T15:36:55.247310875Z level=debug msg="Executing migration condition SQL" id="add unique index anon_device.device_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[anon_device UQE_anon_device_device_id]"
logger=migrator t=2024-08-29T15:36:55.248121821Z level=debug msg="Executing sql migration" id="add unique index anon_device.device_id" sql="CREATE UNIQUE INDEX `UQE_anon_device_device_id` ON `anon_device` (`device_id`);"
logger=migrator t=2024-08-29T15:36:55.24916767Z level=info msg="Migration successfully executed" id="add unique index anon_device.device_id" duration=1.971123ms
logger=migrator t=2024-08-29T15:36:55.259156883Z level=info msg="Executing migration" id="add index anon_device.updated_at"
logger=migrator t=2024-08-29T15:36:55.259259188Z level=debug msg="Executing migration condition SQL" id="add index anon_device.updated_at" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[anon_device IDX_anon_device_updated_at]"
logger=migrator t=2024-08-29T15:36:55.259748218Z level=debug msg="Executing sql migration" id="add index anon_device.updated_at" sql="CREATE INDEX `IDX_anon_device_updated_at` ON `anon_device` (`updated_at`);"
logger=migrator t=2024-08-29T15:36:55.260509909Z level=info msg="Migration successfully executed" id="add index anon_device.updated_at" duration=1.354228ms
logger=migrator t=2024-08-29T15:36:55.272871486Z level=info msg="Executing migration" id="create signing_key table"
logger=migrator t=2024-08-29T15:36:55.273091271Z level=debug msg="Executing sql migration" id="create signing_key table" sql="CREATE TABLE IF NOT EXISTS `signing_key` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `key_id` TEXT NOT NULL\n, `private_key` TEXT NOT NULL\n, `added_at` DATETIME NOT NULL\n, `expires_at` DATETIME NULL\n, `alg` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:55.274238892Z level=info msg="Migration successfully executed" id="create signing_key table" duration=1.368713ms
logger=migrator t=2024-08-29T15:36:55.283809338Z level=info msg="Executing migration" id="add unique index signing_key.key_id"
logger=migrator t=2024-08-29T15:36:55.283916987Z level=debug msg="Executing migration condition SQL" id="add unique index signing_key.key_id" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[signing_key UQE_signing_key_key_id]"
logger=migrator t=2024-08-29T15:36:55.284554358Z level=debug msg="Executing sql migration" id="add unique index signing_key.key_id" sql="CREATE UNIQUE INDEX `UQE_signing_key_key_id` ON `signing_key` (`key_id`);"
logger=migrator t=2024-08-29T15:36:55.28551953Z level=info msg="Migration successfully executed" id="add unique index signing_key.key_id" duration=1.711215ms
logger=migrator t=2024-08-29T15:36:55.297952756Z level=info msg="Executing migration" id="set legacy alert migration status in kvstore"
logger=migrator t=2024-08-29T15:36:55.298234361Z level=debug msg="Executing code migration" id="set legacy alert migration status in kvstore"
logger=migrator t=2024-08-29T15:36:55.299971278Z level=info msg="Migration successfully executed" id="set legacy alert migration status in kvstore" duration=2.021209ms
logger=migrator t=2024-08-29T15:36:55.3108217Z level=info msg="Executing migration" id="migrate record of created folders during legacy migration to kvstore"
logger=migrator t=2024-08-29T15:36:55.310886842Z level=debug msg="Executing code migration" id="migrate record of created folders during legacy migration to kvstore"
logger=migrator t=2024-08-29T15:36:55.311742659Z level=debug msg="no dashboards with created_by=-8, nothing to set in kvstore"
logger=migrator t=2024-08-29T15:36:55.311846482Z level=info msg="Migration successfully executed" id="migrate record of created folders during legacy migration to kvstore" duration=1.028717ms
logger=migrator t=2024-08-29T15:36:55.32198767Z level=info msg="Executing migration" id="Add folder_uid for dashboard"
logger=migrator t=2024-08-29T15:36:55.322261521Z level=debug msg="Executing sql migration" id="Add folder_uid for dashboard" sql="alter table `dashboard` ADD COLUMN `folder_uid` TEXT NULL "
logger=migrator t=2024-08-29T15:36:55.33219655Z level=info msg="Migration successfully executed" id="Add folder_uid for dashboard" duration=10.209464ms
logger=migrator t=2024-08-29T15:36:55.342540679Z level=info msg="Executing migration" id="Populate dashboard folder_uid column"
logger=migrator t=2024-08-29T15:36:55.342642143Z level=debug msg="Executing code migration" id="Populate dashboard folder_uid column"
logger=migrator t=2024-08-29T15:36:55.344243906Z level=debug msg="Migrating dashboard data" dashboardsrows=0 folderrows=0
logger=migrator t=2024-08-29T15:36:55.344352339Z level=info msg="Migration successfully executed" id="Populate dashboard folder_uid column" duration=1.814508ms
logger=migrator t=2024-08-29T15:36:55.356498505Z level=info msg="Executing migration" id="Add unique index for dashboard_org_id_folder_uid_title"
logger=migrator t=2024-08-29T15:36:55.35660705Z level=debug msg="Executing code migration" id="Add unique index for dashboard_org_id_folder_uid_title"
logger=migrator t=2024-08-29T15:36:55.356616899Z level=info msg="Migration successfully executed" id="Add unique index for dashboard_org_id_folder_uid_title" duration=121.15µs
logger=migrator t=2024-08-29T15:36:55.367757384Z level=info msg="Executing migration" id="Delete unique index for dashboard_org_id_folder_id_title"
logger=migrator t=2024-08-29T15:36:55.367994066Z level=debug msg="Executing migration condition SQL" id="Delete unique index for dashboard_org_id_folder_id_title" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard UQE_dashboard_org_id_folder_id_title]"
logger=migrator t=2024-08-29T15:36:55.369249051Z level=debug msg="Executing sql migration" id="Delete unique index for dashboard_org_id_folder_id_title" sql="DROP INDEX `UQE_dashboard_org_id_folder_id_title`"
logger=migrator t=2024-08-29T15:36:55.370620324Z level=info msg="Migration successfully executed" id="Delete unique index for dashboard_org_id_folder_id_title" duration=2.865034ms
logger=migrator t=2024-08-29T15:36:55.381499261Z level=info msg="Executing migration" id="Delete unique index for dashboard_org_id_folder_uid_title"
logger=migrator t=2024-08-29T15:36:55.381547461Z level=debug msg="Executing code migration" id="Delete unique index for dashboard_org_id_folder_uid_title"
logger=migrator t=2024-08-29T15:36:55.381555807Z level=info msg="Migration successfully executed" id="Delete unique index for dashboard_org_id_folder_uid_title" duration=60.86µs
logger=migrator t=2024-08-29T15:36:55.39195833Z level=info msg="Executing migration" id="Add unique index for dashboard_org_id_folder_uid_title_is_folder"
logger=migrator t=2024-08-29T15:36:55.392005136Z level=debug msg="Executing migration condition SQL" id="Add unique index for dashboard_org_id_folder_uid_title_is_folder" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard UQE_dashboard_org_id_folder_uid_title_is_folder]"
logger=migrator t=2024-08-29T15:36:55.393663045Z level=debug msg="Executing sql migration" id="Add unique index for dashboard_org_id_folder_uid_title_is_folder" sql="CREATE UNIQUE INDEX `UQE_dashboard_org_id_folder_uid_title_is_folder` ON `dashboard` (`org_id`,`folder_uid`,`title`,`is_folder`);"
logger=migrator t=2024-08-29T15:36:55.395179939Z level=info msg="Migration successfully executed" id="Add unique index for dashboard_org_id_folder_uid_title_is_folder" duration=3.223086ms
logger=migrator t=2024-08-29T15:36:55.407327826Z level=info msg="Executing migration" id="Restore index for dashboard_org_id_folder_id_title"
logger=migrator t=2024-08-29T15:36:55.407443167Z level=debug msg="Executing migration condition SQL" id="Restore index for dashboard_org_id_folder_id_title" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[dashboard IDX_dashboard_org_id_folder_id_title]"
logger=migrator t=2024-08-29T15:36:55.408895764Z level=debug msg="Executing sql migration" id="Restore index for dashboard_org_id_folder_id_title" sql="CREATE INDEX `IDX_dashboard_org_id_folder_id_title` ON `dashboard` (`org_id`,`folder_id`,`title`);"
logger=migrator t=2024-08-29T15:36:55.410409056Z level=info msg="Migration successfully executed" id="Restore index for dashboard_org_id_folder_id_title" duration=3.082751ms
logger=migrator t=2024-08-29T15:36:55.421607463Z level=info msg="Executing migration" id="create sso_setting table"
logger=migrator t=2024-08-29T15:36:55.421722305Z level=debug msg="Executing sql migration" id="create sso_setting table" sql="CREATE TABLE IF NOT EXISTS `sso_setting` (\n`id` TEXT PRIMARY KEY NOT NULL\n, `provider` TEXT NOT NULL\n, `settings` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n, `is_deleted` INTEGER NOT NULL DEFAULT 0\n);"
logger=migrator t=2024-08-29T15:36:55.424836553Z level=info msg="Migration successfully executed" id="create sso_setting table" duration=3.230513ms
logger=migrator t=2024-08-29T15:36:55.437652961Z level=info msg="Executing migration" id="copy kvstore migration status to each org"
logger=migrator t=2024-08-29T15:36:55.437764942Z level=debug msg="Executing code migration" id="copy kvstore migration status to each org"
logger=migrator t=2024-08-29T15:36:55.44069368Z level=debug msg="no orgs, nothing to set in kvstore"
logger=migrator t=2024-08-29T15:36:55.440779757Z level=info msg="Migration successfully executed" id="copy kvstore migration status to each org" duration=3.130049ms
logger=migrator t=2024-08-29T15:36:55.453088587Z level=info msg="Executing migration" id="add back entry for orgid=0 migrated status"
logger=migrator t=2024-08-29T15:36:55.453303555Z level=debug msg="Executing code migration" id="add back entry for orgid=0 migrated status"
logger=migrator t=2024-08-29T15:36:55.453831494Z level=debug msg="No migrated orgs in kvstore, nothing to set"
logger=migrator t=2024-08-29T15:36:55.45515161Z level=info msg="Migration successfully executed" id="add back entry for orgid=0 migrated status" duration=2.065106ms
logger=migrator t=2024-08-29T15:36:55.465531175Z level=info msg="Executing migration" id="managed dashboard permissions annotation actions migration"
logger=migrator t=2024-08-29T15:36:55.465647749Z level=debug msg="Executing code migration" id="managed dashboard permissions annotation actions migration"
logger=migrator t=2024-08-29T15:36:55.467645782Z level=info msg="Migration successfully executed" id="managed dashboard permissions annotation actions migration" duration=2.116513ms
logger=migrator t=2024-08-29T15:36:55.478850318Z level=info msg="Executing migration" id="create cloud_migration table v1"
logger=migrator t=2024-08-29T15:36:55.47925509Z level=debug msg="Executing sql migration" id="create cloud_migration table v1" sql="CREATE TABLE IF NOT EXISTS `cloud_migration` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `auth_token` TEXT NULL\n, `stack` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:55.480902847Z level=info msg="Migration successfully executed" id="create cloud_migration table v1" duration=2.053735ms
logger=migrator t=2024-08-29T15:36:55.493154736Z level=info msg="Executing migration" id="create cloud_migration_run table v1"
logger=migrator t=2024-08-29T15:36:55.493280796Z level=debug msg="Executing sql migration" id="create cloud_migration_run table v1" sql="CREATE TABLE IF NOT EXISTS `cloud_migration_run` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `cloud_migration_uid` TEXT NULL\n, `result` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n, `finished` DATETIME NULL\n);"
logger=migrator t=2024-08-29T15:36:55.495430437Z level=info msg="Migration successfully executed" id="create cloud_migration_run table v1" duration=2.273225ms
logger=migrator t=2024-08-29T15:36:55.509496432Z level=info msg="Executing migration" id="add stack_id column"
logger=migrator t=2024-08-29T15:36:55.509613626Z level=debug msg="Executing sql migration" id="add stack_id column" sql="alter table `cloud_migration` ADD COLUMN `stack_id` INTEGER NOT NULL "
logger=migrator t=2024-08-29T15:36:55.522464649Z level=info msg="Migration successfully executed" id="add stack_id column" duration=12.95061ms
logger=migrator t=2024-08-29T15:36:55.534198444Z level=info msg="Executing migration" id="add region_slug column"
logger=migrator t=2024-08-29T15:36:55.534653921Z level=debug msg="Executing sql migration" id="add region_slug column" sql="alter table `cloud_migration` ADD COLUMN `region_slug` TEXT NOT NULL "
logger=migrator t=2024-08-29T15:36:55.544227681Z level=info msg="Migration successfully executed" id="add region_slug column" duration=10.027218ms
logger=migrator t=2024-08-29T15:36:55.557684413Z level=info msg="Executing migration" id="add cluster_slug column"
logger=migrator t=2024-08-29T15:36:55.557737881Z level=debug msg="Executing sql migration" id="add cluster_slug column" sql="alter table `cloud_migration` ADD COLUMN `cluster_slug` TEXT NOT NULL "
logger=migrator t=2024-08-29T15:36:55.565260388Z level=info msg="Migration successfully executed" id="add cluster_slug column" duration=7.575436ms
logger=migrator t=2024-08-29T15:36:55.577184579Z level=info msg="Executing migration" id="add migration uid column"
logger=migrator t=2024-08-29T15:36:55.577241844Z level=debug msg="Executing sql migration" id="add migration uid column" sql="alter table `cloud_migration` ADD COLUMN `uid` TEXT NULL "
logger=migrator t=2024-08-29T15:36:55.588608456Z level=info msg="Migration successfully executed" id="add migration uid column" duration=11.422481ms
logger=migrator t=2024-08-29T15:36:55.598352222Z level=info msg="Executing migration" id="Update uid column values for migration"
logger=migrator t=2024-08-29T15:36:55.598475258Z level=debug msg="Executing sql migration" id="Update uid column values for migration" sql="UPDATE cloud_migration SET uid=printf('u%09d',id) WHERE uid IS NULL;"
logger=migrator t=2024-08-29T15:36:55.598697189Z level=info msg="Migration successfully executed" id="Update uid column values for migration" duration=359.127µs
logger=migrator t=2024-08-29T15:36:55.609516598Z level=info msg="Executing migration" id="Add unique index migration_uid"
logger=migrator t=2024-08-29T15:36:55.609569134Z level=debug msg="Executing migration condition SQL" id="Add unique index migration_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[cloud_migration UQE_cloud_migration_uid]"
logger=migrator t=2024-08-29T15:36:55.61105104Z level=debug msg="Executing sql migration" id="Add unique index migration_uid" sql="CREATE UNIQUE INDEX `UQE_cloud_migration_uid` ON `cloud_migration` (`uid`);"
logger=migrator t=2024-08-29T15:36:55.612424185Z level=info msg="Migration successfully executed" id="Add unique index migration_uid" duration=2.907626ms
logger=migrator t=2024-08-29T15:36:55.625596638Z level=info msg="Executing migration" id="add migration run uid column"
logger=migrator t=2024-08-29T15:36:55.625643694Z level=debug msg="Executing sql migration" id="add migration run uid column" sql="alter table `cloud_migration_run` ADD COLUMN `uid` TEXT NULL "
logger=migrator t=2024-08-29T15:36:55.63330154Z level=info msg="Migration successfully executed" id="add migration run uid column" duration=7.702209ms
logger=migrator t=2024-08-29T15:36:55.645748542Z level=info msg="Executing migration" id="Update uid column values for migration run"
logger=migrator t=2024-08-29T15:36:55.64587761Z level=debug msg="Executing sql migration" id="Update uid column values for migration run" sql="UPDATE cloud_migration_run SET uid=printf('u%09d',id) WHERE uid IS NULL;"
logger=migrator t=2024-08-29T15:36:55.646085859Z level=info msg="Migration successfully executed" id="Update uid column values for migration run" duration=336.395µs
logger=migrator t=2024-08-29T15:36:55.657342918Z level=info msg="Executing migration" id="Add unique index migration_run_uid"
logger=migrator t=2024-08-29T15:36:55.657494818Z level=debug msg="Executing migration condition SQL" id="Add unique index migration_run_uid" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[cloud_migration_run UQE_cloud_migration_run_uid]"
logger=migrator t=2024-08-29T15:36:55.658573665Z level=debug msg="Executing sql migration" id="Add unique index migration_run_uid" sql="CREATE UNIQUE INDEX `UQE_cloud_migration_run_uid` ON `cloud_migration_run` (`uid`);"
logger=migrator t=2024-08-29T15:36:55.660474594Z level=info msg="Migration successfully executed" id="Add unique index migration_run_uid" duration=3.133216ms
logger=migrator t=2024-08-29T15:36:55.671737484Z level=info msg="Executing migration" id="Rename table cloud_migration to cloud_migration_session_tmp_qwerty - v1"
logger=migrator t=2024-08-29T15:36:55.672143953Z level=debug msg="Executing sql migration" id="Rename table cloud_migration to cloud_migration_session_tmp_qwerty - v1" sql="ALTER TABLE `cloud_migration` RENAME TO `cloud_migration_session_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:55.702207494Z level=info msg="Migration successfully executed" id="Rename table cloud_migration to cloud_migration_session_tmp_qwerty - v1" duration=30.47052ms
logger=migrator t=2024-08-29T15:36:55.713034069Z level=info msg="Executing migration" id="create cloud_migration_session v2"
logger=migrator t=2024-08-29T15:36:55.713535874Z level=debug msg="Executing sql migration" id="create cloud_migration_session v2" sql="CREATE TABLE IF NOT EXISTS `cloud_migration_session` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `uid` TEXT NULL\n, `auth_token` TEXT NULL\n, `slug` TEXT NOT NULL\n, `stack_id` INTEGER NOT NULL\n, `region_slug` TEXT NOT NULL\n, `cluster_slug` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:55.71530328Z level=info msg="Migration successfully executed" id="create cloud_migration_session v2" duration=2.271093ms
logger=migrator t=2024-08-29T15:36:55.726272068Z level=info msg="Executing migration" id="create index UQE_cloud_migration_session_uid - v2"
logger=migrator t=2024-08-29T15:36:55.72660554Z level=debug msg="Executing migration condition SQL" id="create index UQE_cloud_migration_session_uid - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[cloud_migration_session UQE_cloud_migration_session_uid]"
logger=migrator t=2024-08-29T15:36:55.727714871Z level=debug msg="Executing sql migration" id="create index UQE_cloud_migration_session_uid - v2" sql="CREATE UNIQUE INDEX `UQE_cloud_migration_session_uid` ON `cloud_migration_session` (`uid`);"
logger=migrator t=2024-08-29T15:36:55.730803472Z level=info msg="Migration successfully executed" id="create index UQE_cloud_migration_session_uid - v2" duration=4.528477ms
logger=migrator t=2024-08-29T15:36:55.744317527Z level=info msg="Executing migration" id="copy cloud_migration_session v1 to v2"
logger=migrator t=2024-08-29T15:36:55.744680202Z level=debug msg="Executing sql migration" id="copy cloud_migration_session v1 to v2" sql="INSERT INTO `cloud_migration_session` (`slug`\n, `cluster_slug`\n, `updated`\n, `stack_id`\n, `region_slug`\n, `created`\n, `id`\n, `uid`\n, `auth_token`) SELECT `stack`\n, `cluster_slug`\n, `updated`\n, `stack_id`\n, `region_slug`\n, `created`\n, `id`\n, `uid`\n, `auth_token` FROM `cloud_migration_session_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:55.745498571Z level=info msg="Migration successfully executed" id="copy cloud_migration_session v1 to v2" duration=1.181096ms
logger=migrator t=2024-08-29T15:36:55.756316613Z level=info msg="Executing migration" id="drop cloud_migration_session_tmp_qwerty"
logger=migrator t=2024-08-29T15:36:55.756678453Z level=debug msg="Executing sql migration" id="drop cloud_migration_session_tmp_qwerty" sql="DROP TABLE IF EXISTS `cloud_migration_session_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:55.759587086Z level=info msg="Migration successfully executed" id="drop cloud_migration_session_tmp_qwerty" duration=3.259103ms
logger=migrator t=2024-08-29T15:36:55.772421546Z level=info msg="Executing migration" id="Rename table cloud_migration_run to cloud_migration_snapshot_tmp_qwerty - v1"
logger=migrator t=2024-08-29T15:36:55.772467289Z level=debug msg="Executing sql migration" id="Rename table cloud_migration_run to cloud_migration_snapshot_tmp_qwerty - v1" sql="ALTER TABLE `cloud_migration_run` RENAME TO `cloud_migration_snapshot_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:55.805768159Z level=info msg="Migration successfully executed" id="Rename table cloud_migration_run to cloud_migration_snapshot_tmp_qwerty - v1" duration=33.344523ms
logger=migrator t=2024-08-29T15:36:55.82161261Z level=info msg="Executing migration" id="create cloud_migration_snapshot v2"
logger=migrator t=2024-08-29T15:36:55.82174214Z level=debug msg="Executing sql migration" id="create cloud_migration_snapshot v2" sql="CREATE TABLE IF NOT EXISTS `cloud_migration_snapshot` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `uid` TEXT NULL\n, `session_uid` TEXT NULL\n, `result` TEXT NOT NULL\n, `created` DATETIME NOT NULL\n, `updated` DATETIME NOT NULL\n, `finished` DATETIME NULL\n);"
logger=migrator t=2024-08-29T15:36:55.826206553Z level=info msg="Migration successfully executed" id="create cloud_migration_snapshot v2" duration=4.590932ms
logger=migrator t=2024-08-29T15:36:55.842001779Z level=info msg="Executing migration" id="create index UQE_cloud_migration_snapshot_uid - v2"
logger=migrator t=2024-08-29T15:36:55.842457713Z level=debug msg="Executing migration condition SQL" id="create index UQE_cloud_migration_snapshot_uid - v2" sql="SELECT 1 FROM `sqlite_master` WHERE `type`='index' AND `tbl_name`=? AND `name`=?" args="[cloud_migration_snapshot UQE_cloud_migration_snapshot_uid]"
logger=migrator t=2024-08-29T15:36:55.850471785Z level=debug msg="Executing sql migration" id="create index UQE_cloud_migration_snapshot_uid - v2" sql="CREATE UNIQUE INDEX `UQE_cloud_migration_snapshot_uid` ON `cloud_migration_snapshot` (`uid`);"
logger=migrator t=2024-08-29T15:36:55.855645279Z level=info msg="Migration successfully executed" id="create index UQE_cloud_migration_snapshot_uid - v2" duration=13.642061ms
logger=migrator t=2024-08-29T15:36:55.874486477Z level=info msg="Executing migration" id="copy cloud_migration_snapshot v1 to v2"
logger=migrator t=2024-08-29T15:36:55.874734395Z level=debug msg="Executing sql migration" id="copy cloud_migration_snapshot v1 to v2" sql="INSERT INTO `cloud_migration_snapshot` (`created`\n, `updated`\n, `finished`\n, `id`\n, `uid`\n, `session_uid`\n, `result`) SELECT `created`\n, `updated`\n, `finished`\n, `id`\n, `uid`\n, `cloud_migration_uid`\n, `result` FROM `cloud_migration_snapshot_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:55.875715006Z level=info msg="Migration successfully executed" id="copy cloud_migration_snapshot v1 to v2" duration=1.232069ms
logger=migrator t=2024-08-29T15:36:55.889641462Z level=info msg="Executing migration" id="drop cloud_migration_snapshot_tmp_qwerty"
logger=migrator t=2024-08-29T15:36:55.890038234Z level=debug msg="Executing sql migration" id="drop cloud_migration_snapshot_tmp_qwerty" sql="DROP TABLE IF EXISTS `cloud_migration_snapshot_tmp_qwerty`"
logger=migrator t=2024-08-29T15:36:55.892398546Z level=info msg="Migration successfully executed" id="drop cloud_migration_snapshot_tmp_qwerty" duration=2.75589ms
logger=migrator t=2024-08-29T15:36:55.906597524Z level=info msg="Executing migration" id="add snapshot upload_url column"
logger=migrator t=2024-08-29T15:36:55.906733752Z level=debug msg="Executing sql migration" id="add snapshot upload_url column" sql="alter table `cloud_migration_snapshot` ADD COLUMN `upload_url` TEXT NULL "
logger=migrator t=2024-08-29T15:36:55.924230789Z level=info msg="Migration successfully executed" id="add snapshot upload_url column" duration=17.62844ms
logger=migrator t=2024-08-29T15:36:55.936740375Z level=info msg="Executing migration" id="add snapshot status column"
logger=migrator t=2024-08-29T15:36:55.936793189Z level=debug msg="Executing sql migration" id="add snapshot status column" sql="alter table `cloud_migration_snapshot` ADD COLUMN `status` TEXT NOT NULL "
logger=migrator t=2024-08-29T15:36:55.954538393Z level=info msg="Migration successfully executed" id="add snapshot status column" duration=17.793057ms
logger=migrator t=2024-08-29T15:36:55.96932817Z level=info msg="Executing migration" id="add snapshot local_directory column"
logger=migrator t=2024-08-29T15:36:55.969478736Z level=debug msg="Executing sql migration" id="add snapshot local_directory column" sql="alter table `cloud_migration_snapshot` ADD COLUMN `local_directory` TEXT NULL "
logger=migrator t=2024-08-29T15:36:55.980445152Z level=info msg="Migration successfully executed" id="add snapshot local_directory column" duration=11.114778ms
logger=migrator t=2024-08-29T15:36:56.003333981Z level=info msg="Executing migration" id="add snapshot gms_snapshot_uid column"
logger=migrator t=2024-08-29T15:36:56.0033857Z level=debug msg="Executing sql migration" id="add snapshot gms_snapshot_uid column" sql="alter table `cloud_migration_snapshot` ADD COLUMN `gms_snapshot_uid` TEXT NULL "
logger=migrator t=2024-08-29T15:36:56.032511105Z level=info msg="Migration successfully executed" id="add snapshot gms_snapshot_uid column" duration=29.174946ms
logger=migrator t=2024-08-29T15:36:56.079311438Z level=info msg="Executing migration" id="add snapshot encryption_key column"
logger=migrator t=2024-08-29T15:36:56.079979141Z level=debug msg="Executing sql migration" id="add snapshot encryption_key column" sql="alter table `cloud_migration_snapshot` ADD COLUMN `encryption_key` TEXT NULL "
logger=migrator t=2024-08-29T15:36:56.091405736Z level=info msg="Migration successfully executed" id="add snapshot encryption_key column" duration=12.092616ms
logger=migrator t=2024-08-29T15:36:56.103775371Z level=info msg="Executing migration" id="add snapshot error_string column"
logger=migrator t=2024-08-29T15:36:56.104837968Z level=debug msg="Executing sql migration" id="add snapshot error_string column" sql="alter table `cloud_migration_snapshot` ADD COLUMN `error_string` TEXT NULL "
logger=migrator t=2024-08-29T15:36:56.1151055Z level=info msg="Migration successfully executed" id="add snapshot error_string column" duration=11.586273ms
logger=migrator t=2024-08-29T15:36:56.124474221Z level=info msg="Executing migration" id="create cloud_migration_resource table v1"
logger=migrator t=2024-08-29T15:36:56.124647409Z level=debug msg="Executing sql migration" id="create cloud_migration_resource table v1" sql="CREATE TABLE IF NOT EXISTS `cloud_migration_resource` (\n`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n, `uid` TEXT NOT NULL\n, `resource_type` TEXT NOT NULL\n, `resource_uid` TEXT NOT NULL\n, `status` TEXT NOT NULL\n, `error_string` TEXT NULL\n, `snapshot_uid` TEXT NOT NULL\n);"
logger=migrator t=2024-08-29T15:36:56.12630016Z level=info msg="Migration successfully executed" id="create cloud_migration_resource table v1" duration=1.826539ms
logger=migrator t=2024-08-29T15:36:56.137310857Z level=info msg="Executing migration" id="delete cloud_migration_snapshot.result column"
logger=migrator t=2024-08-29T15:36:56.137473183Z level=debug msg="Executing sql migration" id="delete cloud_migration_snapshot.result column" sql="ALTER TABLE cloud_migration_snapshot DROP COLUMN result"
logger=migrator t=2024-08-29T15:36:56.187170304Z level=info msg="Migration successfully executed" id="delete cloud_migration_snapshot.result column" duration=49.427744ms
logger=migrator t=2024-08-29T15:36:56.199672688Z level=info msg="Executing migration" id="alter kv_store.value to longtext"
logger=migrator t=2024-08-29T15:36:56.200377679Z level=debug msg="Executing sql migration" id="alter kv_store.value to longtext" sql="SELECT 0;"
logger=migrator t=2024-08-29T15:36:56.200496509Z level=info msg="Migration successfully executed" id="alter kv_store.value to longtext" duration=823.659µs
logger=migrator t=2024-08-29T15:36:56.211487565Z level=info msg="Executing migration" id="add notification_settings column to alert_rule table"
logger=migrator t=2024-08-29T15:36:56.211731409Z level=debug msg="Executing sql migration" id="add notification_settings column to alert_rule table" sql="alter table `alert_rule` ADD COLUMN `notification_settings` TEXT NULL "
logger=migrator t=2024-08-29T15:36:56.227864172Z level=info msg="Migration successfully executed" id="add notification_settings column to alert_rule table" duration=16.372788ms
logger=migrator t=2024-08-29T15:36:56.23765422Z level=info msg="Executing migration" id="add notification_settings column to alert_rule_version table"
logger=migrator t=2024-08-29T15:36:56.237722546Z level=debug msg="Executing sql migration" id="add notification_settings column to alert_rule_version table" sql="alter table `alert_rule_version` ADD COLUMN `notification_settings` TEXT NULL "
logger=migrator t=2024-08-29T15:36:56.252711342Z level=info msg="Migration successfully executed" id="add notification_settings column to alert_rule_version table" duration=15.054519ms
logger=migrator t=2024-08-29T15:36:56.264458467Z level=info msg="Executing migration" id="removing scope from alert.instances:read action migration"
logger=migrator t=2024-08-29T15:36:56.264510214Z level=debug msg="Executing code migration" id="removing scope from alert.instances:read action migration"
logger=migrator t=2024-08-29T15:36:56.265420452Z level=info msg="Migration successfully executed" id="removing scope from alert.instances:read action migration" duration=964.436µs
logger=migrator t=2024-08-29T15:36:56.276441893Z level=info msg="Executing migration" id="managed folder permissions alerting silences actions migration"
logger=migrator t=2024-08-29T15:36:56.277243346Z level=debug msg="Executing code migration" id="managed folder permissions alerting silences actions migration"
logger=migrator t=2024-08-29T15:36:56.277781067Z level=info msg="Migration successfully executed" id="managed folder permissions alerting silences actions migration" duration=1.34047ms
logger=migrator t=2024-08-29T15:36:56.290083256Z level=info msg="Executing migration" id="add record column to alert_rule table"
logger=migrator t=2024-08-29T15:36:56.290131205Z level=debug msg="Executing sql migration" id="add record column to alert_rule table" sql="alter table `alert_rule` ADD COLUMN `record` TEXT NULL "
logger=migrator t=2024-08-29T15:36:56.298704704Z level=info msg="Migration successfully executed" id="add record column to alert_rule table" duration=8.620544ms
logger=migrator t=2024-08-29T15:36:56.309793692Z level=info msg="Executing migration" id="add record column to alert_rule_version table"
logger=migrator t=2024-08-29T15:36:56.309840844Z level=debug msg="Executing sql migration" id="add record column to alert_rule_version table" sql="alter table `alert_rule_version` ADD COLUMN `record` TEXT NULL "
logger=migrator t=2024-08-29T15:36:56.320280226Z level=info msg="Migration successfully executed" id="add record column to alert_rule_version table" duration=10.485428ms
logger=migrator t=2024-08-29T15:36:56.336765896Z level=info msg="Executing migration" id="add resolved_at column to alert_instance table"
logger=migrator t=2024-08-29T15:36:56.336883395Z level=debug msg="Executing sql migration" id="add resolved_at column to alert_instance table" sql="alter table `alert_instance` ADD COLUMN `resolved_at` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:56.355470173Z level=info msg="Migration successfully executed" id="add resolved_at column to alert_instance table" duration=18.701445ms
logger=migrator t=2024-08-29T15:36:56.367116023Z level=info msg="Executing migration" id="add last_sent_at column to alert_instance table"
logger=migrator t=2024-08-29T15:36:56.36717008Z level=debug msg="Executing sql migration" id="add last_sent_at column to alert_instance table" sql="alter table `alert_instance` ADD COLUMN `last_sent_at` INTEGER NULL "
logger=migrator t=2024-08-29T15:36:56.38089697Z level=info msg="Migration successfully executed" id="add last_sent_at column to alert_instance table" duration=13.7805ms
logger=migrator t=2024-08-29T15:36:56.391715216Z level=info msg="Executing migration" id="Enable traceQL streaming for all Tempo datasources"
logger=migrator t=2024-08-29T15:36:56.392105596Z level=debug msg="Executing code migration" id="Enable traceQL streaming for all Tempo datasources"
logger=migrator t=2024-08-29T15:36:56.392117558Z level=info msg="Migration successfully executed" id="Enable traceQL streaming for all Tempo datasources" duration=406.175µs
logger=migrator t=2024-08-29T15:36:56.402078307Z level=info msg="migrations completed" performed=594 skipped=0 duration=15.477699164s
logger=migrator t=2024-08-29T15:36:56.403875652Z level=info msg="Unlocking database"
logger=sqlstore t=2024-08-29T15:36:56.404443737Z level=debug msg="Ensuring main org and admin user exist"
logger=sqlstore t=2024-08-29T15:36:56.420359676Z level=debug msg="Creating default admin user"
logger=sqlstore t=2024-08-29T15:36:56.421751979Z level=debug msg="auto assigned organization not found"
logger=sqlstore t=2024-08-29T15:36:56.456820174Z level=info msg="Created default admin" user=graf_god
logger=sqlstore t=2024-08-29T15:36:56.457267353Z level=debug msg="Creating default org" name="Main Org."
logger=sqlstore t=2024-08-29T15:36:56.459329558Z level=info msg="Created default organization"
logger=secrets t=2024-08-29T15:36:56.471258707Z level=info msg="Envelope encryption state" enabled=true currentprovider=secretKey.v1
logger=renderer.manager t=2024-08-29T15:36:56.574175611Z level=error msg="Failed to get renderer plugin sources" error="failed to open plugins path"
logger=plugin.angulardetectorsprovider.dynamic t=2024-08-29T15:36:56.575585099Z level=debug msg="Providing dynamic angular detection patterns" baseURL=https://grafana.com/api interval=24h0m0s
logger=plugin.angulardetectorsprovider.dynamic t=2024-08-29T15:36:56.575686633Z level=debug msg="Restoring cache"
logger=infra.kvstore.sql t=2024-08-29T15:36:56.576349407Z level=debug msg="kvstore value not found" orgId=0 namespace=plugin.angularpatterns key=angular_patterns
logger=plugin.angulardetectorsprovider.dynamic t=2024-08-29T15:36:56.576463033Z level=info msg="Restored cache from database" duration=773.797µs
logger=tsdb.cloudwatch t=2024-08-29T15:36:56.576558194Z level=debug msg=Initializing
logger=tsdb.prometheus t=2024-08-29T15:36:56.576919939Z level=debug msg=Initializing
logger=sqlstore t=2024-08-29T15:36:56.577253275Z level=debug msg="ReadReplica feature flag not enabled, using main SQLStore"
logger=accesscontrol.service t=2024-08-29T15:36:56.578224474Z level=debug msg="No permission require a scope split" migration=scopeSplit
logger=folder-service t=2024-08-29T15:36:56.578509734Z level=debug msg="syncing dashboard and folder tables started"
logger=folder-service t=2024-08-29T15:36:56.579499653Z level=debug msg="syncing dashboard and folder tables finished"
logger=accesscontrol t=2024-08-29T15:36:56.57978292Z level=debug msg="Adding scope attribute resolver" prefix=folders:name:
logger=accesscontrol t=2024-08-29T15:36:56.579800341Z level=debug msg="Adding scope attribute resolver" prefix=folders:id:
logger=accesscontrol t=2024-08-29T15:36:56.579807327Z level=debug msg="Adding scope attribute resolver" prefix=folders:uid:
logger=plugin.store t=2024-08-29T15:36:56.580342015Z level=info msg="Loading plugins..."
logger=plugin.sources t=2024-08-29T15:36:56.580449947Z level=error msg="Failed to load external plugins" error="failed to open plugins path"
logger=plugin.loader source=core t=2024-08-29T15:36:56.580467066Z level=debug msg="Loading plugin source..."
logger=local.finder t=2024-08-29T15:36:56.610515222Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/alertmanager/plugin.json
logger=local.finder t=2024-08-29T15:36:56.61245559Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/azuremonitor/dist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.613937692Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/cloud-monitoring/dist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.614582415Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/cloudwatch/plugin.json
logger=local.finder t=2024-08-29T15:36:56.615235081Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/dashboard/plugin.json
logger=local.finder t=2024-08-29T15:36:56.615422988Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/elasticsearch/plugin.json
logger=local.finder t=2024-08-29T15:36:56.616139458Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/grafana/plugin.json
logger=local.finder t=2024-08-29T15:36:56.616369152Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/grafana-postgresql-datasource/dist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.616431261Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/grafana-pyroscope-datasource/dist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.616504667Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/grafana-testdata-datasource/dist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.616555697Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/graphite/plugin.json
logger=local.finder t=2024-08-29T15:36:56.616603992Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/influxdb/plugin.json
logger=local.finder t=2024-08-29T15:36:56.616671761Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/jaeger/dist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.617377316Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/loki/plugin.json
logger=local.finder t=2024-08-29T15:36:56.617478695Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/mixed/plugin.json
logger=local.finder t=2024-08-29T15:36:56.617526217Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/mssql/plugin.json
logger=local.finder t=2024-08-29T15:36:56.617563287Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/mysql/dist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.618152489Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/opentsdb/plugin.json
logger=local.finder t=2024-08-29T15:36:56.618210993Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/parca/dist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.618440563Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/prometheus/plugin.json
logger=local.finder t=2024-08-29T15:36:56.619316816Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/tempo/dist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.619484217Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/datasource/zipkin/dist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.619537051Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/alertlist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.619598622Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/annolist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.619795081Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/barchart/plugin.json
logger=local.finder t=2024-08-29T15:36:56.620627658Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/bargauge/plugin.json
logger=local.finder t=2024-08-29T15:36:56.62087871Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/candlestick/plugin.json
logger=local.finder t=2024-08-29T15:36:56.620963946Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/canvas/plugin.json
logger=local.finder t=2024-08-29T15:36:56.621414189Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/dashlist/plugin.json
logger=local.finder t=2024-08-29T15:36:56.621723899Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/datagrid/plugin.json
logger=local.finder t=2024-08-29T15:36:56.621771889Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/debug/plugin.json
logger=local.finder t=2024-08-29T15:36:56.621811082Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/flamegraph/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622240318Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/gauge/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622360868Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/geomap/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622402828Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/gettingstarted/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622442541Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/graph/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622474057Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/heatmap/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622543983Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/histogram/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622609809Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/live/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622649071Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/logs/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622688032Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/news/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622717722Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/nodeGraph/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622749871Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/piechart/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622782855Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/stat/plugin.json
logger=local.finder t=2024-08-29T15:36:56.622811895Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/state-timeline/plugin.json
logger=local.finder t=2024-08-29T15:36:56.623015431Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/status-history/plugin.json
logger=local.finder t=2024-08-29T15:36:56.624206052Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/table/plugin.json
logger=local.finder t=2024-08-29T15:36:56.624271753Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/table-old/plugin.json
logger=local.finder t=2024-08-29T15:36:56.624311628Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/text/plugin.json
logger=local.finder t=2024-08-29T15:36:56.624356419Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/timeseries/plugin.json
logger=local.finder t=2024-08-29T15:36:56.624404786Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/traces/plugin.json
logger=local.finder t=2024-08-29T15:36:56.625386173Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/trend/plugin.json
logger=local.finder t=2024-08-29T15:36:56.625484804Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/welcome/plugin.json
logger=local.finder t=2024-08-29T15:36:56.625533724Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/xychart/plugin.json
logger=local.finder t=2024-08-29T15:36:56.625575657Z level=debug msg="Loading plugin" path=/usr/share/grafana/public/app/plugins/panel/xychart/v2/plugin.json
logger=local.finder t=2024-08-29T15:36:56.644213447Z level=debug msg="Adding child" parent=xychart child=xychart relPath=v2
logger=plugin.signature.validator t=2024-08-29T15:36:56.646942966Z level=debug msg="Not setting descendant plugin's signature to that of root since it's core or internal" plugin=xychart signature=internal isCore=true
logger=plugin.grafana-postgresql-datasource t=2024-08-29T15:36:56.647098798Z level=debug msg="Successfully started backend plugin process"
logger=plugin.influxdb t=2024-08-29T15:36:56.647115597Z level=debug msg="Successfully started backend plugin process"
logger=plugin.tempo t=2024-08-29T15:36:56.647530976Z level=debug msg="Successfully started backend plugin process"
logger=plugin.stackdriver t=2024-08-29T15:36:56.647789136Z level=debug msg="Successfully started backend plugin process"
logger=plugin.opentsdb t=2024-08-29T15:36:56.647799483Z level=debug msg="Successfully started backend plugin process"
logger=plugin.parca t=2024-08-29T15:36:56.647808375Z level=debug msg="Successfully started backend plugin process"
logger=plugin.prometheus t=2024-08-29T15:36:56.647815949Z level=debug msg="Successfully started backend plugin process"
logger=plugin.grafana-pyroscope-datasource t=2024-08-29T15:36:56.647822722Z level=debug msg="Successfully started backend plugin process"
logger=plugin.elasticsearch t=2024-08-29T15:36:56.647830769Z level=debug msg="Successfully started backend plugin process"
logger=plugin.loki t=2024-08-29T15:36:56.647837289Z level=debug msg="Successfully started backend plugin process"
logger=plugin.grafana-azure-monitor-datasource t=2024-08-29T15:36:56.647844029Z level=debug msg="Successfully started backend plugin process"
logger=plugin.mssql t=2024-08-29T15:36:56.647855468Z level=debug msg="Successfully started backend plugin process"
logger=plugin.mysql t=2024-08-29T15:36:56.648341296Z level=debug msg="Successfully started backend plugin process"
logger=plugin.graphite t=2024-08-29T15:36:56.648356167Z level=debug msg="Successfully started backend plugin process"
logger=plugins.registration t=2024-08-29T15:36:56.648367317Z level=error msg="Could not register plugin" pluginId=xychart error="plugin xychart is already registered"
logger=plugins.initialization t=2024-08-29T15:36:56.648377313Z level=error msg="Could not initialize plugin" pluginId=xychart error="plugin xychart is already registered"
logger=plugin.grafana-testdata-datasource t=2024-08-29T15:36:56.648392009Z level=debug msg="Successfully started backend plugin process"
logger=plugin.grafana t=2024-08-29T15:36:56.648400328Z level=debug msg="Successfully started backend plugin process"
logger=plugin.cloudwatch t=2024-08-29T15:36:56.64840714Z level=debug msg="Successfully started backend plugin process"
logger=plugin.loader source=core t=2024-08-29T15:36:56.648434218Z level=debug msg="Plugin source loaded" plugins="alertlist, alertmanager, annolist, barchart, bargauge, candlestick, canvas, cloudwatch, dashboard, dashlist, datagrid, debug, elasticsearch, flamegraph, gauge, geomap, gettingstarted, grafana, grafana-azure-monitor-datasource, grafana-postgresql-datasource, grafana-pyroscope-datasource, grafana-testdata-datasource, graph, graphite, heatmap, histogram, influxdb, jaeger, live, logs, loki, mixed, mssql, mysql, news, nodeGraph, opentsdb, parca, piechart, prometheus, stackdriver, stat, state-timeline, status-history, table, table-old, tempo, text, timeseries, traces, trend, welcome, xychart, zipkin" duration=67.969414ms
logger=plugin.loader source=bundled t=2024-08-29T15:36:56.648452977Z level=debug msg="Loading plugin source..."
logger=plugin.loader source=bundled t=2024-08-29T15:36:56.649342662Z level=debug msg="Plugin source loaded, though no plugins were found"
logger=plugin.store t=2024-08-29T15:36:56.649366069Z level=info msg="Plugins loaded" count=54 duration=69.025272ms
logger=accesscontrol t=2024-08-29T15:36:56.649544002Z level=debug msg="Adding scope attribute resolver" prefix=dashboards:id:
logger=accesscontrol t=2024-08-29T15:36:56.649563468Z level=debug msg="Adding scope attribute resolver" prefix=dashboards:uid:
logger=ssosettings.service t=2024-08-29T15:36:56.65126441Z level=debug msg="No SSO Settings found in the database, using system settings"
logger=ssosettings.service t=2024-08-29T15:36:56.651295123Z level=debug msg="No SSO Settings found in the database, using system settings"
logger=ssosettings.service t=2024-08-29T15:36:56.651304974Z level=debug msg="No SSO Settings found in the database, using system settings"
logger=ssosettings.service t=2024-08-29T15:36:56.651314597Z level=debug msg="No SSO Settings found in the database, using system settings"
logger=ssosettings.service t=2024-08-29T15:36:56.651323068Z level=debug msg="No SSO Settings found in the database, using system settings"
logger=ssosettings.service t=2024-08-29T15:36:56.651340161Z level=debug msg="No SSO Settings found in the database, using system settings"
logger=ssosettings.service t=2024-08-29T15:36:56.651349502Z level=debug msg="No SSO Settings found in the database, using system settings"
logger=secrets.kvstore t=2024-08-29T15:36:56.653693235Z level=debug msg="secrets manager evaluator returned false" reason="remote secret management plugin disabled because the property `secrets.use_plugin` is not set to `true`"
logger=secrets.kvstore t=2024-08-29T15:36:56.653785796Z level=debug msg="secrets kvstore is using the default (SQL) implementation for secrets management"
logger=accesscontrol t=2024-08-29T15:36:56.653810658Z level=debug msg="Adding scope attribute resolver" prefix=datasources:name:
logger=accesscontrol t=2024-08-29T15:36:56.653819867Z level=debug msg="Adding scope attribute resolver" prefix=datasources:id:
logger=query_data t=2024-08-29T15:36:56.657854669Z level=info msg="Query Service initialization"
logger=annotations t=2024-08-29T15:36:56.657963392Z level=debug msg="Initializing annotations service"
logger=annotations t=2024-08-29T15:36:56.657984031Z level=debug msg="Using xorm read store"
logger=live t=2024-08-29T15:36:56.657994268Z level=debug msg="GrafanaLive initialization" ha=false
logger=live.push_http t=2024-08-29T15:36:56.662649903Z level=info msg="Live Push Gateway initialization"
logger=ngalert.multiorg.alertmanager t=2024-08-29T15:36:56.663269881Z level=debug msg="Synchronizing Alertmanagers for orgs"
logger=infra.kvstore.sql t=2024-08-29T15:36:56.664376762Z level=debug msg="kvstore value not found" orgId=1 namespace=alertmanager key=notifications
logger=infra.kvstore.sql t=2024-08-29T15:36:56.664677682Z level=debug msg="kvstore value not found" orgId=1 namespace=alertmanager key=silences
logger=ngalert.notifier.alertmanager org=1 t=2024-08-29T15:36:56.66948713Z level=info msg="Applying new configuration to Alertmanager" configHash=d2c56faca6af2a5772ff4253222f7386
logger=ngalert.multiorg.alertmanager t=2024-08-29T15:36:56.685293235Z level=debug msg="Done synchronizing Alertmanagers for orgs"
logger=ngalert.sender.router t=2024-08-29T15:36:56.685504173Z level=debug msg="Attempting to sync admin configs" count=0
logger=ngalert.sender.router t=2024-08-29T15:36:56.685523572Z level=debug msg="Finish of admin configuration sync"
logger=ngalert.state.manager t=2024-08-29T15:36:56.685638034Z level=info msg="Running in alternative execution of Error/NoData mode"
logger=accesscontrol t=2024-08-29T15:36:56.686898951Z level=debug msg="Adding scope attribute resolver" prefix=library.panels:uid:
logger=accesscontrol t=2024-08-29T15:36:56.689649917Z level=debug msg="Adding scope attribute resolver" prefix=annotations:id:
logger=plugindashboards t=2024-08-29T15:36:56.690544991Z level=debug msg="Looking for app dashboard updates"
logger=infra.usagestats.collector t=2024-08-29T15:36:56.69131758Z level=info msg="registering usage stat providers" usageStatsProvidersLen=2
logger=provisioning.datasources t=2024-08-29T15:36:56.694291595Z level=info msg="inserting datasource from configuration" name=Prometheus uid=bdv7jfa1eavi8b
logger=sqlstore.session t=2024-08-29T15:36:56.695293143Z level=debug msg="reusing existing session" transaction=true
logger=sqlstore.session t=2024-08-29T15:36:56.697130763Z level=debug msg="reusing existing session" transaction=true
logger=sqlstore.session t=2024-08-29T15:36:56.710178044Z level=debug msg="reusing existing session" transaction=true
logger=sqlstore.transactions t=2024-08-29T15:36:56.710945884Z level=debug msg="skip committing the transaction because it belongs to a session created in the outer scope"
logger=sqlstore.session t=2024-08-29T15:36:56.722139593Z level=debug msg="reusing existing session" transaction=true
logger=secrets.kvstore t=2024-08-29T15:36:56.723594843Z level=debug msg="secret value inserted" orgId=1 type=datasource namespace=Prometheus
logger=sqlstore.transactions t=2024-08-29T15:36:56.72451194Z level=debug msg="skip committing the transaction because it belongs to a session created in the outer scope"
logger=sqlstore.transactions t=2024-08-29T15:36:56.724548495Z level=debug msg="skip committing the transaction because it belongs to a session created in the outer scope"
logger=sqlstore.session t=2024-08-29T15:36:56.72456161Z level=debug msg="reusing existing session" transaction=true
logger=sqlstore.transactions t=2024-08-29T15:36:56.730679914Z level=debug msg="skip committing the transaction because it belongs to a session created in the outer scope"
logger=provisioning.plugins t=2024-08-29T15:36:56.745267742Z level=debug msg="Looking for plugin provisioning files" path=/etc/grafana/provisioning/plugins
logger=provisioning.plugins t=2024-08-29T15:36:56.746042575Z level=debug msg="Parsing plugin provisioning file" path=/etc/grafana/provisioning/plugins file.Name=sample.yaml
logger=provisioning.plugins t=2024-08-29T15:36:56.746686189Z level=debug msg="Validating plugins"
logger=provisioning.alerting t=2024-08-29T15:36:56.746975422Z level=debug msg="looking for alerting provisioning files" path=/etc/grafana/provisioning/alerting
logger=provisioning.alerting t=2024-08-29T15:36:56.747025753Z level=debug msg="parsing alerting provisioning file" path=/etc/grafana/provisioning/alerting file.Name=sample.yaml
logger=provisioning.alerting t=2024-08-29T15:36:56.747994011Z level=info msg="starting to provision alerting"
logger=provisioning.alerting t=2024-08-29T15:36:56.748322564Z level=debug msg="read all alerting files" file_count=1
logger=provisioning.alerting t=2024-08-29T15:36:56.748337975Z level=info msg="finished to provision alerting"
logger=server t=2024-08-29T15:36:56.749030584Z level=debug msg="NOTIFY_SOCKET environment variable empty or unset, can't send systemd notification"
logger=server t=2024-08-29T15:36:56.74905002Z level=debug msg="Waiting on services..."
logger=server t=2024-08-29T15:36:56.749060996Z level=debug msg="Starting background service" service=*pluginexternal.Service
logger=server t=2024-08-29T15:36:56.749149069Z level=debug msg="Starting background service" service=*tracing.TracingService
logger=server t=2024-08-29T15:36:56.749267413Z level=debug msg="Starting background service" service=*loginattemptimpl.Service
logger=server t=2024-08-29T15:36:56.749305895Z level=debug msg="Starting background service" service=*remotecache.RemoteCache
logger=server t=2024-08-29T15:36:56.749321162Z level=debug msg="Starting background service" service=*manager.SecretsService
logger=server t=2024-08-29T15:36:56.749421959Z level=debug msg="Starting background service" service=*store.standardStorageService
logger=grafanaStorageLogger t=2024-08-29T15:36:56.749437239Z level=info msg="Storage starting"
logger=server t=2024-08-29T15:36:56.749445212Z level=debug msg="Stopped background service" service=*store.standardStorageService reason=null
logger=server t=2024-08-29T15:36:56.749453509Z level=debug msg="Starting background service" service=*store.dummyEntityEventsService
logger=server t=2024-08-29T15:36:56.749462491Z level=debug msg="Stopped background service" service=*store.dummyEntityEventsService reason=null
logger=server t=2024-08-29T15:36:56.74946883Z level=debug msg="Starting background service" service=*manager.ServiceAccountsService
logger=serviceaccounts.background t=2024-08-29T15:36:56.749477308Z level=debug msg="Service initialized"
logger=server t=2024-08-29T15:36:56.749987346Z level=debug msg="Stopped background service" service=*pluginexternal.Service reason=null
logger=server t=2024-08-29T15:36:56.750118361Z level=debug msg="Starting background service" service=*api.HTTPServer
logger=server t=2024-08-29T15:36:56.750132293Z level=debug msg="Starting background service" service=*ngalert.AlertNG
logger=ngalert t=2024-08-29T15:36:56.75122556Z level=debug msg=Starting execute_alerts=true
logger=ngalert.state.manager t=2024-08-29T15:36:56.751243309Z level=info msg="Warming state cache for startup"
logger=server t=2024-08-29T15:36:56.750149516Z level=debug msg="Starting background service" service=*live.GrafanaLive
logger=server t=2024-08-29T15:36:56.750141658Z level=debug msg="Starting background service" service=*cleanup.CleanUpService
logger=cleanup t=2024-08-29T15:36:56.752203249Z level=debug msg="Found old rendered file to delete" folder=/usr/share/grafana/data/png deleted=0 kept=0
logger=ngalert.state.manager t=2024-08-29T15:36:56.752523123Z level=info msg="State cache has been initialized" states=0 duration=1.278643ms
logger=ngalert.state.manager.persist t=2024-08-29T15:36:56.752623727Z level=debug msg="Async: No-Op"
logger=server t=2024-08-29T15:36:56.750185427Z level=debug msg="Starting background service" service=*updatechecker.GrafanaService
logger=grafana.update.checker t=2024-08-29T15:36:56.752652614Z level=debug msg="Checking for updates"
logger=cleanup t=2024-08-29T15:36:56.752995184Z level=debug msg="Found old rendered file to delete" folder=/usr/share/grafana/data/csv deleted=0 kept=0
logger=cleanup t=2024-08-29T15:36:56.753111505Z level=debug msg="Found old rendered file to delete" folder=/usr/share/grafana/data/pdf deleted=0 kept=0
logger=server t=2024-08-29T15:36:56.75020731Z level=debug msg="Starting background service" service=*statscollector.Service
logger=infra.usagestats.collector t=2024-08-29T15:36:56.753133722Z level=debug msg="usage stats collector started" sendInterval=30m0s nextSendInterval=1m25s
logger=server t=2024-08-29T15:36:56.750260438Z level=debug msg="Starting background service" service=*supportbundlesimpl.Service
logger=http.server t=2024-08-29T15:36:56.754318438Z level=info msg="HTTP Server Listen" address=[::]:3000 protocol=http subUrl=/grafana socket=
logger=server t=2024-08-29T15:36:56.750168014Z level=debug msg="Starting background service" service=*rendering.RenderingService
logger=server t=2024-08-29T15:36:56.750277771Z level=debug msg="Starting background service" service=*pluginstore.Service
logger=server t=2024-08-29T15:36:56.750283871Z level=debug msg="Starting background service" service=*anonimpl.AnonDeviceService
logger=server t=2024-08-29T15:36:56.750288992Z level=debug msg="Starting background service" service=*apiserver.service
logger=server t=2024-08-29T15:36:56.750294101Z level=debug msg="Starting background service" service=*migrations.SecretMigrationProviderImpl
logger=infra.lockservice t=2024-08-29T15:36:56.754487649Z level=debug msg="Start LockExecuteAndRelease" actionName="secret migration task "
logger=server t=2024-08-29T15:36:56.750271715Z level=debug msg="Starting background service" service=*dynamic.KeyRetriever
logger=server t=2024-08-29T15:36:56.750154993Z level=debug msg="Starting background service" service=*pushhttp.Gateway
logger=server t=2024-08-29T15:36:56.750180406Z level=debug msg="Starting background service" service=*provisioning.ProvisioningServiceImpl
logger=server t=2024-08-29T15:36:56.75026625Z level=debug msg="Starting background service" service=*metric.Service
logger=ngalert.scheduler t=2024-08-29T15:36:56.75436925Z level=info msg="Starting scheduler" tickInterval=10s maxAttempts=1
logger=ticker t=2024-08-29T15:36:56.7576399Z level=info msg=starting first_tick=2024-08-29T15:37:00Z
logger=renderer.manager t=2024-08-29T15:36:56.757686418Z level=error msg="Failed to get renderer plugin sources" error="failed to open plugins path"
logger=rendering t=2024-08-29T15:36:56.757698737Z level=debug msg="No image renderer found/installed. For image rendering support please install the grafana-image-renderer plugin. Read more at https://grafana.com/docs/grafana/latest/administration/image_rendering/"
logger=server t=2024-08-29T15:36:56.750191347Z level=debug msg="Starting background service" service=*updatechecker.PluginsService
logger=plugins.update.checker t=2024-08-29T15:36:56.763996185Z level=debug msg="Preparing plugins eligible for version check"
logger=server t=2024-08-29T15:36:56.750160113Z level=debug msg="Starting background service" service=*notifications.NotificationService
logger=server t=2024-08-29T15:36:56.750299307Z level=debug msg="Starting background service" service=*ssosettingsimpl.Service
logger=ngalert.multiorg.alertmanager t=2024-08-29T15:36:56.75433723Z level=info msg="Starting MultiOrg Alertmanager"
logger=plugins.update.checker t=2024-08-29T15:36:56.765807369Z level=debug msg="Checking for plugin updates" url="https://grafana.com/api/plugins/versioncheck?grafanaVersion=11.2.0&slugIn="
logger=server t=2024-08-29T15:36:56.750174979Z level=debug msg="Starting background service" service=*authimpl.UserAuthTokenService
logger=infra.lockservice t=2024-08-29T15:36:56.765981354Z level=debug msg="Start LockAndExecute" actionName="cleanup expired auth tokens"
logger=server t=2024-08-29T15:36:56.750202048Z level=debug msg="Starting background service" service=*service.UsageStats
logger=server t=2024-08-29T15:36:56.750197104Z level=debug msg="Starting background service" service=*metrics.InternalMetricsService
logger=server t=2024-08-29T15:36:56.750256278Z level=debug msg="Starting background service" service=*angulardetectorsprovider.Dynamic
logger=plugin.angulardetectorsprovider.dynamic t=2024-08-29T15:36:56.774567528Z level=debug msg="Started background service"
logger=sqlstore.transactions t=2024-08-29T15:36:56.77733249Z level=info msg="Database locked, sleeping then retrying" error="database is locked" retry=0 code="database is locked"
logger=infra.lockservice t=2024-08-29T15:36:56.838353141Z level=debug msg="Start execution" actionName="cleanup expired auth tokens"
logger=auth t=2024-08-29T15:36:56.838471094Z level=debug msg="Starting cleanup of expired auth tokens" createdBefore=2024-07-30T15:36:56.838467239Z rotatedBefore=2024-08-22T15:36:56.838467425Z
logger=infra.kvstore.sql t=2024-08-29T15:36:56.839520109Z level=debug msg="kvstore value not found" orgId=0 namespace=infra.usagestats key=last_sent
logger=auth t=2024-08-29T15:36:56.840407382Z level=debug msg="Cleanup of expired auth tokens done" count=0
logger=infra.lockservice t=2024-08-29T15:36:56.840630369Z level=debug msg="Execution finished" actionName="cleanup expired auth tokens" duration=2.281897ms
logger=infra.lockservice t=2024-08-29T15:36:56.840643965Z level=debug msg="LockAndExecute finished" actionName="cleanup expired auth tokens" acquiredLock=true duration=74.665583ms
logger=infra.kvstore.sql t=2024-08-29T15:36:56.847586548Z level=debug msg="kvstore value not found" orgId=0 namespace=plugin.publickeys key=last_updated
logger=infra.kvstore.sql t=2024-08-29T15:36:56.87266328Z level=debug msg="kvstore value not found" orgId=0 namespace=plugin.angularpatterns key=last_updated
logger=plugin.angulardetectorsprovider.dynamic t=2024-08-29T15:36:56.875544956Z level=debug msg="Applied background job skew" skew=29h30m44.463483651s interval=29h30m44.463483651s
logger=plugin.angulardetectorsprovider.dynamic t=2024-08-29T15:36:56.87565264Z level=debug msg="Updating patterns"
logger=infra.kvstore.sql t=2024-08-29T15:36:56.878590596Z level=debug msg="kvstore value not found" orgId=0 namespace=plugin.angularpatterns key=etag
logger=grafana.update.checker t=2024-08-29T15:36:56.883525122Z level=info msg="Update check succeeded" duration=130.87341ms
logger=plugin.angulardetectorsprovider.dynamic t=2024-08-29T15:36:56.884383527Z level=debug msg="Fetching dynamic angular detection patterns" url=https://grafana.com/api/plugins/angular_patterns
logger=plugins.update.checker t=2024-08-29T15:36:56.927296971Z level=info msg="Update check succeeded" duration=163.535192ms
logger=infra.lockservice t=2024-08-29T15:36:56.960905601Z level=debug msg="Start execution" actionName="secret migration task "
logger=secret.migration t=2024-08-29T15:36:56.961103097Z level=debug msg="Starting secret migration service" service=*migrations.DataSourceSecretMigrationService
logger=infra.kvstore.sql t=2024-08-29T15:36:56.961513675Z level=debug msg="kvstore value not found" orgId=0 namespace=datasource key=secretMigrationStatus
logger=secret.migration t=2024-08-29T15:36:56.961541483Z level=debug msg="secret migration status is "
logger=secret.migration t=2024-08-29T15:36:56.961550688Z level=debug msg="performing secret migration" needsmigration=false needscompatibility=true
logger=secrets.kvstore t=2024-08-29T15:36:56.962170187Z level=debug msg="got secret value from cache" orgId=1 type=datasource namespace=Prometheus
logger=sqlstore.session t=2024-08-29T15:36:56.96223545Z level=debug msg="reusing existing session" transaction=true
logger=secrets.kvstore t=2024-08-29T15:36:56.962692305Z level=debug msg="got secret value from cache" orgId=1 type=datasource namespace=Prometheus
logger=sqlstore.session t=2024-08-29T15:36:56.962715334Z level=debug msg="reusing existing session" transaction=true
logger=sqlstore.session t=2024-08-29T15:36:56.967416184Z level=debug msg="reusing existing session" transaction=true
logger=provisioning.dashboard t=2024-08-29T15:36:56.975536142Z level=info msg="starting to provision dashboards"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:56.97617752Z level=debug msg="Start walking disk" path=/var/lib/grafana/dashboards
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:56.992729254Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/portainer-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:56.995886109Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:56.996487125Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:56.99659227Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=infra.kvstore.sql t=2024-08-29T15:36:56.994870229Z level=debug msg="error inserting kvstore value" orgId=0 namespace=plugin.publickeys key=key-7e4d0c6a708866e7 value="-----BEGIN PGP PUBLIC KEY BLOCK-----\r\nVersion: OpenPGP.js v4.10.1\r\nComment: https://openpgpjs.org\r\n\r\nxpMEXpTXXxMFK4EEACMEIwQBiOUQhvGbDLvndE0fEXaR0908wXzPGFpf0P0Z\r\nHJ06tsq+0higIYHp7WTNJVEZtcwoYLcPRGaa9OQqbUU63BEyZdgAkPTz3RFd\r\n5+TkDWZizDcaVFhzbDd500yTwexrpIrdInwC/jrgs7Zy/15h8KA59XXUkdmT\r\nYB6TR+OA9RKME+dCJozNGUdyYWZhbmEgPGVuZ0BncmFmYW5hLmNvbT7CvAQQ\r\nEwoAIAUCXpTXXwYLCQcIAwIEFQgKAgQWAgEAAhkBAhsDAh4BAAoJEH5NDGpw\r\niGbnaWoCCQGQ3SQnCkRWrG6XrMkXOKfDTX2ow9fuoErN46BeKmLM4f1EkDZQ\r\nTpq3SE8+My8B5BIH3SOcBeKzi3S57JHGBdFA+wIJAYWMrJNIvw8GeXne+oUo\r\nNzzACdvfqXAZEp/HFMQhCKfEoWGJE8d2YmwY2+3GufVRTI5lQnZOHLE8L/Vc\r\n1S5MXESjzpcEXpTXXxIFK4EEACMEIwQBtHX/SD5Qm3v4V92qpaIZQgtTX0sT\r\ncFPjYWAHqsQ1iENrYN/vg1wU3ADlYATvydOQYvkTyT/tbDvx2Fse8PL84MQA\r\nYKKQ6AJ3gLVvmeouZdU03YoV4MYaT8KbnJUkZQZkqdz2riOlySNI9CG3oYmv\r\nomjUAtzgAgnCcurfGLZkkMxlmY8DAQoJwqQEGBMKAAkFAl6U118CGwwACgkQ\r\nfk0ManCIZuc0jAIJAVw2xdLr4ZQqPUhubrUyFcqlWoW8dQoQagwO8s8ubmby\r\nKuLA9FWJkfuuRQr+O9gHkDVCez3aism7zmJBqIOi38aNAgjJ3bo6leSS2jR/\r\nx5NqiKVi83tiXDPncDQYPymOnMhW0l7CVA7wj75HrFvvlRI/4MArlbsZ2tBn\r\nN1c5v9v/4h6qeA==\r\n=DNbR\r\n-----END PGP PUBLIC KEY BLOCK-----\r\n" err="database is locked"
logger=sqlstore.transactions t=2024-08-29T15:36:57.010078261Z level=info msg="Database locked, sleeping then retrying" error="database is locked" retry=0 code="database is locked"
logger=infra.kvstore.sql t=2024-08-29T15:36:57.011194091Z level=debug msg="error inserting kvstore value" orgId=0 namespace=plugin.publickeys key=key-7e4d0c6a708866e7 value="-----BEGIN PGP PUBLIC KEY BLOCK-----\r\nVersion: OpenPGP.js v4.10.1\r\nComment: https://openpgpjs.org\r\n\r\nxpMEXpTXXxMFK4EEACMEIwQBiOUQhvGbDLvndE0fEXaR0908wXzPGFpf0P0Z\r\nHJ06tsq+0higIYHp7WTNJVEZtcwoYLcPRGaa9OQqbUU63BEyZdgAkPTz3RFd\r\n5+TkDWZizDcaVFhzbDd500yTwexrpIrdInwC/jrgs7Zy/15h8KA59XXUkdmT\r\nYB6TR+OA9RKME+dCJozNGUdyYWZhbmEgPGVuZ0BncmFmYW5hLmNvbT7CvAQQ\r\nEwoAIAUCXpTXXwYLCQcIAwIEFQgKAgQWAgEAAhkBAhsDAh4BAAoJEH5NDGpw\r\niGbnaWoCCQGQ3SQnCkRWrG6XrMkXOKfDTX2ow9fuoErN46BeKmLM4f1EkDZQ\r\nTpq3SE8+My8B5BIH3SOcBeKzi3S57JHGBdFA+wIJAYWMrJNIvw8GeXne+oUo\r\nNzzACdvfqXAZEp/HFMQhCKfEoWGJE8d2YmwY2+3GufVRTI5lQnZOHLE8L/Vc\r\n1S5MXESjzpcEXpTXXxIFK4EEACMEIwQBtHX/SD5Qm3v4V92qpaIZQgtTX0sT\r\ncFPjYWAHqsQ1iENrYN/vg1wU3ADlYATvydOQYvkTyT/tbDvx2Fse8PL84MQA\r\nYKKQ6AJ3gLVvmeouZdU03YoV4MYaT8KbnJUkZQZkqdz2riOlySNI9CG3oYmv\r\nomjUAtzgAgnCcurfGLZkkMxlmY8DAQoJwqQEGBMKAAkFAl6U118CGwwACgkQ\r\nfk0ManCIZuc0jAIJAVw2xdLr4ZQqPUhubrUyFcqlWoW8dQoQagwO8s8ubmby\r\nKuLA9FWJkfuuRQr+O9gHkDVCez3aism7zmJBqIOi38aNAgjJ3bo6leSS2jR/\r\nx5NqiKVi83tiXDPncDQYPymOnMhW0l7CVA7wj75HrFvvlRI/4MArlbsZ2tBn\r\nN1c5v9v/4h6qeA==\r\n=DNbR\r\n-----END PGP PUBLIC KEY BLOCK-----\r\n" err="database is locked"
logger=sqlstore.session t=2024-08-29T15:36:57.01418212Z level=debug msg="reusing existing session" transaction=true
logger=secrets.kvstore t=2024-08-29T15:36:57.015392977Z level=debug msg="secret value updated" orgId=1 type=datasource namespace=Prometheus
logger=sqlstore.transactions t=2024-08-29T15:36:57.015624291Z level=debug msg="skip committing the transaction because it belongs to a session created in the outer scope"
logger=sqlstore.transactions t=2024-08-29T15:36:57.015662096Z level=debug msg="skip committing the transaction because it belongs to a session created in the outer scope"
logger=sqlstore.transactions t=2024-08-29T15:36:57.0223318Z level=info msg="Database locked, sleeping then retrying" error="database is locked" retry=1 code="database is locked"
logger=plugin.angulardetectorsprovider.dynamic t=2024-08-29T15:36:57.022773287Z level=debug msg="Fetched dynamic angular detection patterns" patterns=6 duration=138.396325ms
logger=infra.kvstore.sql t=2024-08-29T15:36:57.032137345Z level=debug msg="kvstore value inserted" orgId=0 namespace=datasource key=secretMigrationStatus value=compatible
logger=secret.migration t=2024-08-29T15:36:57.048121626Z level=debug msg="set secret migration status to compatible"
logger=secret.migration t=2024-08-29T15:36:57.048310337Z level=debug msg="Finished secret migration service" service=*migrations.DataSourceSecretMigrationService
logger=secret.migration t=2024-08-29T15:36:57.048339895Z level=debug msg="Starting secret migration service" service=*migrations.MigrateToPluginService
logger=secret.migration t=2024-08-29T15:36:57.048400808Z level=debug msg="Finished secret migration service" service=*migrations.MigrateToPluginService
logger=infra.lockservice t=2024-08-29T15:36:57.04842303Z level=debug msg="Execution finished" actionName="secret migration task " duration=87.529314ms
logger=infra.kvstore.sql t=2024-08-29T15:36:57.050313845Z level=debug msg="error inserting kvstore value" orgId=0 namespace=plugin.angularpatterns key=angular_patterns value="[{\"Name\":\"PanelCtrl\",\"Pattern\":\"PanelCtrl\",\"Type\":\"contains\"},{\"Name\":\"ConfigCtrl\",\"Pattern\":\"ConfigCtrl\",\"Type\":\"contains\"},{\"Name\":\"app/plugins/sdk\",\"Pattern\":\"app/plugins/sdk\",\"Type\":\"contains\"},{\"Name\":\"Angular Specific Function\",\"Pattern\":\"angular.isNumber(\",\"Type\":\"contains\"},{\"Name\":\"ctrl.annotation\",\"Pattern\":\"ctrl.annotation\",\"Type\":\"contains\"},{\"Name\":\"QueryCtrl\",\"Pattern\":\"[\\\"']QueryCtrl[\\\"']\",\"Type\":\"regex\"}]" err="database is locked"
logger=infra.lockservice t=2024-08-29T15:36:57.059234322Z level=debug msg="LockExecuteAndRelease finished" actionName="secret migration task " duration=304.747149ms
logger=server t=2024-08-29T15:36:57.059782992Z level=debug msg="Stopped background service" service=*migrations.SecretMigrationProviderImpl reason=null
logger=infra.kvstore.sql t=2024-08-29T15:36:57.059741182Z level=debug msg="kvstore value inserted" orgId=0 namespace=plugin.publickeys key=key-7e4d0c6a708866e7 value="-----BEGIN PGP PUBLIC KEY BLOCK-----\r\nVersion: OpenPGP.js v4.10.1\r\nComment: https://openpgpjs.org\r\n\r\nxpMEXpTXXxMFK4EEACMEIwQBiOUQhvGbDLvndE0fEXaR0908wXzPGFpf0P0Z\r\nHJ06tsq+0higIYHp7WTNJVEZtcwoYLcPRGaa9OQqbUU63BEyZdgAkPTz3RFd\r\n5+TkDWZizDcaVFhzbDd500yTwexrpIrdInwC/jrgs7Zy/15h8KA59XXUkdmT\r\nYB6TR+OA9RKME+dCJozNGUdyYWZhbmEgPGVuZ0BncmFmYW5hLmNvbT7CvAQQ\r\nEwoAIAUCXpTXXwYLCQcIAwIEFQgKAgQWAgEAAhkBAhsDAh4BAAoJEH5NDGpw\r\niGbnaWoCCQGQ3SQnCkRWrG6XrMkXOKfDTX2ow9fuoErN46BeKmLM4f1EkDZQ\r\nTpq3SE8+My8B5BIH3SOcBeKzi3S57JHGBdFA+wIJAYWMrJNIvw8GeXne+oUo\r\nNzzACdvfqXAZEp/HFMQhCKfEoWGJE8d2YmwY2+3GufVRTI5lQnZOHLE8L/Vc\r\n1S5MXESjzpcEXpTXXxIFK4EEACMEIwQBtHX/SD5Qm3v4V92qpaIZQgtTX0sT\r\ncFPjYWAHqsQ1iENrYN/vg1wU3ADlYATvydOQYvkTyT/tbDvx2Fse8PL84MQA\r\nYKKQ6AJ3gLVvmeouZdU03YoV4MYaT8KbnJUkZQZkqdz2riOlySNI9CG3oYmv\r\nomjUAtzgAgnCcurfGLZkkMxlmY8DAQoJwqQEGBMKAAkFAl6U118CGwwACgkQ\r\nfk0ManCIZuc0jAIJAVw2xdLr4ZQqPUhubrUyFcqlWoW8dQoQagwO8s8ubmby\r\nKuLA9FWJkfuuRQr+O9gHkDVCez3aism7zmJBqIOi38aNAgjJ3bo6leSS2jR/\r\nx5NqiKVi83tiXDPncDQYPymOnMhW0l7CVA7wj75HrFvvlRI/4MArlbsZ2tBn\r\nN1c5v9v/4h6qeA==\r\n=DNbR\r\n-----END PGP PUBLIC KEY BLOCK-----\r\n"
logger=sqlstore.transactions t=2024-08-29T15:36:57.061639565Z level=info msg="Database locked, sleeping then retrying" error="database is locked" retry=0 code="database is locked"
logger=infra.kvstore.sql t=2024-08-29T15:36:57.075057303Z level=debug msg="kvstore value inserted" orgId=0 namespace=plugin.publickeys key=last_updated value=2024-08-29T15:36:57Z
logger=infra.kvstore.sql t=2024-08-29T15:36:57.085359291Z level=debug msg="got kvstore value" orgId=0 namespace=plugin.publickeys key=last_updated value=2024-08-29T15:36:57Z
logger=sqlstore t=2024-08-29T15:36:57.109169629Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=infra.kvstore.sql t=2024-08-29T15:36:57.119892194Z level=debug msg="error inserting kvstore value" orgId=0 namespace=plugin.angularpatterns key=angular_patterns value="[{\"Name\":\"PanelCtrl\",\"Pattern\":\"PanelCtrl\",\"Type\":\"contains\"},{\"Name\":\"ConfigCtrl\",\"Pattern\":\"ConfigCtrl\",\"Type\":\"contains\"},{\"Name\":\"app/plugins/sdk\",\"Pattern\":\"app/plugins/sdk\",\"Type\":\"contains\"},{\"Name\":\"Angular Specific Function\",\"Pattern\":\"angular.isNumber(\",\"Type\":\"contains\"},{\"Name\":\"ctrl.annotation\",\"Pattern\":\"ctrl.annotation\",\"Type\":\"contains\"},{\"Name\":\"QueryCtrl\",\"Pattern\":\"[\\\"']QueryCtrl[\\\"']\",\"Type\":\"regex\"}]" err="database is locked"
logger=sqlstore.transactions t=2024-08-29T15:36:57.132260219Z level=info msg="Database locked, sleeping then retrying" error="database is locked" retry=1 code="database is locked"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.139836602Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/ftp-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.141496388Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.143491469Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.143513463Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=infra.kvstore.sql t=2024-08-29T15:36:57.146245443Z level=debug msg="kvstore value inserted" orgId=0 namespace=plugin.angularpatterns key=angular_patterns value="[{\"Name\":\"PanelCtrl\",\"Pattern\":\"PanelCtrl\",\"Type\":\"contains\"},{\"Name\":\"ConfigCtrl\",\"Pattern\":\"ConfigCtrl\",\"Type\":\"contains\"},{\"Name\":\"app/plugins/sdk\",\"Pattern\":\"app/plugins/sdk\",\"Type\":\"contains\"},{\"Name\":\"Angular Specific Function\",\"Pattern\":\"angular.isNumber(\",\"Type\":\"contains\"},{\"Name\":\"ctrl.annotation\",\"Pattern\":\"ctrl.annotation\",\"Type\":\"contains\"},{\"Name\":\"QueryCtrl\",\"Pattern\":\"[\\\"']QueryCtrl[\\\"']\",\"Type\":\"regex\"}]"
logger=infra.kvstore.sql t=2024-08-29T15:36:57.160012807Z level=debug msg="kvstore value inserted" orgId=0 namespace=plugin.angularpatterns key=last_updated value=2024-08-29T15:36:57Z
logger=infra.kvstore.sql t=2024-08-29T15:36:57.170633202Z level=debug msg="kvstore value inserted" orgId=0 namespace=plugin.angularpatterns key=etag value="\"1a8-1yOry0c74BKAzc7BUbZdNV0sYic\""
logger=infra.kvstore.sql t=2024-08-29T15:36:57.184165111Z level=debug msg="kvstore value not changed" orgId=0 namespace=plugin.angularpatterns key=last_updated value=2024-08-29T15:36:57Z
logger=plugin.angulardetectorsprovider.dynamic t=2024-08-29T15:36:57.185241276Z level=info msg="Patterns update finished" duration=309.586157ms
logger=sqlstore t=2024-08-29T15:36:57.223258734Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.249695487Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/mariadb-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.251782125Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.251901561Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.251918015Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.268178094Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.289790836Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/monitorix-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.291514975Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.291818825Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.29215544Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.305502983Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.324975015Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/nginx-exporter-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.326173675Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.326353109Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.326368545Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.348750565Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.373846737Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/cadvisor-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.376502475Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.376704315Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.376720135Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.39944529Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.421892904Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/nginx-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.423735597Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.42420353Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.424331945Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.450079062Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.483825965Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/static-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.487128338Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.487255416Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.487271461Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.537443123Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.564544172Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/wordpress-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.565776712Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.565894806Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.566109483Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.582205541Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.603919Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/grafana-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.606070902Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.606535657Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.606555585Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.622047439Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.651816269Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/nginx-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.653789197Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.654140863Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.654159196Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.673883441Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=grafana-apiserver t=2024-08-29T15:36:57.699301744Z level=info msg="Adding GroupVersion playlist.grafana.app v0alpha1 to ResourceManager"
logger=grafana-apiserver t=2024-08-29T15:36:57.708779927Z level=info msg="Adding GroupVersion featuretoggle.grafana.app v0alpha1 to ResourceManager"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.712381705Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/prometheus-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.713490305Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.713524933Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.713547078Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.749584944Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.770839103Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/adminer-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.772972709Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.773023502Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.773038246Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.789768598Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.813371743Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/all-containers-stats.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.815280647Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.815328805Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.815360233Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.835379854Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:36:57.859143594Z level=debug msg="saving new dashboard" provisioner=default file=/var/lib/grafana/dashboards/redis-stats-dash.json folderId=0 folderUid=
logger=accesscontrol t=2024-08-29T15:36:57.860123757Z level=debug msg="Evaluating permissions" id=:0 orgID=1 permissions="action:dashboards:create scopes:folders:uid:general"
logger=accesscontrol.evaluator t=2024-08-29T15:36:57.860165272Z level=debug msg="Matched scope" userscope=folders:* targetscope=folders:uid:general
logger=dashboard-service t=2024-08-29T15:36:57.860180465Z level=debug msg="User does not belong to a user or service account namespace, using 0 as user ID" id=:0
logger=sqlstore t=2024-08-29T15:36:57.877861315Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=provisioning.dashboard t=2024-08-29T15:36:57.897055234Z level=info msg="finished to provision dashboards"
logger=authn.service t=2024-08-29T15:36:58.264764503Z level=warn msg="Failed to authenticate request" client=auth.client.session error="user token not found"
logger=sqlstore t=2024-08-29T15:36:58.265187334Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=context userId=0 orgId=1 uname= t=2024-08-29T15:36:58.268095574Z level=info msg="Request Completed" method=GET path=/api/live/ws status=400 remote_addr=10.0.2.2 time_ms=3 duration=3.881429ms size=12 referer= handler=/api/live/ws status_source=server
logger=ngalert.scheduler t=2024-08-29T15:37:00.001712495Z level=debug msg="Alert rules fetched" rulesCount=0 foldersCount=0 updatedRules=0
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.899179157Z level=debug msg="Start walking disk" path=/var/lib/grafana/dashboards
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.907917615Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/nginx-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.912802281Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/prometheus-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.915537616Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/wordpress-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.91851003Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/mariadb-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.921378771Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/monitorix-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.923303084Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/nginx-exporter-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.92474746Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/static-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.927934903Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/cadvisor-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.929187239Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/grafana-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.929678483Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/nginx-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.93054183Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/portainer-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.931298932Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/redis-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.932029794Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/all-containers-stats.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.93286486Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/ftp-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:07.93353201Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/adminer-stats-dash.json folderId=0 folderUid=
logger=ngalert.scheduler t=2024-08-29T15:37:10.002924038Z level=debug msg="Alert rules fetched" rulesCount=0 foldersCount=0 updatedRules=0
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.899822297Z level=debug msg="Start walking disk" path=/var/lib/grafana/dashboards
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.913470938Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/ftp-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.917716254Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/mariadb-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.928449165Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/monitorix-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.937788697Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/static-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.948632908Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/wordpress-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.982418158Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/all-containers-stats.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.986495573Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/grafana-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.987180884Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/nginx-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.988295847Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/prometheus-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.989465777Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/adminer-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.990726224Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/cadvisor-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.99211493Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/portainer-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.993274073Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/redis-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.994434174Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/nginx-exporter-stats-dash.json folderId=0 folderUid=
logger=provisioning.dashboard type=file name=default t=2024-08-29T15:37:17.995554411Z level=debug msg="provisioned dashboard is up to date" provisioner=default file=/var/lib/grafana/dashboards/nginx-stats-dash.json folderId=0 folderUid=
logger=authn.service t=2024-08-29T15:37:19.229526899Z level=warn msg="Failed to authenticate request" client=auth.client.session error="user token not found"
logger=sqlstore t=2024-08-29T15:37:19.247884899Z level=debug msg="ReadReplica not configured, using main SQLStore"
logger=context userId=0 orgId=1 uname= t=2024-08-29T15:37:19.254362269Z level=info msg="Request Completed" method=GET path=/api/user/preferences status=401 remote_addr=10.0.2.2 time_ms=25 duration=25.06397ms size=27 referer="https://bsuc.42.fr/grafana/?orgId=1" handler=/api/user/preferences status_source=server
logger=ngalert.scheduler t=2024-08-29T15:37:20.001728914Z level=debug msg="Alert rules fetched" rulesCount=0 foldersCount=0 updatedRules=0
